# Comparing `tmp/gdal_utils-3.7.0.0-py3-none-any.whl.zip` & `tmp/gdal_utils-3.7.1.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,12 +1,12 @@
-Zip file size: 329370 bytes, number of entries: 97
--rw-rw-r--  2.0 unx      432 b- defN 23-May-02 13:04 osgeo_utils/__init__.py
+Zip file size: 329954 bytes, number of entries: 97
+-rw-rw-r--  2.0 unx      432 b- defN 23-Jul-06 11:09 osgeo_utils/__init__.py
 -rw-rw-r--  2.0 unx   166280 b- defN 23-May-02 13:04 osgeo_utils/gdal2tiles.py
 -rw-rw-r--  2.0 unx    15776 b- defN 23-May-02 13:04 osgeo_utils/gdal2xyz.py
--rw-rw-r--  2.0 unx    36237 b- defN 23-May-02 13:04 osgeo_utils/gdal_calc.py
+-rw-rw-r--  2.0 unx    36560 b- defN 23-Jul-05 11:52 osgeo_utils/gdal_calc.py
 -rw-rw-r--  2.0 unx    15155 b- defN 23-May-02 13:04 osgeo_utils/gdal_edit.py
 -rw-rw-r--  2.0 unx     9085 b- defN 23-May-02 13:04 osgeo_utils/gdal_fillnodata.py
 -rw-rw-r--  2.0 unx    18296 b- defN 23-May-02 13:04 osgeo_utils/gdal_merge.py
 -rw-rw-r--  2.0 unx    11772 b- defN 23-May-02 13:04 osgeo_utils/gdal_pansharpen.py
 -rw-rw-r--  2.0 unx    11088 b- defN 23-May-02 13:04 osgeo_utils/gdal_polygonize.py
 -rw-rw-r--  2.0 unx     7052 b- defN 23-May-02 13:04 osgeo_utils/gdal_proximity.py
 -rw-rw-r--  2.0 unx    35621 b- defN 23-May-02 13:04 osgeo_utils/gdal_retile.py
@@ -82,18 +82,18 @@
 -rw-rw-r--  2.0 unx    19843 b- defN 23-May-02 13:04 osgeo_utils/samples/ogrupdate.py
 -rw-rw-r--  2.0 unx     7724 b- defN 23-May-02 13:04 osgeo_utils/samples/rel.py
 -rw-rw-r--  2.0 unx     7578 b- defN 23-May-02 13:04 osgeo_utils/samples/tigerpoly.py
 -rw-rw-r--  2.0 unx     4368 b- defN 23-May-02 13:04 osgeo_utils/samples/tile_extent_from_raster.py
 -rw-rw-r--  2.0 unx     4055 b- defN 23-May-02 13:04 osgeo_utils/samples/tolatlong.py
 -rw-rw-r--  2.0 unx     4344 b- defN 23-May-02 13:04 osgeo_utils/samples/val_repl.py
 -rw-rw-r--  2.0 unx    18476 b- defN 23-May-02 13:04 osgeo_utils/samples/validate_cloud_optimized_geotiff.py
--rw-rw-r--  2.0 unx   109775 b- defN 23-May-02 13:04 osgeo_utils/samples/validate_gpkg.py
+-rw-rw-r--  2.0 unx   112045 b- defN 23-Jun-24 14:56 osgeo_utils/samples/validate_gpkg.py
 -rw-rw-r--  2.0 unx    70659 b- defN 23-May-02 13:04 osgeo_utils/samples/validate_jp2.py
 -rw-rw-r--  2.0 unx     4768 b- defN 23-May-02 13:04 osgeo_utils/samples/vec_tr.py
 -rw-rw-r--  2.0 unx     4843 b- defN 23-May-02 13:04 osgeo_utils/samples/vec_tr_spat.py
 -rw-rw-r--  2.0 unx     7103 b- defN 23-May-02 13:04 osgeo_utils/samples/wcs_virtds_params.py
--rw-rw-r--  2.0 unx     3878 b- defN 23-May-10 15:25 gdal_utils-3.7.0.0.dist-info/METADATA
--rw-rw-r--  2.0 unx       92 b- defN 23-May-10 15:25 gdal_utils-3.7.0.0.dist-info/WHEEL
--rw-rw-r--  2.0 unx      828 b- defN 23-May-10 15:25 gdal_utils-3.7.0.0.dist-info/entry_points.txt
--rw-rw-r--  2.0 unx       12 b- defN 23-May-10 15:25 gdal_utils-3.7.0.0.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     8661 b- defN 23-May-10 15:25 gdal_utils-3.7.0.0.dist-info/RECORD
-97 files, 1199363 bytes uncompressed, 315640 bytes compressed:  73.7%
+-rw-rw-r--  2.0 unx     3878 b- defN 23-Jul-13 17:15 gdal_utils-3.7.1.0.dist-info/METADATA
+-rw-rw-r--  2.0 unx       92 b- defN 23-Jul-13 17:15 gdal_utils-3.7.1.0.dist-info/WHEEL
+-rw-rw-r--  2.0 unx      828 b- defN 23-Jul-13 17:15 gdal_utils-3.7.1.0.dist-info/entry_points.txt
+-rw-rw-r--  2.0 unx       12 b- defN 23-Jul-13 17:15 gdal_utils-3.7.1.0.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     8661 b- defN 23-Jul-13 17:15 gdal_utils-3.7.1.0.dist-info/RECORD
+97 files, 1201956 bytes uncompressed, 316224 bytes compressed:  73.7%
```

## zipnote {}

```diff
@@ -270,23 +270,23 @@
 
 Filename: osgeo_utils/samples/vec_tr_spat.py
 Comment: 
 
 Filename: osgeo_utils/samples/wcs_virtds_params.py
 Comment: 
 
-Filename: gdal_utils-3.7.0.0.dist-info/METADATA
+Filename: gdal_utils-3.7.1.0.dist-info/METADATA
 Comment: 
 
-Filename: gdal_utils-3.7.0.0.dist-info/WHEEL
+Filename: gdal_utils-3.7.1.0.dist-info/WHEEL
 Comment: 
 
-Filename: gdal_utils-3.7.0.0.dist-info/entry_points.txt
+Filename: gdal_utils-3.7.1.0.dist-info/entry_points.txt
 Comment: 
 
-Filename: gdal_utils-3.7.0.0.dist-info/top_level.txt
+Filename: gdal_utils-3.7.1.0.dist-info/top_level.txt
 Comment: 
 
-Filename: gdal_utils-3.7.0.0.dist-info/RECORD
+Filename: gdal_utils-3.7.1.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## osgeo_utils/__init__.py

```diff
@@ -1,9 +1,9 @@
 __package_name__ = "gdal-utils"
-gdal_utils_version = (3, 7, 0, 0)
+gdal_utils_version = (3, 7, 1, 0)
 __version__ = ".".join(str(i) for i in gdal_utils_version)
 __author__ = "Frank Warmerdam"
 __author_email__ = "warmerdam@pobox.com"
 __maintainer__ = "Idan Miara"
 __maintainer_email__ = "idan@miara.com"
 __description__ = (
     "gdal-utils: An extension library for GDAL - Geospatial Data Abstraction Library"
```

## osgeo_utils/gdal_calc.py

```diff
@@ -439,15 +439,15 @@
             myOut.SetGeoTransform(GeoTransformCheck)
 
         if not ProjectionCheck:
             ProjectionCheck = myFiles[0].GetProjection()
         if ProjectionCheck:
             myOut.SetProjection(ProjectionCheck)
 
-        if NoDataValue is None:
+        if NoDataValue is None and not hideNoData:
             myOutNDV = DefaultNDVLookup[
                 myOutType
             ]  # use the default noDataValue for this datatype
         elif isinstance(NoDataValue, str) and NoDataValue.lower() == "none":
             myOutNDV = None  # not to set any noDataValue
         else:
             myOutNDV = NoDataValue  # use the given noDataValue
@@ -461,17 +461,14 @@
                 if is_path_like(color_table):
                     color_table = get_color_table(color_table)
                 myOutB.SetRasterColorTable(color_table)
                 myOutB.SetRasterColorInterpretation(gdal.GCI_PaletteIndex)
 
             myOutB = None  # write to band
 
-        if hideNoData:
-            myOutNDV = None
-
     myOutTypeName = gdal.GetDataTypeName(myOutType)
     if debug:
         print(
             f"output file: {outfile}, dimensions: {myOut.RasterXSize}, {myOut.RasterYSize}, type: {myOutTypeName}"
         )
 
     ################################################################
@@ -750,14 +747,24 @@
                     type=int,
                     help=f"number of raster band for file {alpha} (default 1)",
                     metavar="n",
                 )
             except argparse.ArgumentError:
                 pass
 
+    def float_or_none(self, NoDataValue: str) -> Union[float, str]:
+        if NoDataValue.lower() == "none":
+            return NoDataValue
+
+        try:
+            return float(NoDataValue)
+        except ValueError:
+            msg = f"Invalid float value for NoDataValue: {NoDataValue}"
+            raise argparse.ArgumentTypeError(msg)
+
     def get_parser(self, argv) -> GDALArgumentParser:
         parser = self.parser
         parser.add_argument(
             "--calc",
             dest="calc",
             type=str,
             required=True,
@@ -777,15 +784,15 @@
             required=True,
             metavar="filename",
             help="output file to generate or fill",
         )
         parser.add_argument(
             "--NoDataValue",
             dest="NoDataValue",
-            type=float,
+            type=self.float_or_none,
             metavar="value",
             help="output nodata value (default datatype specific value)",
         )
         parser.add_argument(
             "--hideNoData",
             dest="hideNoData",
             action="store_true",
```

## osgeo_utils/samples/validate_gpkg.py

```diff
@@ -109,14 +109,16 @@
         abort_at_first_error=True,
         extra_checks=False,
         log_msg=False,
         warning_msg=True,
         warning_as_error=False,
     ):
         self.filename = filename
+        self.conn = None
+        self.has_tried_spatialite = False
         self.extended_pragma_info = False
         self.abort_at_first_error = abort_at_first_error
         self.extra_checks = extra_checks
         self.log_msg = log_msg
         self.warning_msg = warning_msg
         self.warning_as_error = warning_as_error
         self.errors = []
@@ -665,39 +667,72 @@
         )
         geom_column_name = rows_gpkg_geometry_columns[0][0]
         z = rows_gpkg_geometry_columns[0][1]
         m = rows_gpkg_geometry_columns[0][2]
         geometry_type_name = rows_gpkg_geometry_columns[0][3]
         srs_id = rows_gpkg_geometry_columns[0][4]
 
-        c.execute("PRAGMA table_info(%s)" % _esc_id(table_name))
+        c.execute(
+            "SELECT 1 FROM sqlite_master WHERE name = ? and type = 'view'",
+            (table_name,),
+        )
+        is_view = c.fetchone() is not None
+        is_spatialite_computed_column = False
+        if is_view:
+            c.execute("SELECT 1 FROM sqlite_master WHERE name = 'gpkg_extensions'")
+            if c.fetchone() is not None:
+                c.execute(
+                    "SELECT 1 FROM gpkg_extensions WHERE table_name = ? AND column_name = ? AND extension_name = 'gdal_spatialite_computed_geom_column'",
+                    (table_name, geom_column_name),
+                )
+                if c.fetchone() is not None:
+                    is_spatialite_computed_column = True
+
+        try:
+            c.execute("PRAGMA table_info(%s)" % _esc_id(table_name))
+        except sqlite3.OperationalError as e:
+            if not self.has_tried_spatialite:
+                self.has_tried_spatialite = True
+                spatialite_loaded = False
+                try:
+                    self.conn.enable_load_extension(True)
+                    self.conn.execute('SELECT load_extension("mod_spatialite")')
+                    spatialite_loaded = True
+                except Exception:
+                    pass
+                if not spatialite_loaded:
+                    raise e
+                c.execute("PRAGMA table_info(%s)" % _esc_id(table_name))
+
         cols = c.fetchall()
+
         found_geom = False
         count_pkid = 0
         pkid_column_name = None
         for (_, name, typ, notnull, default, pk) in cols:
             if name.lower() == geom_column_name.lower():
                 found_geom = True
-                self._assert(
-                    typ in GPKGChecker.BASE_GEOM_TYPES
-                    or typ in GPKGChecker.EXT_GEOM_TYPES,
-                    25,
-                    ("invalid type (%s) for geometry " + "column of table %s")
-                    % (typ, table_name),
-                )
-                self._assert(
-                    typ == geometry_type_name,
-                    31,
-                    (
-                        "table %s has geometry column of type %s in "
-                        + "SQL and %s in geometry_type_name of "
-                        + "gpkg_geometry_columns"
+                if not is_spatialite_computed_column:
+                    self._assert(
+                        typ in GPKGChecker.BASE_GEOM_TYPES
+                        or typ in GPKGChecker.EXT_GEOM_TYPES,
+                        25,
+                        ("invalid type (%s) for geometry " + "column of table %s")
+                        % (typ, table_name),
+                    )
+                    self._assert(
+                        typ == geometry_type_name,
+                        31,
+                        (
+                            "table %s has geometry column of type %s in "
+                            + "SQL and %s in geometry_type_name of "
+                            + "gpkg_geometry_columns"
+                        )
+                        % (table_name, typ, geometry_type_name),
                     )
-                    % (table_name, typ, geometry_type_name),
-                )
 
             elif pk == 1:
                 if pkid_column_name is None:
                     pkid_column_name = name
                 count_pkid += 1
                 self._assert(
                     typ == "INTEGER",
@@ -1013,24 +1048,36 @@
                 "SELECT 1 FROM sqlite_master WHERE type = 'trigger' "
                 + "AND name = '%s_insert'" % _esc_literal(rtree_name)
             )
             self._assert(
                 c.fetchone() is not None, 75, "%s_insert trigger missing" % rtree_name
             )
 
-            for i in range(4):
-                c.execute(
-                    "SELECT 1 FROM sqlite_master WHERE "
-                    + "type = 'trigger' "
-                    + "AND name = '%s_update%d'" % (_esc_literal(rtree_name), i + 1)
-                )
+            if self.version < (1, 4):
+                expected_update_triggers_numbers = (1, 2, 3, 4)
+            else:
+                expected_update_triggers_numbers = (2, 4, 5, 6, 7)
+
+            c.execute(
+                "SELECT name FROM sqlite_master WHERE "
+                + "type = 'trigger' "
+                + "AND name LIKE '%s_update%%'" % (_esc_literal(rtree_name))
+            )
+            trigger_names = c.fetchall()
+            found_numbers = set()
+            for (name,) in trigger_names:
+                number = int(name[len(_esc_literal(rtree_name)) + len("_update") :])
+                if number not in expected_update_triggers_numbers:
+                    self._assert(False, 75, f"{name} trigger unexpected")
+                found_numbers.add(number)
+            for expected_number in expected_update_triggers_numbers:
                 self._assert(
-                    c.fetchone() is not None,
+                    expected_number in found_numbers,
                     75,
-                    "%s_update%d trigger missing" % (rtree_name, i + 1),
+                    "%s_update%d trigger missing" % (rtree_name, expected_number),
                 )
 
             c.execute(
                 "SELECT 1 FROM sqlite_master WHERE type = 'trigger' "
                 + "AND name = '%s_delete'" % _esc_literal(rtree_name)
             )
             self._assert(
@@ -2793,18 +2840,20 @@
                 self._assert(
                     user_version >= expected_version,
                     2,
                     "Wrong user_version: %d. Expected >= %d"
                     % (user_version, expected_version),
                 )
                 self.version = (
-                    expected_version // 10000,
-                    (expected_version % 10000) // 100,
-                    expected_version % 100,
+                    user_version // 10000,
+                    (user_version % 10000) // 100,
+                    user_version % 100,
                 )
+                if self.version >= (1, 5, 0):
+                    self._warn(f"Version {self.version} not handled by this script")
             else:
                 self.version = (99, 99)
 
         conn = sqlite3.connect(":memory:")
         c = conn.cursor()
         c.execute(
             "CREATE TABLE foo(one TEXT, two TEXT, "
@@ -2814,14 +2863,15 @@
         rows = c.fetchall()
         if rows[1][5] == 2:
             self.extended_pragma_info = True
         c.close()
         conn.close()
 
         conn = sqlite3.connect(self.filename)
+        self.conn = conn
         c = conn.cursor()
         try:
             try:
                 c.execute("SELECT 1 FROM sqlite_master")
                 c.fetchone()
             except Exception:
                 self._assert(False, 1, "not a sqlite3 database")
```

## Comparing `gdal_utils-3.7.0.0.dist-info/METADATA` & `gdal_utils-3.7.1.0.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: gdal-utils
-Version: 3.7.0.0
+Version: 3.7.1.0
 Summary: gdal-utils: An extension library for GDAL - Geospatial Data Abstraction Library
 Home-page: http://www.gdal.org
 Author: Frank Warmerdam
 Author-email: warmerdam@pobox.com
 Maintainer: Idan Miara
 Maintainer-email: idan@miara.com
 License: MIT
```

## Comparing `gdal_utils-3.7.0.0.dist-info/entry_points.txt` & `gdal_utils-3.7.1.0.dist-info/entry_points.txt`

 * *Files identical despite different names*

## Comparing `gdal_utils-3.7.0.0.dist-info/RECORD` & `gdal_utils-3.7.1.0.dist-info/RECORD`

 * *Files 2% similar despite different names*

```diff
@@ -1,11 +1,11 @@
-osgeo_utils/__init__.py,sha256=jWHmbr8m6Z-of1vY3_4DooUNhtc0BYjh4-h5hsTWu-o,432
+osgeo_utils/__init__.py,sha256=K1ZvsZrxqXmPyFoP3ivQczw8S7Ma7eVVAXXUxY_kGZQ,432
 osgeo_utils/gdal2tiles.py,sha256=P1E_C8E0p-FBdfC6HTFI2hpAWRzZuS7tTsGBr0Zyt_Q,166280
 osgeo_utils/gdal2xyz.py,sha256=Y1iwvxl0HTQnLwF2daPLL8Mlv2zgQX418BciPwxKoE0,15776
-osgeo_utils/gdal_calc.py,sha256=1ahubsbwUBinh-sCOzBNiqLyVxNPrUnq7Uie6vHTnr0,36237
+osgeo_utils/gdal_calc.py,sha256=i3K5K0ABNAFlgafxZyhLtdPGyugYZH8aB4aApDUpZhg,36560
 osgeo_utils/gdal_edit.py,sha256=bZ_yxV6cM1nTA4IU5OdM7zqbbxQ7qRr9uNvBOlXGgkY,15155
 osgeo_utils/gdal_fillnodata.py,sha256=MZ1kulgqnt6Vlwe6TpfUJVOk-UnJucntxxMQ0g1MLqQ,9085
 osgeo_utils/gdal_merge.py,sha256=HMoQt9AwXH8kynSNXxq3YRIEu6EtYrHrB0od2yA5oDc,18296
 osgeo_utils/gdal_pansharpen.py,sha256=8e9jMyE0WCQ2P1TY_DIkZf29Dt35TVap940nfo7X6Ig,11772
 osgeo_utils/gdal_polygonize.py,sha256=vKLmZWlQRp0OMV550RAZiTUnjllU7FlaYJrReVqTO_g,11088
 osgeo_utils/gdal_proximity.py,sha256=IveoTXyQMO5SsNeyLk_0ACP3x2LppCxH7EyN0gX5wJw,7052
 osgeo_utils/gdal_retile.py,sha256=YW9KvlMN8D4_de7dFUAurctCmLsfrI6VwRKX9XFjUQg,35621
@@ -81,17 +81,17 @@
 osgeo_utils/samples/ogrupdate.py,sha256=dsg3jwqghuQp9eyCq2Uwb5yW9cRzkdoBpQy-W3xjQOg,19843
 osgeo_utils/samples/rel.py,sha256=lbTnJ_o-HsrGsPTyQK36ZIHMUMjXWO0as1lpvvXpQ14,7724
 osgeo_utils/samples/tigerpoly.py,sha256=9vScW-3dZ4FMR25PoZti7IwpjvMNhBnqYHbzi0WoY4E,7578
 osgeo_utils/samples/tile_extent_from_raster.py,sha256=bHstiiXccWDQ9FBZCEVNDJk9JhDDAG_3fPKxqGbMeOA,4368
 osgeo_utils/samples/tolatlong.py,sha256=Ypfr_Yy62AjbzYKrcwItyRqy1l7hRGHWEIgdqWlkrGk,4055
 osgeo_utils/samples/val_repl.py,sha256=k7uFjiXhaYO6bGs0_C2GVJHEz8xnESPqyQ6WViY55bE,4344
 osgeo_utils/samples/validate_cloud_optimized_geotiff.py,sha256=2OZDoyjs_vPo8abwNd15Ex2g-u3HBQPJCgZH-jJ2E14,18476
-osgeo_utils/samples/validate_gpkg.py,sha256=tMl8c_vRsIN1fvmFI7NY5rFJTK3SRwot4evxrKU-sWo,109775
+osgeo_utils/samples/validate_gpkg.py,sha256=DrdktXFGuDvCK9z0VqcwQYDEVSd2ONo49HA_w18xqmw,112045
 osgeo_utils/samples/validate_jp2.py,sha256=RYMn5m_WWoySaOvHzzB2cr6IrR9YVUKYRbaSzzSh4yY,70659
 osgeo_utils/samples/vec_tr.py,sha256=CzwiIcbOBb78JHAV5rlOJ5Jn_g_EkvlGjYHdhs4dXhw,4768
 osgeo_utils/samples/vec_tr_spat.py,sha256=M380f8P1TDa3p_1CBicXx_gk9J7FKtFYi6v_jQ0kRCs,4843
 osgeo_utils/samples/wcs_virtds_params.py,sha256=bo-5FtBCk97DwaNF1GxkfHNCe9xLOCt1oR4PsEGpU38,7103
-gdal_utils-3.7.0.0.dist-info/METADATA,sha256=bjk-wqxRcqP-QEcd1s44cMZSZjQiMM1yM8zeTWy4Vu4,3878
-gdal_utils-3.7.0.0.dist-info/WHEEL,sha256=g4nMs7d-Xl9-xC9XovUrsDHGXt-FT0E17Yqo92DEfvY,92
-gdal_utils-3.7.0.0.dist-info/entry_points.txt,sha256=64fFaWlzSWRY4LAVNTheYcIR7xJlvNznOwdtS8HgzLc,828
-gdal_utils-3.7.0.0.dist-info/top_level.txt,sha256=S2PDWMyA5xqC4JEsxOsQN222-k98sNYTODfMO7B1_NU,12
-gdal_utils-3.7.0.0.dist-info/RECORD,,
+gdal_utils-3.7.1.0.dist-info/METADATA,sha256=eprGL4XXladN1n4eK-lZJuG-qBSogmibkmJ_CKOx70g,3878
+gdal_utils-3.7.1.0.dist-info/WHEEL,sha256=g4nMs7d-Xl9-xC9XovUrsDHGXt-FT0E17Yqo92DEfvY,92
+gdal_utils-3.7.1.0.dist-info/entry_points.txt,sha256=64fFaWlzSWRY4LAVNTheYcIR7xJlvNznOwdtS8HgzLc,828
+gdal_utils-3.7.1.0.dist-info/top_level.txt,sha256=S2PDWMyA5xqC4JEsxOsQN222-k98sNYTODfMO7B1_NU,12
+gdal_utils-3.7.1.0.dist-info/RECORD,,
```

