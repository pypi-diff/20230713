# Comparing `tmp/fastapi_swagger2-0.0.1b5.tar.gz` & `tmp/fastapi_swagger2-0.0.2.tar.gz`

## Comparing `fastapi_swagger2-0.0.1b5.tar` & `fastapi_swagger2-0.0.2.tar`

### file list

```diff
@@ -1,34 +1,17 @@
--rw-r--r--   0        0        0       19 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/requirements-dev.txt
--rw-r--r--   0        0        0       10 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/requirements.txt
--rw-r--r--   0        0        0        1 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/.ruff_cache/.gitignore
--rw-r--r--   0        0        0        8 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/.ruff_cache/.update-informer
--rw-r--r--   0        0        0       43 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/.ruff_cache/CACHEDIR.TAG
--rw-r--r--   0        0        0       16 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/.ruff_cache/content/10fbfe993ec4be0d
--rw-r--r--   0        0        0    19350 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/.ruff_cache/content/1a84b0002c6f63c3
--rw-r--r--   0        0        0       16 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/.ruff_cache/content/1abeadf52d9572ab
--rw-r--r--   0        0        0       24 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/.ruff_cache/content/26e89fbd03286482
--rw-r--r--   0        0        0       24 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/.ruff_cache/content/2d87409254dbc080
--rw-r--r--   0        0        0       24 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/.ruff_cache/content/3bf02553ad62c3bf
--rw-r--r--   0        0        0       24 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/.ruff_cache/content/6d5e270589f4c84f
--rw-r--r--   0        0        0       16 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/.ruff_cache/content/8cf332caaea8e79b
--rw-r--r--   0        0        0       24 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/.ruff_cache/content/91433f946dd52c35
--rw-r--r--   0        0        0       16 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/.ruff_cache/content/a8a883be09c5919b
--rw-r--r--   0        0        0       16 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/.ruff_cache/content/c180a20ea5e70786
--rw-r--r--   0        0        0       16 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/.ruff_cache/content/f16744491f37c6f5
--rw-r--r--   0        0        0       16 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/.ruff_cache/content/f885759af04f4f9e
--rw-r--r--   0        0        0       16 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/.ruff_cache/content/fbcf51701267e364
--rwxr-xr-x   0        0        0       30 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/scripts/build.sh
--rwxr-xr-x   0        0        0       98 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/scripts/clean.sh
--rwxr-xr-x   0        0        0      149 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/scripts/format.sh
--rwxr-xr-x   0        0        0      197 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/scripts/lint.sh
--rwxr-xr-x   0        0        0       43 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/scripts/publish.sh
--rwxr-xr-x   0        0        0      175 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/scripts/test.sh
--rw-r--r--   0        0        0     5676 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/src/fastapi_swagger2/__init__.py
--rw-r--r--   0        0        0       30 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/src/fastapi_swagger2/constants.py
--rw-r--r--   0        0        0     9198 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/src/fastapi_swagger2/models.py
--rw-r--r--   0        0        0    18893 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/src/fastapi_swagger2/utils.py
--rw-r--r--   0        0        0     3089 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/.gitignore
--rw-r--r--   0        0        0     1070 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/LICENSE
--rw-r--r--   0        0        0     1634 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/README.md
--rw-r--r--   0        0        0     2514 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/pyproject.toml
--rw-r--r--   0        0        0     4917 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.1b5/PKG-INFO
+-rw-r--r--   0        0        0       19 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.2/requirements-dev.txt
+-rw-r--r--   0        0        0       10 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.2/requirements.txt
+-rwxr-xr-x   0        0        0       30 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.2/scripts/build.sh
+-rwxr-xr-x   0        0        0       98 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.2/scripts/clean.sh
+-rwxr-xr-x   0        0        0      149 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.2/scripts/format.sh
+-rwxr-xr-x   0        0        0      197 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.2/scripts/lint.sh
+-rwxr-xr-x   0        0        0       43 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.2/scripts/publish.sh
+-rwxr-xr-x   0        0        0      175 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.2/scripts/test.sh
+-rw-r--r--   0        0        0     5674 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.2/src/fastapi_swagger2/__init__.py
+-rw-r--r--   0        0        0       30 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.2/src/fastapi_swagger2/constants.py
+-rw-r--r--   0        0        0     9198 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.2/src/fastapi_swagger2/models.py
+-rw-r--r--   0        0        0    18893 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.2/src/fastapi_swagger2/utils.py
+-rw-r--r--   0        0        0     3089 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.2/.gitignore
+-rw-r--r--   0        0        0     1070 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.2/LICENSE
+-rw-r--r--   0        0        0     1508 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.2/README.md
+-rw-r--r--   0        0        0     2524 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.2/pyproject.toml
+-rw-r--r--   0        0        0     4798 2020-02-02 00:00:00.000000 fastapi_swagger2-0.0.2/PKG-INFO
```

### Comparing `fastapi_swagger2-0.0.1b5/.ruff_cache/content/1a84b0002c6f63c3` & `fastapi_swagger2-0.0.2/src/fastapi_swagger2/utils.py`

 * *Files 3% similar despite different names*

```diff
@@ -1,1210 +1,1181 @@
-00000000: 0000 0000 0000 0000 0100 0000 0000 0000  ................
-00000010: 1e00 0000 0000 0000 556e 6e65 6365 7373  ........Unnecess
-00000020: 6172 7943 6f6d 7072 6568 656e 7369 6f6e  aryComprehension
-00000030: 416e 7941 6c6c 1f00 0000 0000 0000 556e  AnyAll........Un
-00000040: 6e65 6365 7373 6172 7920 6c69 7374 2063  necessary list c
-00000050: 6f6d 7072 6568 656e 7369 6f6e 2e01 2500  omprehension..%.
-00000060: 0000 0000 0000 5265 6d6f 7665 2075 6e6e  ......Remove unn
-00000070: 6563 6573 7361 7279 206c 6973 7420 636f  ecessary list co
-00000080: 6d70 7265 6865 6e73 696f 6eb1 3d00 0037  mprehension.=..7
-00000090: 3e00 0001 0100 0000 0000 0000 9c3d 0000  >............=..
-000000a0: 453e 0000 0181 0000 0000 0000 0061 6e79  E>...........any
-000000b0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-000000c0: 2020 7374 6174 7573 2069 6e20 6f70 6572    status in oper
-000000d0: 6174 696f 6e5b 2272 6573 706f 6e73 6573  ation["responses
-000000e0: 225d 0a20 2020 2020 2020 2020 2020 2020  "].             
-000000f0: 2020 2020 2020 2066 6f72 2073 7461 7475         for statu
-00000100: 7320 696e 205b 6874 7470 3432 322c 2022  s in [http422, "
-00000110: 3458 5822 2c20 2264 6566 6175 6c74 225d  4XX", "default"]
-00000120: 0a20 2020 2020 2020 2020 2020 2029 0100  .            )..
-00000130: 0000 0100 0000 0000 0000 0000 0000 b13d  ...............=
-00000140: 0000 0100 0000 0000 0000 4300 0000 0000  ..........C.....
-00000150: 0000 2f55 7365 7273 2f76 6b61 6e77 6164  ../Users/vkanwad
-00000160: 652f 576f 726b 2f66 6173 7461 7069 5f73  e/Work/fastapi_s
-00000170: 7761 6767 6572 322f 7372 632f 6661 7374  wagger2/src/fast
-00000180: 6170 695f 7377 6167 6765 7232 2f75 7469  api_swagger2/uti
-00000190: 6c73 2e70 79f9 4900 0000 0000 0069 6d70  ls.py.I......imp
-000001a0: 6f72 7420 6874 7470 2e63 6c69 656e 740a  ort http.client.
-000001b0: 696d 706f 7274 2069 6e73 7065 6374 0a66  import inspect.f
-000001c0: 726f 6d20 656e 756d 2069 6d70 6f72 7420  rom enum import 
-000001d0: 456e 756d 0a66 726f 6d20 7479 7069 6e67  Enum.from typing
-000001e0: 2069 6d70 6f72 7420 416e 792c 2044 6963   import Any, Dic
-000001f0: 742c 204c 6973 742c 204f 7074 696f 6e61  t, List, Optiona
-00000200: 6c2c 2053 6571 7565 6e63 652c 2053 6574  l, Sequence, Set
-00000210: 2c20 5475 706c 652c 2054 7970 652c 2055  , Tuple, Type, U
-00000220: 6e69 6f6e 2c20 6361 7374 0a66 726f 6d20  nion, cast.from 
-00000230: 7572 6c6c 6962 2e70 6172 7365 2069 6d70  urllib.parse imp
-00000240: 6f72 7420 7572 6c70 6172 7365 2c20 5061  ort urlparse, Pa
-00000250: 7273 6552 6573 756c 740a 0a66 726f 6d20  rseResult..from 
-00000260: 6661 7374 6170 6920 696d 706f 7274 2072  fastapi import r
-00000270: 6f75 7469 6e67 0a66 726f 6d20 6661 7374  outing.from fast
-00000280: 6170 692e 6461 7461 7374 7275 6374 7572  api.datastructur
-00000290: 6573 2069 6d70 6f72 7420 4465 6661 756c  es import Defaul
-000002a0: 7450 6c61 6365 686f 6c64 6572 0a66 726f  tPlaceholder.fro
-000002b0: 6d20 6661 7374 6170 692e 6465 7065 6e64  m fastapi.depend
-000002c0: 656e 6369 6573 2e6d 6f64 656c 7320 696d  encies.models im
-000002d0: 706f 7274 2044 6570 656e 6461 6e74 0a66  port Dependant.f
-000002e0: 726f 6d20 6661 7374 6170 692e 6465 7065  rom fastapi.depe
-000002f0: 6e64 656e 6369 6573 2e75 7469 6c73 2069  ndencies.utils i
-00000300: 6d70 6f72 7420 6765 745f 666c 6174 5f64  mport get_flat_d
-00000310: 6570 656e 6461 6e74 2c20 6765 745f 666c  ependant, get_fl
-00000320: 6174 5f70 6172 616d 730a 6672 6f6d 2066  at_params.from f
-00000330: 6173 7461 7069 2e65 6e63 6f64 6572 7320  astapi.encoders 
-00000340: 696d 706f 7274 206a 736f 6e61 626c 655f  import jsonable_
-00000350: 656e 636f 6465 720a 6672 6f6d 2066 6173  encoder.from fas
-00000360: 7461 7069 2e6c 6f67 6765 7220 696d 706f  tapi.logger impo
-00000370: 7274 206c 6f67 6765 720a 6672 6f6d 2066  rt logger.from f
-00000380: 6173 7461 7069 2e6f 7065 6e61 7069 2e63  astapi.openapi.c
-00000390: 6f6e 7374 616e 7473 2069 6d70 6f72 7420  onstants import 
-000003a0: 4d45 5448 4f44 535f 5749 5448 5f42 4f44  METHODS_WITH_BOD
-000003b0: 590a 6672 6f6d 2066 6173 7461 7069 2e6f  Y.from fastapi.o
-000003c0: 7065 6e61 7069 2e75 7469 6c73 2069 6d70  penapi.utils imp
-000003d0: 6f72 7420 280a 2020 2020 6765 745f 666c  ort (.    get_fl
-000003e0: 6174 5f6d 6f64 656c 735f 6672 6f6d 5f72  at_models_from_r
-000003f0: 6f75 7465 732c 0a20 2020 2067 6574 5f6f  outes,.    get_o
-00000400: 7065 6e61 7069 5f6f 7065 7261 7469 6f6e  penapi_operation
-00000410: 5f6d 6574 6164 6174 612c 0a20 2020 2073  _metadata,.    s
-00000420: 7461 7475 735f 636f 6465 5f72 616e 6765  tatus_code_range
-00000430: 732c 0a29 0a66 726f 6d20 6661 7374 6170  s,.).from fastap
-00000440: 692e 7061 7261 6d73 2069 6d70 6f72 7420  i.params import 
-00000450: 426f 6479 2c20 5061 7261 6d0a 6672 6f6d  Body, Param.from
-00000460: 2066 6173 7461 7069 2e72 6573 706f 6e73   fastapi.respons
-00000470: 6573 2069 6d70 6f72 7420 5265 7370 6f6e  es import Respon
-00000480: 7365 0a66 726f 6d20 6661 7374 6170 692e  se.from fastapi.
-00000490: 7574 696c 7320 696d 706f 7274 2064 6565  utils import dee
-000004a0: 705f 6469 6374 5f75 7064 6174 652c 2069  p_dict_update, i
-000004b0: 735f 626f 6479 5f61 6c6c 6f77 6564 5f66  s_body_allowed_f
-000004c0: 6f72 5f73 7461 7475 735f 636f 6465 0a66  or_status_code.f
-000004d0: 726f 6d20 7079 6461 6e74 6963 2069 6d70  rom pydantic imp
-000004e0: 6f72 7420 4261 7365 4d6f 6465 6c0a 6672  ort BaseModel.fr
-000004f0: 6f6d 2070 7964 616e 7469 632e 6669 656c  om pydantic.fiel
-00000500: 6473 2069 6d70 6f72 7420 4d6f 6465 6c46  ds import ModelF
-00000510: 6965 6c64 2c20 556e 6465 6669 6e65 640a  ield, Undefined.
-00000520: 6672 6f6d 2070 7964 616e 7469 632e 7363  from pydantic.sc
-00000530: 6865 6d61 2069 6d70 6f72 7420 6669 656c  hema import fiel
-00000540: 645f 7363 6865 6d61 2c20 6765 745f 6d6f  d_schema, get_mo
-00000550: 6465 6c5f 6e61 6d65 5f6d 6170 2c20 6d6f  del_name_map, mo
-00000560: 6465 6c5f 7072 6f63 6573 735f 7363 6865  del_process_sche
-00000570: 6d61 0a66 726f 6d20 7079 6461 6e74 6963  ma.from pydantic
-00000580: 2e75 7469 6c73 2069 6d70 6f72 7420 6c65  .utils import le
-00000590: 6e69 656e 745f 6973 7375 6263 6c61 7373  nient_issubclass
-000005a0: 0a66 726f 6d20 7374 6172 6c65 7474 652e  .from starlette.
-000005b0: 7265 7370 6f6e 7365 7320 696d 706f 7274  responses import
-000005c0: 204a 534f 4e52 6573 706f 6e73 650a 6672   JSONResponse.fr
-000005d0: 6f6d 2073 7461 726c 6574 7465 2e72 6f75  om starlette.rou
-000005e0: 7469 6e67 2069 6d70 6f72 7420 4261 7365  ting import Base
-000005f0: 526f 7574 650a 6672 6f6d 2073 7461 726c  Route.from starl
-00000600: 6574 7465 2e73 7461 7475 7320 696d 706f  ette.status impo
-00000610: 7274 2048 5454 505f 3432 325f 554e 5052  rt HTTP_422_UNPR
-00000620: 4f43 4553 5341 424c 455f 454e 5449 5459  OCESSABLE_ENTITY
-00000630: 0a0a 6672 6f6d 2066 6173 7461 7069 5f73  ..from fastapi_s
-00000640: 7761 6767 6572 322e 636f 6e73 7461 6e74  wagger2.constant
-00000650: 7320 696d 706f 7274 2052 4546 5f50 5245  s import REF_PRE
-00000660: 4649 580a 6672 6f6d 2066 6173 7461 7069  FIX.from fastapi
-00000670: 5f73 7761 6767 6572 322e 6d6f 6465 6c73  _swagger2.models
-00000680: 2069 6d70 6f72 7420 5377 6167 6765 7232   import Swagger2
-00000690: 0a0a 7661 6c69 6461 7469 6f6e 5f65 7272  ..validation_err
-000006a0: 6f72 5f64 6566 696e 6974 696f 6e20 3d20  or_definition = 
-000006b0: 7b0a 2020 2020 2274 6974 6c65 223a 2022  {.    "title": "
-000006c0: 5661 6c69 6461 7469 6f6e 4572 726f 7222  ValidationError"
-000006d0: 2c0a 2020 2020 2274 7970 6522 3a20 226f  ,.    "type": "o
-000006e0: 626a 6563 7422 2c0a 2020 2020 2270 726f  bject",.    "pro
-000006f0: 7065 7274 6965 7322 3a20 7b0a 2020 2020  perties": {.    
-00000700: 2020 2020 226c 6f63 223a 207b 0a20 2020      "loc": {.   
-00000710: 2020 2020 2020 2020 2022 7469 746c 6522           "title"
-00000720: 3a20 224c 6f63 6174 696f 6e22 2c0a 2020  : "Location",.  
-00000730: 2020 2020 2020 2020 2020 2274 7970 6522            "type"
-00000740: 3a20 2261 7272 6179 222c 0a20 2020 2020  : "array",.     
-00000750: 2020 2020 2020 2022 6974 656d 7322 3a20         "items": 
-00000760: 7b22 7479 7065 223a 2022 7374 7269 6e67  {"type": "string
-00000770: 227d 2c0a 2020 2020 2020 2020 7d2c 0a20  "},.        },. 
-00000780: 2020 2020 2020 2022 6d73 6722 3a20 7b22         "msg": {"
-00000790: 7469 746c 6522 3a20 224d 6573 7361 6765  title": "Message
-000007a0: 222c 2022 7479 7065 223a 2022 7374 7269  ", "type": "stri
-000007b0: 6e67 227d 2c0a 2020 2020 2020 2020 2274  ng"},.        "t
-000007c0: 7970 6522 3a20 7b22 7469 746c 6522 3a20  ype": {"title": 
-000007d0: 2245 7272 6f72 2054 7970 6522 2c20 2274  "Error Type", "t
-000007e0: 7970 6522 3a20 2273 7472 696e 6722 7d2c  ype": "string"},
-000007f0: 0a20 2020 207d 2c0a 2020 2020 2272 6571  .    },.    "req
-00000800: 7569 7265 6422 3a20 5b22 6c6f 6322 2c20  uired": ["loc", 
-00000810: 226d 7367 222c 2022 7479 7065 225d 2c0a  "msg", "type"],.
-00000820: 7d0a 0a76 616c 6964 6174 696f 6e5f 6572  }..validation_er
-00000830: 726f 725f 7265 7370 6f6e 7365 5f64 6566  ror_response_def
-00000840: 696e 6974 696f 6e20 3d20 7b0a 2020 2020  inition = {.    
-00000850: 2274 6974 6c65 223a 2022 4854 5450 5661  "title": "HTTPVa
-00000860: 6c69 6461 7469 6f6e 4572 726f 7222 2c0a  lidationError",.
-00000870: 2020 2020 2274 7970 6522 3a20 226f 626a      "type": "obj
-00000880: 6563 7422 2c0a 2020 2020 2270 726f 7065  ect",.    "prope
-00000890: 7274 6965 7322 3a20 7b0a 2020 2020 2020  rties": {.      
-000008a0: 2020 2264 6574 6169 6c22 3a20 7b0a 2020    "detail": {.  
-000008b0: 2020 2020 2020 2020 2020 2274 6974 6c65            "title
-000008c0: 223a 2022 4465 7461 696c 222c 0a20 2020  ": "Detail",.   
-000008d0: 2020 2020 2020 2020 2022 7479 7065 223a           "type":
-000008e0: 2022 6172 7261 7922 2c0a 2020 2020 2020   "array",.      
-000008f0: 2020 2020 2020 2269 7465 6d73 223a 207b        "items": {
-00000900: 2224 7265 6622 3a20 5245 465f 5052 4546  "$ref": REF_PREF
-00000910: 4958 202b 2022 5661 6c69 6461 7469 6f6e  IX + "Validation
-00000920: 4572 726f 7222 7d2c 0a20 2020 2020 2020  Error"},.       
-00000930: 207d 0a20 2020 207d 2c0a 7d0a 0a0a 6465   }.    },.}...de
-00000940: 6620 6765 745f 6d6f 6465 6c5f 6465 6669  f get_model_defi
-00000950: 6e69 7469 6f6e 7328 0a20 2020 202a 2c0a  nitions(.    *,.
-00000960: 2020 2020 666c 6174 5f6d 6f64 656c 733a      flat_models:
-00000970: 2053 6574 5b55 6e69 6f6e 5b54 7970 655b   Set[Union[Type[
-00000980: 4261 7365 4d6f 6465 6c5d 2c20 5479 7065  BaseModel], Type
-00000990: 5b45 6e75 6d5d 5d5d 2c0a 2020 2020 6d6f  [Enum]]],.    mo
-000009a0: 6465 6c5f 6e61 6d65 5f6d 6170 3a20 4469  del_name_map: Di
-000009b0: 6374 5b55 6e69 6f6e 5b54 7970 655b 4261  ct[Union[Type[Ba
-000009c0: 7365 4d6f 6465 6c5d 2c20 5479 7065 5b45  seModel], Type[E
-000009d0: 6e75 6d5d 5d2c 2073 7472 5d2c 0a29 202d  num]], str],.) -
-000009e0: 3e20 4469 6374 5b73 7472 2c20 416e 795d  > Dict[str, Any]
-000009f0: 3a0a 2020 2020 6465 6669 6e69 7469 6f6e  :.    definition
-00000a00: 733a 2044 6963 745b 7374 722c 2044 6963  s: Dict[str, Dic
-00000a10: 745b 7374 722c 2041 6e79 5d5d 203d 207b  t[str, Any]] = {
-00000a20: 7d0a 2020 2020 666f 7220 6d6f 6465 6c20  }.    for model 
-00000a30: 696e 2066 6c61 745f 6d6f 6465 6c73 3a0a  in flat_models:.
-00000a40: 2020 2020 2020 2020 6d5f 7363 6865 6d61          m_schema
-00000a50: 2c20 6d5f 6465 6669 6e69 7469 6f6e 732c  , m_definitions,
-00000a60: 206d 5f6e 6573 7465 645f 6d6f 6465 6c73   m_nested_models
-00000a70: 203d 206d 6f64 656c 5f70 726f 6365 7373   = model_process
-00000a80: 5f73 6368 656d 6128 0a20 2020 2020 2020  _schema(.       
-00000a90: 2020 2020 206d 6f64 656c 2c20 6d6f 6465       model, mode
-00000aa0: 6c5f 6e61 6d65 5f6d 6170 3d6d 6f64 656c  l_name_map=model
-00000ab0: 5f6e 616d 655f 6d61 702c 2072 6566 5f70  _name_map, ref_p
-00000ac0: 7265 6669 783d 5245 465f 5052 4546 4958  refix=REF_PREFIX
-00000ad0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-00000ae0: 2020 2064 6566 696e 6974 696f 6e73 2e75     definitions.u
-00000af0: 7064 6174 6528 6d5f 6465 6669 6e69 7469  pdate(m_definiti
-00000b00: 6f6e 7329 0a20 2020 2020 2020 206d 6f64  ons).        mod
-00000b10: 656c 5f6e 616d 6520 3d20 6d6f 6465 6c5f  el_name = model_
-00000b20: 6e61 6d65 5f6d 6170 5b6d 6f64 656c 5d0a  name_map[model].
-00000b30: 2020 2020 2020 2020 6966 2022 6465 7363          if "desc
-00000b40: 7269 7074 696f 6e22 2069 6e20 6d5f 7363  ription" in m_sc
-00000b50: 6865 6d61 3a0a 2020 2020 2020 2020 2020  hema:.          
-00000b60: 2020 6d5f 7363 6865 6d61 5b22 6465 7363    m_schema["desc
-00000b70: 7269 7074 696f 6e22 5d20 3d20 6d5f 7363  ription"] = m_sc
-00000b80: 6865 6d61 5b22 6465 7363 7269 7074 696f  hema["descriptio
-00000b90: 6e22 5d2e 7370 6c69 7428 225c 6622 295b  n"].split("\f")[
-00000ba0: 305d 0a20 2020 2020 2020 2064 6566 696e  0].        defin
-00000bb0: 6974 696f 6e73 5b6d 6f64 656c 5f6e 616d  itions[model_nam
-00000bc0: 655d 203d 206d 5f73 6368 656d 610a 2020  e] = m_schema.  
-00000bd0: 2020 7265 7475 726e 2064 6566 696e 6974    return definit
-00000be0: 696f 6e73 0a0a 0a64 6566 2067 6574 5f73  ions...def get_s
-00000bf0: 7761 6767 6572 325f 7365 6375 7269 7479  wagger2_security
-00000c00: 5f64 6566 696e 6974 696f 6e73 280a 2020  _definitions(.  
-00000c10: 2020 666c 6174 5f64 6570 656e 6461 6e74    flat_dependant
-00000c20: 3a20 4465 7065 6e64 616e 742c 0a29 202d  : Dependant,.) -
-00000c30: 3e20 5475 706c 655b 4469 6374 5b73 7472  > Tuple[Dict[str
-00000c40: 2c20 416e 795d 2c20 4c69 7374 5b44 6963  , Any], List[Dic
-00000c50: 745b 7374 722c 2041 6e79 5d5d 5d3a 0a20  t[str, Any]]]:. 
-00000c60: 2020 2064 6566 205f 6d61 705f 6f61 7574     def _map_oaut
-00000c70: 6832 5f66 6c6f 7728 666c 6f77 5f6b 6579  h2_flow(flow_key
-00000c80: 3a20 7374 722c 2066 6c6f 773a 2044 6963  : str, flow: Dic
-00000c90: 745b 7374 722c 2041 6e79 5d29 202d 3e20  t[str, Any]) -> 
-00000ca0: 4469 6374 5b73 7472 2c20 416e 795d 3a0a  Dict[str, Any]:.
-00000cb0: 2020 2020 2020 2020 7365 6375 7269 7479          security
-00000cc0: 5f64 6566 696e 6974 696f 6e20 3d20 7b0a  _definition = {.
-00000cd0: 2020 2020 2020 2020 2020 2020 2274 7970              "typ
-00000ce0: 6522 3a20 226f 6175 7468 3222 2c0a 2020  e": "oauth2",.  
-00000cf0: 2020 2020 2020 2020 2020 2266 6c6f 7722            "flow"
-00000d00: 3a20 666c 6f77 5f6b 6579 2c0a 2020 2020  : flow_key,.    
-00000d10: 2020 2020 2020 2020 2273 636f 7065 7322          "scopes"
-00000d20: 3a20 666c 6f77 5b22 7363 6f70 6573 225d  : flow["scopes"]
-00000d30: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
-00000d40: 2020 2020 6966 2022 6175 7468 6f72 697a      if "authoriz
-00000d50: 6174 696f 6e55 726c 2220 696e 2066 6c6f  ationUrl" in flo
-00000d60: 773a 0a20 2020 2020 2020 2020 2020 2073  w:.            s
-00000d70: 6563 7572 6974 795f 6465 6669 6e69 7469  ecurity_definiti
-00000d80: 6f6e 2e75 7064 6174 6528 7b22 6175 7468  on.update({"auth
-00000d90: 6f72 697a 6174 696f 6e55 726c 223a 2066  orizationUrl": f
-00000da0: 6c6f 775b 2261 7574 686f 7269 7a61 7469  low["authorizati
-00000db0: 6f6e 5572 6c22 5d7d 290a 2020 2020 2020  onUrl"]}).      
-00000dc0: 2020 6966 2022 746f 6b65 6e55 726c 2220    if "tokenUrl" 
-00000dd0: 696e 2066 6c6f 773a 0a20 2020 2020 2020  in flow:.       
-00000de0: 2020 2020 2073 6563 7572 6974 795f 6465       security_de
-00000df0: 6669 6e69 7469 6f6e 2e75 7064 6174 6528  finition.update(
-00000e00: 7b22 746f 6b65 6e55 726c 223a 2066 6c6f  {"tokenUrl": flo
-00000e10: 775b 2274 6f6b 656e 5572 6c22 5d7d 290a  w["tokenUrl"]}).
-00000e20: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00000e30: 7365 6375 7269 7479 5f64 6566 696e 6974  security_definit
-00000e40: 696f 6e0a 0a20 2020 206f 6175 7468 325f  ion..    oauth2_
-00000e50: 666c 6f77 735f 6b65 7973 5f6d 6170 203d  flows_keys_map =
-00000e60: 207b 0a20 2020 2020 2020 2022 696d 706c   {.        "impl
-00000e70: 6963 6974 223a 2022 696d 706c 6963 6974  icit": "implicit
-00000e80: 222c 0a20 2020 2020 2020 2022 7061 7373  ",.        "pass
-00000e90: 776f 7264 223a 2022 7061 7373 776f 7264  word": "password
-00000ea0: 222c 0a20 2020 2020 2020 2022 636c 6965  ",.        "clie
-00000eb0: 6e74 4372 6564 656e 7469 616c 7322 3a20  ntCredentials": 
-00000ec0: 2261 7070 6c69 6361 7469 6f6e 222c 0a20  "application",. 
-00000ed0: 2020 2020 2020 2022 6175 7468 6f72 697a         "authoriz
-00000ee0: 6174 696f 6e43 6f64 6522 3a20 2261 6363  ationCode": "acc
-00000ef0: 6573 7343 6f64 6522 2c0a 2020 2020 7d0a  essCode",.    }.
-00000f00: 2020 2020 7365 6375 7269 7479 5f64 6566      security_def
-00000f10: 696e 6974 696f 6e73 203d 207b 7d0a 2020  initions = {}.  
-00000f20: 2020 6f70 6572 6174 696f 6e5f 7365 6375    operation_secu
-00000f30: 7269 7479 203d 205b 5d0a 2020 2020 666f  rity = [].    fo
-00000f40: 7220 7365 6375 7269 7479 5f72 6571 7569  r security_requi
-00000f50: 7265 6d65 6e74 2069 6e20 666c 6174 5f64  rement in flat_d
-00000f60: 6570 656e 6461 6e74 2e73 6563 7572 6974  ependant.securit
-00000f70: 795f 7265 7175 6972 656d 656e 7473 3a0a  y_requirements:.
-00000f80: 2020 2020 2020 2020 2320 6661 7374 6170          # fastap
-00000f90: 692e 7365 6375 7269 7479 2e2a 2077 6869  i.security.* whi
-00000fa0: 6368 2067 6574 7320 6d6f 6465 6c20 6672  ch gets model fr
-00000fb0: 6f6d 2066 6173 7461 7069 2e6f 7065 6e61  om fastapi.opena
-00000fc0: 7069 2e6d 6f64 656c 730a 2020 2020 2020  pi.models.      
-00000fd0: 2020 7365 6375 7269 7479 5f64 6566 696e    security_defin
-00000fe0: 6974 696f 6e20 3d20 6a73 6f6e 6162 6c65  ition = jsonable
-00000ff0: 5f65 6e63 6f64 6572 280a 2020 2020 2020  _encoder(.      
-00001000: 2020 2020 2020 7365 6375 7269 7479 5f72        security_r
-00001010: 6571 7569 7265 6d65 6e74 2e73 6563 7572  equirement.secur
-00001020: 6974 795f 7363 6865 6d65 2e6d 6f64 656c  ity_scheme.model
-00001030: 2c0a 2020 2020 2020 2020 2020 2020 6279  ,.            by
-00001040: 5f61 6c69 6173 3d54 7275 652c 0a20 2020  _alias=True,.   
-00001050: 2020 2020 2020 2020 2065 7863 6c75 6465           exclude
-00001060: 5f6e 6f6e 653d 5472 7565 2c0a 2020 2020  _none=True,.    
-00001070: 2020 2020 290a 2020 2020 2020 2020 6966      ).        if
-00001080: 2073 6563 7572 6974 795f 6465 6669 6e69   security_defini
-00001090: 7469 6f6e 5b22 7479 7065 225d 203d 3d20  tion["type"] == 
-000010a0: 2268 7474 7022 3a0a 2020 2020 2020 2020  "http":.        
-000010b0: 2020 2020 6966 2073 6563 7572 6974 795f      if security_
-000010c0: 6465 6669 6e69 7469 6f6e 2e67 6574 2822  definition.get("
-000010d0: 7363 6865 6d65 222c 2022 6261 7369 6322  scheme", "basic"
-000010e0: 2920 3d3d 2022 6261 7369 6322 3a0a 2020  ) == "basic":.  
-000010f0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00001100: 6375 7269 7479 5f64 6566 696e 6974 696f  curity_definitio
-00001110: 6e20 3d20 7b22 7479 7065 223a 2022 6261  n = {"type": "ba
-00001120: 7369 6322 7d0a 2020 2020 2020 2020 2020  sic"}.          
-00001130: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00001140: 2020 2020 2020 2020 6c6f 6767 6572 2e77          logger.w
-00001150: 6172 6e69 6e67 280a 2020 2020 2020 2020  arning(.        
-00001160: 2020 2020 2020 2020 2020 2020 6622 6661              f"fa
-00001170: 7374 6170 695f 7377 6167 6765 7232 3a20  stapi_swagger2: 
-00001180: 556e 6162 6c65 2074 6f20 6861 6e64 6c65  Unable to handle
-00001190: 2073 6563 7572 6974 795f 6465 6669 6e69   security_defini
-000011a0: 7469 6f6e 3a20 7b73 6563 7572 6974 795f  tion: {security_
-000011b0: 6465 6669 6e69 7469 6f6e 7d22 0a20 2020  definition}".   
-000011c0: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
-000011d0: 2020 2020 2020 2065 6c69 6620 7365 6375         elif secu
-000011e0: 7269 7479 5f64 6566 696e 6974 696f 6e5b  rity_definition[
-000011f0: 2274 7970 6522 5d20 3d3d 2022 6170 694b  "type"] == "apiK
-00001200: 6579 223a 0a20 2020 2020 2020 2020 2020  ey":.           
-00001210: 2070 6173 730a 2020 2020 2020 2020 656c   pass.        el
-00001220: 6966 2073 6563 7572 6974 795f 6465 6669  if security_defi
-00001230: 6e69 7469 6f6e 5b22 7479 7065 225d 203d  nition["type"] =
-00001240: 3d20 226f 6175 7468 3222 3a0a 2020 2020  = "oauth2":.    
-00001250: 2020 2020 2020 2020 5f73 6563 7572 6974          _securit
-00001260: 795f 6465 6669 6e69 7469 6f6e 203d 2073  y_definition = s
-00001270: 6563 7572 6974 795f 6465 6669 6e69 7469  ecurity_definiti
-00001280: 6f6e 0a20 2020 2020 2020 2020 2020 2066  on.            f
-00001290: 6c6f 7773 203d 2073 6563 7572 6974 795f  lows = security_
-000012a0: 6465 6669 6e69 7469 6f6e 5b22 666c 6f77  definition["flow
-000012b0: 7322 5d0a 2020 2020 2020 2020 2020 2020  s"].            
-000012c0: 666c 6f77 735f 6b65 7973 203d 206c 6973  flows_keys = lis
-000012d0: 7428 666c 6f77 732e 6b65 7973 2829 290a  t(flows.keys()).
-000012e0: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-000012f0: 656e 2866 6c6f 7773 5f6b 6579 7329 203e  en(flows_keys) >
-00001300: 3d20 313a 0a20 2020 2020 2020 2020 2020  = 1:.           
-00001310: 2020 2020 2066 6c6f 775f 6b65 795f 3320       flow_key_3 
-00001320: 3d20 666c 6f77 735f 6b65 7973 5b30 5d0a  = flows_keys[0].
-00001330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001340: 666c 6f77 203d 2066 6c6f 7773 5b66 6c6f  flow = flows[flo
-00001350: 775f 6b65 795f 335d 0a20 2020 2020 2020  w_key_3].       
-00001360: 2020 2020 2020 2020 2073 6563 7572 6974           securit
-00001370: 795f 6465 6669 6e69 7469 6f6e 203d 205f  y_definition = _
-00001380: 6d61 705f 6f61 7574 6832 5f66 6c6f 7728  map_oauth2_flow(
-00001390: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000013a0: 2020 2020 206f 6175 7468 325f 666c 6f77       oauth2_flow
-000013b0: 735f 6b65 7973 5f6d 6170 5b66 6c6f 775f  s_keys_map[flow_
-000013c0: 6b65 795f 335d 2c20 666c 6f77 0a20 2020  key_3], flow.   
-000013d0: 2020 2020 2020 2020 2020 2020 2029 0a0a               )..
-000013e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000013f0: 666f 7220 6920 696e 2072 616e 6765 2831  for i in range(1
-00001400: 2c20 6c65 6e28 666c 6f77 735f 6b65 7973  , len(flows_keys
-00001410: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
-00001420: 2020 2020 2020 2020 666c 6f77 5f6b 6579          flow_key
-00001430: 5f33 203d 2066 6c6f 7773 5f6b 6579 735b  _3 = flows_keys[
-00001440: 695d 0a20 2020 2020 2020 2020 2020 2020  i].             
-00001450: 2020 2020 2020 2066 6c6f 7720 3d20 666c         flow = fl
-00001460: 6f77 735b 666c 6f77 5f6b 6579 5f33 5d0a  ows[flow_key_3].
-00001470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001480: 2020 2020 666c 6f77 5f6b 6579 5f32 203d      flow_key_2 =
-00001490: 206f 6175 7468 325f 666c 6f77 735f 6b65   oauth2_flows_ke
-000014a0: 7973 5f6d 6170 5b66 6c6f 775f 6b65 795f  ys_map[flow_key_
-000014b0: 335d 0a20 2020 2020 2020 2020 2020 2020  3].             
-000014c0: 2020 2020 2020 2073 6563 7572 6974 795f         security_
-000014d0: 6465 6669 6e69 7469 6f6e 5f31 203d 205f  definition_1 = _
-000014e0: 6d61 705f 6f61 7574 6832 5f66 6c6f 7728  map_oauth2_flow(
-000014f0: 666c 6f77 5f6b 6579 5f32 2c20 666c 6f77  flow_key_2, flow
-00001500: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00001510: 2020 2020 2020 7365 6375 7269 7479 5f6e        security_n
-00001520: 616d 6520 3d20 7365 6375 7269 7479 5f72  ame = security_r
-00001530: 6571 7569 7265 6d65 6e74 2e73 6563 7572  equirement.secur
-00001540: 6974 795f 7363 6865 6d65 2e73 6368 656d  ity_scheme.schem
-00001550: 655f 6e61 6d65 0a20 2020 2020 2020 2020  e_name.         
-00001560: 2020 2020 2020 2020 2020 205f 7365 6375             _secu
-00001570: 7269 7479 5f6e 616d 6520 3d20 7365 6375  rity_name = secu
-00001580: 7269 7479 5f6e 616d 6520 2b20 225f 2220  rity_name + "_" 
-00001590: 2b20 666c 6f77 5f6b 6579 5f32 0a20 2020  + flow_key_2.   
-000015a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000015b0: 2073 6563 7572 6974 795f 6465 6669 6e69   security_defini
-000015c0: 7469 6f6e 735b 5f73 6563 7572 6974 795f  tions[_security_
-000015d0: 6e61 6d65 5d20 3d20 7365 6375 7269 7479  name] = security
-000015e0: 5f64 6566 696e 6974 696f 6e5f 310a 2020  _definition_1.  
-000015f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001600: 2020 6f70 6572 6174 696f 6e5f 7365 6375    operation_secu
-00001610: 7269 7479 2e61 7070 656e 6428 0a20 2020  rity.append(.   
-00001620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001630: 2020 2020 207b 5f73 6563 7572 6974 795f       {_security_
-00001640: 6e61 6d65 3a20 7365 6375 7269 7479 5f72  name: security_r
-00001650: 6571 7569 7265 6d65 6e74 2e73 636f 7065  equirement.scope
-00001660: 737d 0a20 2020 2020 2020 2020 2020 2020  s}.             
-00001670: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00001680: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00001690: 2020 206c 6f67 6765 722e 7761 726e 696e     logger.warnin
-000016a0: 6728 0a20 2020 2020 2020 2020 2020 2020  g(.             
-000016b0: 2020 2066 2266 6173 7461 7069 5f73 7761     f"fastapi_swa
-000016c0: 6767 6572 323a 2055 6e61 626c 6520 746f  gger2: Unable to
-000016d0: 2068 616e 646c 6520 7365 6375 7269 7479   handle security
-000016e0: 5f64 6566 696e 6974 696f 6e3a 207b 7365  _definition: {se
-000016f0: 6375 7269 7479 5f64 6566 696e 6974 696f  curity_definitio
-00001700: 6e7d 220a 2020 2020 2020 2020 2020 2020  n}".            
-00001710: 290a 2020 2020 2020 2020 7365 6375 7269  ).        securi
-00001720: 7479 5f6e 616d 6520 3d20 7365 6375 7269  ty_name = securi
-00001730: 7479 5f72 6571 7569 7265 6d65 6e74 2e73  ty_requirement.s
-00001740: 6563 7572 6974 795f 7363 6865 6d65 2e73  ecurity_scheme.s
-00001750: 6368 656d 655f 6e61 6d65 0a20 2020 2020  cheme_name.     
-00001760: 2020 2073 6563 7572 6974 795f 6465 6669     security_defi
-00001770: 6e69 7469 6f6e 735b 7365 6375 7269 7479  nitions[security
-00001780: 5f6e 616d 655d 203d 2073 6563 7572 6974  _name] = securit
-00001790: 795f 6465 6669 6e69 7469 6f6e 0a20 2020  y_definition.   
-000017a0: 2020 2020 206f 7065 7261 7469 6f6e 5f73       operation_s
-000017b0: 6563 7572 6974 792e 6170 7065 6e64 287b  ecurity.append({
-000017c0: 7365 6375 7269 7479 5f6e 616d 653a 2073  security_name: s
-000017d0: 6563 7572 6974 795f 7265 7175 6972 656d  ecurity_requirem
-000017e0: 656e 742e 7363 6f70 6573 7d29 0a20 2020  ent.scopes}).   
-000017f0: 2072 6574 7572 6e20 7365 6375 7269 7479   return security
-00001800: 5f64 6566 696e 6974 696f 6e73 2c20 6f70  _definitions, op
-00001810: 6572 6174 696f 6e5f 7365 6375 7269 7479  eration_security
-00001820: 0a0a 0a64 6566 2067 6574 5f73 7761 6767  ...def get_swagg
-00001830: 6572 325f 6f70 6572 6174 696f 6e5f 7061  er2_operation_pa
-00001840: 7261 6d65 7465 7273 280a 2020 2020 2a2c  rameters(.    *,
-00001850: 0a20 2020 2061 6c6c 5f72 6f75 7465 5f70  .    all_route_p
-00001860: 6172 616d 733a 2053 6571 7565 6e63 655b  arams: Sequence[
-00001870: 4d6f 6465 6c46 6965 6c64 5d2c 0a20 2020  ModelField],.   
-00001880: 206d 6f64 656c 5f6e 616d 655f 6d61 703a   model_name_map:
-00001890: 2044 6963 745b 556e 696f 6e5b 5479 7065   Dict[Union[Type
-000018a0: 5b42 6173 654d 6f64 656c 5d2c 2054 7970  [BaseModel], Typ
-000018b0: 655b 456e 756d 5d5d 2c20 7374 725d 2c0a  e[Enum]], str],.
-000018c0: 2920 2d3e 204c 6973 745b 4469 6374 5b73  ) -> List[Dict[s
-000018d0: 7472 2c20 416e 795d 5d3a 0a20 2020 2070  tr, Any]]:.    p
-000018e0: 6172 616d 6574 6572 7320 3d20 5b5d 0a20  arameters = []. 
-000018f0: 2020 2066 6f72 2070 6172 616d 2069 6e20     for param in 
-00001900: 616c 6c5f 726f 7574 655f 7061 7261 6d73  all_route_params
-00001910: 3a0a 2020 2020 2020 2020 6669 656c 645f  :.        field_
-00001920: 696e 666f 203d 2070 6172 616d 2e66 6965  info = param.fie
-00001930: 6c64 5f69 6e66 6f0a 2020 2020 2020 2020  ld_info.        
-00001940: 6669 656c 645f 696e 666f 203d 2063 6173  field_info = cas
-00001950: 7428 5061 7261 6d2c 2066 6965 6c64 5f69  t(Param, field_i
-00001960: 6e66 6f29 0a20 2020 2020 2020 2069 6620  nfo).        if 
-00001970: 6e6f 7420 6669 656c 645f 696e 666f 2e69  not field_info.i
-00001980: 6e63 6c75 6465 5f69 6e5f 7363 6865 6d61  nclude_in_schema
-00001990: 3a0a 2020 2020 2020 2020 2020 2020 636f  :.            co
-000019a0: 6e74 696e 7565 0a20 2020 2020 2020 2070  ntinue.        p
-000019b0: 6172 616d 6574 6572 3a20 4469 6374 5b73  arameter: Dict[s
-000019c0: 7472 2c20 416e 795d 203d 207b 0a20 2020  tr, Any] = {.   
-000019d0: 2020 2020 2020 2020 2022 6e61 6d65 223a           "name":
-000019e0: 2070 6172 616d 2e61 6c69 6173 2c0a 2020   param.alias,.  
-000019f0: 2020 2020 2020 2020 2020 2269 6e22 3a20            "in": 
-00001a00: 6669 656c 645f 696e 666f 2e69 6e5f 2e76  field_info.in_.v
-00001a10: 616c 7565 2c0a 2020 2020 2020 2020 2020  alue,.          
-00001a20: 2020 2272 6571 7569 7265 6422 3a20 7061    "required": pa
-00001a30: 7261 6d2e 7265 7175 6972 6564 2c0a 2020  ram.required,.  
-00001a40: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-00001a50: 7363 6865 6d61 3a20 4469 6374 5b73 7472  schema: Dict[str
-00001a60: 2c20 416e 795d 203d 2066 6965 6c64 5f73  , Any] = field_s
-00001a70: 6368 656d 6128 0a20 2020 2020 2020 2020  chema(.         
-00001a80: 2020 2070 6172 616d 2c20 6d6f 6465 6c5f     param, model_
-00001a90: 6e61 6d65 5f6d 6170 3d6d 6f64 656c 5f6e  name_map=model_n
-00001aa0: 616d 655f 6d61 702c 2072 6566 5f70 7265  ame_map, ref_pre
-00001ab0: 6669 783d 5245 465f 5052 4546 4958 0a20  fix=REF_PREFIX. 
-00001ac0: 2020 2020 2020 2029 5b30 5d0a 2020 2020         )[0].    
-00001ad0: 2020 2020 6966 2066 6965 6c64 5f69 6e66      if field_inf
-00001ae0: 6f2e 696e 5f2e 7661 6c75 6520 3d3d 2022  o.in_.value == "
-00001af0: 626f 6479 223a 0a20 2020 2020 2020 2020  body":.         
-00001b00: 2020 2070 6172 616d 6574 6572 5b22 7363     parameter["sc
-00001b10: 6865 6d61 225d 203d 2073 6368 656d 610a  hema"] = schema.
-00001b20: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00001b30: 2020 2020 2020 2020 2020 7061 7261 6d65            parame
-00001b40: 7465 722e 7570 6461 7465 287b 6b3a 2076  ter.update({k: v
-00001b50: 2066 6f72 2028 6b2c 2076 2920 696e 2073   for (k, v) in s
-00001b60: 6368 656d 612e 6974 656d 7328 2920 6966  chema.items() if
-00001b70: 206b 2021 3d20 2274 6974 6c65 227d 290a   k != "title"}).
-00001b80: 2020 2020 2020 2020 6966 2066 6965 6c64          if field
-00001b90: 5f69 6e66 6f2e 6465 7363 7269 7074 696f  _info.descriptio
-00001ba0: 6e3a 0a20 2020 2020 2020 2020 2020 2070  n:.            p
-00001bb0: 6172 616d 6574 6572 5b22 6465 7363 7269  arameter["descri
-00001bc0: 7074 696f 6e22 5d20 3d20 6669 656c 645f  ption"] = field_
-00001bd0: 696e 666f 2e64 6573 6372 6970 7469 6f6e  info.description
-00001be0: 0a20 2020 2020 2020 2069 6620 6669 656c  .        if fiel
-00001bf0: 645f 696e 666f 2e65 7861 6d70 6c65 733a  d_info.examples:
-00001c00: 0a20 2020 2020 2020 2020 2020 2070 6172  .            par
-00001c10: 616d 6574 6572 5b22 6578 616d 706c 6573  ameter["examples
-00001c20: 225d 203d 206a 736f 6e61 626c 655f 656e  "] = jsonable_en
-00001c30: 636f 6465 7228 6669 656c 645f 696e 666f  coder(field_info
-00001c40: 2e65 7861 6d70 6c65 7329 0a20 2020 2020  .examples).     
-00001c50: 2020 2065 6c69 6620 6669 656c 645f 696e     elif field_in
-00001c60: 666f 2e65 7861 6d70 6c65 2021 3d20 556e  fo.example != Un
-00001c70: 6465 6669 6e65 643a 0a20 2020 2020 2020  defined:.       
-00001c80: 2020 2020 2070 6172 616d 6574 6572 5b22       parameter["
-00001c90: 6578 616d 706c 6522 5d20 3d20 6a73 6f6e  example"] = json
-00001ca0: 6162 6c65 5f65 6e63 6f64 6572 2866 6965  able_encoder(fie
-00001cb0: 6c64 5f69 6e66 6f2e 6578 616d 706c 6529  ld_info.example)
-00001cc0: 0a20 2020 2020 2020 2069 6620 6669 656c  .        if fiel
-00001cd0: 645f 696e 666f 2e64 6570 7265 6361 7465  d_info.deprecate
-00001ce0: 643a 0a20 2020 2020 2020 2020 2020 2070  d:.            p
-00001cf0: 6172 616d 6574 6572 5b22 6465 7072 6563  arameter["deprec
-00001d00: 6174 6564 225d 203d 2066 6965 6c64 5f69  ated"] = field_i
-00001d10: 6e66 6f2e 6465 7072 6563 6174 6564 0a20  nfo.deprecated. 
-00001d20: 2020 2020 2020 2070 6172 616d 6574 6572         parameter
-00001d30: 732e 6170 7065 6e64 2870 6172 616d 6574  s.append(paramet
-00001d40: 6572 290a 2020 2020 7265 7475 726e 2070  er).    return p
-00001d50: 6172 616d 6574 6572 730a 0a0a 6465 6620  arameters...def 
-00001d60: 6765 745f 7377 6167 6765 7232 5f6f 7065  get_swagger2_ope
-00001d70: 7261 7469 6f6e 5f72 6571 7565 7374 5f62  ration_request_b
-00001d80: 6f64 7928 0a20 2020 202a 2c0a 2020 2020  ody(.    *,.    
-00001d90: 626f 6479 5f66 6965 6c64 3a20 4f70 7469  body_field: Opti
-00001da0: 6f6e 616c 5b4d 6f64 656c 4669 656c 645d  onal[ModelField]
-00001db0: 2c0a 2020 2020 6d6f 6465 6c5f 6e61 6d65  ,.    model_name
-00001dc0: 5f6d 6170 3a20 4469 6374 5b55 6e69 6f6e  _map: Dict[Union
-00001dd0: 5b54 7970 655b 4261 7365 4d6f 6465 6c5d  [Type[BaseModel]
-00001de0: 2c20 5479 7065 5b45 6e75 6d5d 5d2c 2073  , Type[Enum]], s
-00001df0: 7472 5d2c 0a29 202d 3e20 4f70 7469 6f6e  tr],.) -> Option
-00001e00: 616c 5b44 6963 745b 7374 722c 2041 6e79  al[Dict[str, Any
-00001e10: 5d5d 3a0a 2020 2020 6966 206e 6f74 2062  ]]:.    if not b
-00001e20: 6f64 795f 6669 656c 643a 0a20 2020 2020  ody_field:.     
-00001e30: 2020 2072 6574 7572 6e20 4e6f 6e65 0a20     return None. 
-00001e40: 2020 2061 7373 6572 7420 6973 696e 7374     assert isinst
-00001e50: 616e 6365 2862 6f64 795f 6669 656c 642c  ance(body_field,
-00001e60: 204d 6f64 656c 4669 656c 6429 0a20 2020   ModelField).   
-00001e70: 2062 6f64 795f 7363 6865 6d61 2c20 5f2c   body_schema, _,
-00001e80: 205f 203d 2066 6965 6c64 5f73 6368 656d   _ = field_schem
-00001e90: 6128 0a20 2020 2020 2020 2062 6f64 795f  a(.        body_
-00001ea0: 6669 656c 642c 206d 6f64 656c 5f6e 616d  field, model_nam
-00001eb0: 655f 6d61 703d 6d6f 6465 6c5f 6e61 6d65  e_map=model_name
-00001ec0: 5f6d 6170 2c20 7265 665f 7072 6566 6978  _map, ref_prefix
-00001ed0: 3d52 4546 5f50 5245 4649 580a 2020 2020  =REF_PREFIX.    
-00001ee0: 290a 2020 2020 6669 656c 645f 696e 666f  ).    field_info
-00001ef0: 203d 2063 6173 7428 426f 6479 2c20 626f   = cast(Body, bo
-00001f00: 6479 5f66 6965 6c64 2e66 6965 6c64 5f69  dy_field.field_i
-00001f10: 6e66 6f29 0a20 2020 2023 2072 6571 7565  nfo).    # reque
-00001f20: 7374 5f6d 6564 6961 5f74 7970 6520 3d20  st_media_type = 
-00001f30: 6669 656c 645f 696e 666f 2e6d 6564 6961  field_info.media
-00001f40: 5f74 7970 650a 2020 2020 7265 7175 6972  _type.    requir
-00001f50: 6564 203d 2062 6f64 795f 6669 656c 642e  ed = body_field.
-00001f60: 7265 7175 6972 6564 0a20 2020 2072 6571  required.    req
-00001f70: 7565 7374 5f62 6f64 795f 6f61 693a 2044  uest_body_oai: D
-00001f80: 6963 745b 7374 722c 2041 6e79 5d20 3d20  ict[str, Any] = 
-00001f90: 7b7d 0a20 2020 2072 6571 7565 7374 5f62  {}.    request_b
-00001fa0: 6f64 795f 6f61 695b 226e 616d 6522 5d20  ody_oai["name"] 
-00001fb0: 3d20 626f 6479 5f66 6965 6c64 2e61 6c69  = body_field.ali
-00001fc0: 6173 0a20 2020 2072 6571 7565 7374 5f62  as.    request_b
-00001fd0: 6f64 795f 6f61 695b 2269 6e22 5d20 3d20  ody_oai["in"] = 
-00001fe0: 2262 6f64 7922 0a20 2020 2069 6620 7265  "body".    if re
-00001ff0: 7175 6972 6564 3a0a 2020 2020 2020 2020  quired:.        
-00002000: 7265 7175 6573 745f 626f 6479 5f6f 6169  request_body_oai
-00002010: 5b22 7265 7175 6972 6564 225d 203d 2072  ["required"] = r
-00002020: 6571 7569 7265 640a 0a20 2020 2072 6571  equired..    req
-00002030: 7565 7374 5f6d 6564 6961 5f63 6f6e 7465  uest_media_conte
-00002040: 6e74 3a20 4469 6374 5b73 7472 2c20 416e  nt: Dict[str, An
-00002050: 795d 203d 207b 2273 6368 656d 6122 3a20  y] = {"schema": 
-00002060: 626f 6479 5f73 6368 656d 617d 0a20 2020  body_schema}.   
-00002070: 2069 6620 6669 656c 645f 696e 666f 2e65   if field_info.e
-00002080: 7861 6d70 6c65 733a 0a20 2020 2020 2020  xamples:.       
-00002090: 2072 6571 7565 7374 5f6d 6564 6961 5f63   request_media_c
-000020a0: 6f6e 7465 6e74 5b22 6578 616d 706c 6573  ontent["examples
-000020b0: 225d 203d 206a 736f 6e61 626c 655f 656e  "] = jsonable_en
-000020c0: 636f 6465 7228 6669 656c 645f 696e 666f  coder(field_info
-000020d0: 2e65 7861 6d70 6c65 7329 0a20 2020 2065  .examples).    e
-000020e0: 6c69 6620 6669 656c 645f 696e 666f 2e65  lif field_info.e
-000020f0: 7861 6d70 6c65 2021 3d20 556e 6465 6669  xample != Undefi
-00002100: 6e65 643a 0a20 2020 2020 2020 2072 6571  ned:.        req
-00002110: 7565 7374 5f6d 6564 6961 5f63 6f6e 7465  uest_media_conte
-00002120: 6e74 5b22 6578 616d 706c 6522 5d20 3d20  nt["example"] = 
-00002130: 6a73 6f6e 6162 6c65 5f65 6e63 6f64 6572  jsonable_encoder
-00002140: 2866 6965 6c64 5f69 6e66 6f2e 6578 616d  (field_info.exam
-00002150: 706c 6529 0a20 2020 2023 2072 6571 7565  ple).    # reque
-00002160: 7374 5f62 6f64 795f 6f61 695b 2263 6f6e  st_body_oai["con
-00002170: 7465 6e74 225d 203d 207b 7265 7175 6573  tent"] = {reques
-00002180: 745f 6d65 6469 615f 7479 7065 3a20 7265  t_media_type: re
-00002190: 7175 6573 745f 6d65 6469 615f 636f 6e74  quest_media_cont
-000021a0: 656e 747d 0a20 2020 2072 6571 7565 7374  ent}.    request
-000021b0: 5f62 6f64 795f 6f61 692e 7570 6461 7465  _body_oai.update
-000021c0: 2872 6571 7565 7374 5f6d 6564 6961 5f63  (request_media_c
-000021d0: 6f6e 7465 6e74 290a 2020 2020 7265 7475  ontent).    retu
-000021e0: 726e 2072 6571 7565 7374 5f62 6f64 795f  rn request_body_
-000021f0: 6f61 690a 0a0a 6465 6620 6765 745f 7377  oai...def get_sw
-00002200: 6167 6765 7232 5f70 6174 6828 0a20 2020  agger2_path(.   
-00002210: 202a 2c20 726f 7574 653a 2072 6f75 7469   *, route: routi
-00002220: 6e67 2e41 5049 526f 7574 652c 206d 6f64  ng.APIRoute, mod
-00002230: 656c 5f6e 616d 655f 6d61 703a 2044 6963  el_name_map: Dic
-00002240: 745b 7479 7065 2c20 7374 725d 2c20 6f70  t[type, str], op
-00002250: 6572 6174 696f 6e5f 6964 733a 2053 6574  eration_ids: Set
-00002260: 5b73 7472 5d0a 2920 2d3e 2054 7570 6c65  [str].) -> Tuple
-00002270: 5b44 6963 745b 7374 722c 2041 6e79 5d2c  [Dict[str, Any],
-00002280: 2044 6963 745b 7374 722c 2041 6e79 5d2c   Dict[str, Any],
-00002290: 2044 6963 745b 7374 722c 2041 6e79 5d5d   Dict[str, Any]]
-000022a0: 3a0a 2020 2020 7061 7468 3a20 4469 6374  :.    path: Dict
-000022b0: 5b73 7472 2c20 416e 795d 203d 207b 7d0a  [str, Any] = {}.
-000022c0: 2020 2020 7365 6375 7269 7479 5f73 6368      security_sch
-000022d0: 656d 6573 3a20 4469 6374 5b73 7472 2c20  emes: Dict[str, 
-000022e0: 416e 795d 203d 207b 7d0a 2020 2020 6465  Any] = {}.    de
-000022f0: 6669 6e69 7469 6f6e 733a 2044 6963 745b  finitions: Dict[
-00002300: 7374 722c 2041 6e79 5d20 3d20 7b7d 0a20  str, Any] = {}. 
-00002310: 2020 2061 7373 6572 7420 726f 7574 652e     assert route.
-00002320: 6d65 7468 6f64 7320 6973 206e 6f74 204e  methods is not N
-00002330: 6f6e 652c 2022 4d65 7468 6f64 7320 6d75  one, "Methods mu
-00002340: 7374 2062 6520 6120 6c69 7374 220a 0a20  st be a list".. 
-00002350: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-00002360: 2872 6f75 7465 2e72 6573 706f 6e73 655f  (route.response_
-00002370: 636c 6173 732c 2044 6566 6175 6c74 506c  class, DefaultPl
-00002380: 6163 6568 6f6c 6465 7229 3a0a 2020 2020  aceholder):.    
-00002390: 2020 2020 6375 7272 656e 745f 7265 7370      current_resp
-000023a0: 6f6e 7365 5f63 6c61 7373 3a20 5479 7065  onse_class: Type
-000023b0: 5b52 6573 706f 6e73 655d 203d 2072 6f75  [Response] = rou
-000023c0: 7465 2e72 6573 706f 6e73 655f 636c 6173  te.response_clas
-000023d0: 732e 7661 6c75 650a 2020 2020 656c 7365  s.value.    else
-000023e0: 3a0a 2020 2020 2020 2020 6375 7272 656e  :.        curren
-000023f0: 745f 7265 7370 6f6e 7365 5f63 6c61 7373  t_response_class
-00002400: 203d 2072 6f75 7465 2e72 6573 706f 6e73   = route.respons
-00002410: 655f 636c 6173 730a 2020 2020 6173 7365  e_class.    asse
-00002420: 7274 2063 7572 7265 6e74 5f72 6573 706f  rt current_respo
-00002430: 6e73 655f 636c 6173 732c 2022 4120 7265  nse_class, "A re
-00002440: 7370 6f6e 7365 2063 6c61 7373 2069 7320  sponse class is 
-00002450: 6e65 6564 6564 2074 6f20 6765 6e65 7261  needed to genera
-00002460: 7465 2053 7761 6767 6572 220a 0a20 2020  te Swagger"..   
-00002470: 2072 6f75 7465 5f72 6573 706f 6e73 655f   route_response_
-00002480: 6d65 6469 615f 7479 7065 3a20 4f70 7469  media_type: Opti
-00002490: 6f6e 616c 5b73 7472 5d20 3d20 6375 7272  onal[str] = curr
-000024a0: 656e 745f 7265 7370 6f6e 7365 5f63 6c61  ent_response_cla
-000024b0: 7373 2e6d 6564 6961 5f74 7970 650a 2020  ss.media_type.  
-000024c0: 2020 6966 2072 6f75 7465 2e69 6e63 6c75    if route.inclu
-000024d0: 6465 5f69 6e5f 7363 6865 6d61 3a0a 2020  de_in_schema:.  
-000024e0: 2020 2020 2020 666f 7220 6d65 7468 6f64        for method
-000024f0: 2069 6e20 726f 7574 652e 6d65 7468 6f64   in route.method
-00002500: 733a 0a20 2020 2020 2020 2020 2020 206f  s:.            o
-00002510: 7065 7261 7469 6f6e 203d 2067 6574 5f6f  peration = get_o
-00002520: 7065 6e61 7069 5f6f 7065 7261 7469 6f6e  penapi_operation
-00002530: 5f6d 6574 6164 6174 6128 0a20 2020 2020  _metadata(.     
-00002540: 2020 2020 2020 2020 2020 2072 6f75 7465             route
-00002550: 3d72 6f75 7465 2c20 6d65 7468 6f64 3d6d  =route, method=m
-00002560: 6574 686f 642c 206f 7065 7261 7469 6f6e  ethod, operation
-00002570: 5f69 6473 3d6f 7065 7261 7469 6f6e 5f69  _ids=operation_i
-00002580: 6473 0a20 2020 2020 2020 2020 2020 2029  ds.            )
-00002590: 0a0a 2020 2020 2020 2020 2020 2020 7061  ..            pa
-000025a0: 7261 6d65 7465 7273 3a20 4c69 7374 5b44  rameters: List[D
-000025b0: 6963 745b 7374 722c 2041 6e79 5d5d 203d  ict[str, Any]] =
-000025c0: 205b 5d0a 2020 2020 2020 2020 2020 2020   [].            
-000025d0: 666c 6174 5f64 6570 656e 6461 6e74 203d  flat_dependant =
-000025e0: 2067 6574 5f66 6c61 745f 6465 7065 6e64   get_flat_depend
-000025f0: 616e 7428 726f 7574 652e 6465 7065 6e64  ant(route.depend
-00002600: 616e 742c 2073 6b69 705f 7265 7065 6174  ant, skip_repeat
-00002610: 733d 5472 7565 290a 2020 2020 2020 2020  s=True).        
-00002620: 2020 2020 280a 2020 2020 2020 2020 2020      (.          
-00002630: 2020 2020 2020 7365 6375 7269 7479 5f64        security_d
-00002640: 6566 696e 6974 696f 6e73 2c0a 2020 2020  efinitions,.    
-00002650: 2020 2020 2020 2020 2020 2020 6f70 6572              oper
-00002660: 6174 696f 6e5f 7365 6375 7269 7479 2c0a  ation_security,.
-00002670: 2020 2020 2020 2020 2020 2020 2920 3d20              ) = 
-00002680: 6765 745f 7377 6167 6765 7232 5f73 6563  get_swagger2_sec
-00002690: 7572 6974 795f 6465 6669 6e69 7469 6f6e  urity_definition
-000026a0: 7328 666c 6174 5f64 6570 656e 6461 6e74  s(flat_dependant
-000026b0: 3d66 6c61 745f 6465 7065 6e64 616e 7429  =flat_dependant)
-000026c0: 0a0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-000026d0: 206f 7065 7261 7469 6f6e 5f73 6563 7572   operation_secur
-000026e0: 6974 793a 0a20 2020 2020 2020 2020 2020  ity:.           
-000026f0: 2020 2020 206f 7065 7261 7469 6f6e 2e73       operation.s
-00002700: 6574 6465 6661 756c 7428 2273 6563 7572  etdefault("secur
-00002710: 6974 7922 2c20 5b5d 292e 6578 7465 6e64  ity", []).extend
-00002720: 286f 7065 7261 7469 6f6e 5f73 6563 7572  (operation_secur
-00002730: 6974 7929 0a0a 2020 2020 2020 2020 2020  ity)..          
-00002740: 2020 6966 2073 6563 7572 6974 795f 6465    if security_de
-00002750: 6669 6e69 7469 6f6e 733a 0a20 2020 2020  finitions:.     
-00002760: 2020 2020 2020 2020 2020 2073 6563 7572             secur
-00002770: 6974 795f 7363 6865 6d65 732e 7570 6461  ity_schemes.upda
-00002780: 7465 2873 6563 7572 6974 795f 6465 6669  te(security_defi
-00002790: 6e69 7469 6f6e 7329 0a0a 2020 2020 2020  nitions)..      
-000027a0: 2020 2020 2020 616c 6c5f 726f 7574 655f        all_route_
-000027b0: 7061 7261 6d73 203d 2067 6574 5f66 6c61  params = get_fla
-000027c0: 745f 7061 7261 6d73 2872 6f75 7465 2e64  t_params(route.d
-000027d0: 6570 656e 6461 6e74 290a 2020 2020 2020  ependant).      
-000027e0: 2020 2020 2020 6f70 6572 6174 696f 6e5f        operation_
-000027f0: 7061 7261 6d65 7465 7273 203d 2067 6574  parameters = get
-00002800: 5f73 7761 6767 6572 325f 6f70 6572 6174  _swagger2_operat
-00002810: 696f 6e5f 7061 7261 6d65 7465 7273 280a  ion_parameters(.
-00002820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002830: 616c 6c5f 726f 7574 655f 7061 7261 6d73  all_route_params
-00002840: 3d61 6c6c 5f72 6f75 7465 5f70 6172 616d  =all_route_param
-00002850: 732c 206d 6f64 656c 5f6e 616d 655f 6d61  s, model_name_ma
-00002860: 703d 6d6f 6465 6c5f 6e61 6d65 5f6d 6170  p=model_name_map
-00002870: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
-00002880: 2020 2020 2020 2020 2020 2070 6172 616d             param
-00002890: 6574 6572 732e 6578 7465 6e64 286f 7065  eters.extend(ope
-000028a0: 7261 7469 6f6e 5f70 6172 616d 6574 6572  ration_parameter
-000028b0: 7329 0a20 2020 2020 2020 2020 2020 2069  s).            i
-000028c0: 6620 7061 7261 6d65 7465 7273 3a0a 2020  f parameters:.  
-000028d0: 2020 2020 2020 2020 2020 2020 2020 616c                al
-000028e0: 6c5f 7061 7261 6d65 7465 7273 203d 207b  l_parameters = {
-000028f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002900: 2020 2020 2028 7061 7261 6d5b 2269 6e22       (param["in"
-00002910: 5d2c 2070 6172 616d 5b22 6e61 6d65 225d  ], param["name"]
-00002920: 293a 2070 6172 616d 2066 6f72 2070 6172  ): param for par
-00002930: 616d 2069 6e20 7061 7261 6d65 7465 7273  am in parameters
-00002940: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002950: 207d 0a20 2020 2020 2020 2020 2020 2020   }.             
-00002960: 2020 2072 6571 7569 7265 645f 7061 7261     required_para
-00002970: 6d65 7465 7273 203d 207b 0a20 2020 2020  meters = {.     
-00002980: 2020 2020 2020 2020 2020 2020 2020 2028                 (
-00002990: 7061 7261 6d5b 2269 6e22 5d2c 2070 6172  param["in"], par
-000029a0: 616d 5b22 6e61 6d65 225d 293a 2070 6172  am["name"]): par
-000029b0: 616d 0a20 2020 2020 2020 2020 2020 2020  am.             
-000029c0: 2020 2020 2020 2066 6f72 2070 6172 616d         for param
-000029d0: 2069 6e20 7061 7261 6d65 7465 7273 0a20   in parameters. 
-000029e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000029f0: 2020 2069 6620 7061 7261 6d2e 6765 7428     if param.get(
-00002a00: 2272 6571 7569 7265 6422 290a 2020 2020  "required").    
-00002a10: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
-00002a20: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00002a30: 4d61 6b65 2073 7572 6520 7265 7175 6972  Make sure requir
-00002a40: 6564 2064 6566 696e 6974 696f 6e73 206f  ed definitions o
-00002a50: 6620 7468 6520 7361 6d65 2070 6172 616d  f the same param
-00002a60: 6574 6572 2074 616b 6520 7072 6563 6564  eter take preced
-00002a70: 656e 6365 0a20 2020 2020 2020 2020 2020  ence.           
-00002a80: 2020 2020 2023 206f 7665 7220 6e6f 6e2d       # over non-
-00002a90: 7265 7175 6972 6564 2064 6566 696e 6974  required definit
-00002aa0: 696f 6e73 0a20 2020 2020 2020 2020 2020  ions.           
-00002ab0: 2020 2020 2061 6c6c 5f70 6172 616d 6574       all_paramet
-00002ac0: 6572 732e 7570 6461 7465 2872 6571 7569  ers.update(requi
-00002ad0: 7265 645f 7061 7261 6d65 7465 7273 290a  red_parameters).
-00002ae0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002af0: 2069 6620 6d65 7468 6f64 2069 6e20 4d45   if method in ME
-00002b00: 5448 4f44 535f 5749 5448 5f42 4f44 593a  THODS_WITH_BODY:
-00002b10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002b20: 2020 2020 2072 6571 7565 7374 5f62 6f64       request_bod
-00002b30: 795f 6f61 6920 3d20 6765 745f 7377 6167  y_oai = get_swag
-00002b40: 6765 7232 5f6f 7065 7261 7469 6f6e 5f72  ger2_operation_r
-00002b50: 6571 7565 7374 5f62 6f64 7928 0a20 2020  equest_body(.   
+00000000: 696d 706f 7274 2068 7474 702e 636c 6965  import http.clie
+00000010: 6e74 0a69 6d70 6f72 7420 696e 7370 6563  nt.import inspec
+00000020: 740a 6672 6f6d 2065 6e75 6d20 696d 706f  t.from enum impo
+00000030: 7274 2045 6e75 6d0a 6672 6f6d 2074 7970  rt Enum.from typ
+00000040: 696e 6720 696d 706f 7274 2041 6e79 2c20  ing import Any, 
+00000050: 4469 6374 2c20 4c69 7374 2c20 4f70 7469  Dict, List, Opti
+00000060: 6f6e 616c 2c20 5365 7175 656e 6365 2c20  onal, Sequence, 
+00000070: 5365 742c 2054 7570 6c65 2c20 5479 7065  Set, Tuple, Type
+00000080: 2c20 556e 696f 6e2c 2063 6173 740a 6672  , Union, cast.fr
+00000090: 6f6d 2075 726c 6c69 622e 7061 7273 6520  om urllib.parse 
+000000a0: 696d 706f 7274 2050 6172 7365 5265 7375  import ParseResu
+000000b0: 6c74 2c20 7572 6c70 6172 7365 0a0a 6672  lt, urlparse..fr
+000000c0: 6f6d 2066 6173 7461 7069 2069 6d70 6f72  om fastapi impor
+000000d0: 7420 726f 7574 696e 670a 6672 6f6d 2066  t routing.from f
+000000e0: 6173 7461 7069 2e64 6174 6173 7472 7563  astapi.datastruc
+000000f0: 7475 7265 7320 696d 706f 7274 2044 6566  tures import Def
+00000100: 6175 6c74 506c 6163 6568 6f6c 6465 720a  aultPlaceholder.
+00000110: 6672 6f6d 2066 6173 7461 7069 2e64 6570  from fastapi.dep
+00000120: 656e 6465 6e63 6965 732e 6d6f 6465 6c73  endencies.models
+00000130: 2069 6d70 6f72 7420 4465 7065 6e64 616e   import Dependan
+00000140: 740a 6672 6f6d 2066 6173 7461 7069 2e64  t.from fastapi.d
+00000150: 6570 656e 6465 6e63 6965 732e 7574 696c  ependencies.util
+00000160: 7320 696d 706f 7274 2067 6574 5f66 6c61  s import get_fla
+00000170: 745f 6465 7065 6e64 616e 742c 2067 6574  t_dependant, get
+00000180: 5f66 6c61 745f 7061 7261 6d73 0a66 726f  _flat_params.fro
+00000190: 6d20 6661 7374 6170 692e 656e 636f 6465  m fastapi.encode
+000001a0: 7273 2069 6d70 6f72 7420 6a73 6f6e 6162  rs import jsonab
+000001b0: 6c65 5f65 6e63 6f64 6572 0a66 726f 6d20  le_encoder.from 
+000001c0: 6661 7374 6170 692e 6c6f 6767 6572 2069  fastapi.logger i
+000001d0: 6d70 6f72 7420 6c6f 6767 6572 0a66 726f  mport logger.fro
+000001e0: 6d20 6661 7374 6170 692e 6f70 656e 6170  m fastapi.openap
+000001f0: 692e 636f 6e73 7461 6e74 7320 696d 706f  i.constants impo
+00000200: 7274 204d 4554 484f 4453 5f57 4954 485f  rt METHODS_WITH_
+00000210: 424f 4459 0a66 726f 6d20 6661 7374 6170  BODY.from fastap
+00000220: 692e 6f70 656e 6170 692e 7574 696c 7320  i.openapi.utils 
+00000230: 696d 706f 7274 2028 0a20 2020 2067 6574  import (.    get
+00000240: 5f66 6c61 745f 6d6f 6465 6c73 5f66 726f  _flat_models_fro
+00000250: 6d5f 726f 7574 6573 2c0a 2020 2020 6765  m_routes,.    ge
+00000260: 745f 6f70 656e 6170 695f 6f70 6572 6174  t_openapi_operat
+00000270: 696f 6e5f 6d65 7461 6461 7461 2c0a 2020  ion_metadata,.  
+00000280: 2020 7374 6174 7573 5f63 6f64 655f 7261    status_code_ra
+00000290: 6e67 6573 2c0a 290a 6672 6f6d 2066 6173  nges,.).from fas
+000002a0: 7461 7069 2e70 6172 616d 7320 696d 706f  tapi.params impo
+000002b0: 7274 2042 6f64 792c 2050 6172 616d 0a66  rt Body, Param.f
+000002c0: 726f 6d20 6661 7374 6170 692e 7265 7370  rom fastapi.resp
+000002d0: 6f6e 7365 7320 696d 706f 7274 2052 6573  onses import Res
+000002e0: 706f 6e73 650a 6672 6f6d 2066 6173 7461  ponse.from fasta
+000002f0: 7069 2e75 7469 6c73 2069 6d70 6f72 7420  pi.utils import 
+00000300: 6465 6570 5f64 6963 745f 7570 6461 7465  deep_dict_update
+00000310: 2c20 6973 5f62 6f64 795f 616c 6c6f 7765  , is_body_allowe
+00000320: 645f 666f 725f 7374 6174 7573 5f63 6f64  d_for_status_cod
+00000330: 650a 6672 6f6d 2070 7964 616e 7469 6320  e.from pydantic 
+00000340: 696d 706f 7274 2042 6173 654d 6f64 656c  import BaseModel
+00000350: 0a66 726f 6d20 7079 6461 6e74 6963 2e66  .from pydantic.f
+00000360: 6965 6c64 7320 696d 706f 7274 204d 6f64  ields import Mod
+00000370: 656c 4669 656c 642c 2055 6e64 6566 696e  elField, Undefin
+00000380: 6564 0a66 726f 6d20 7079 6461 6e74 6963  ed.from pydantic
+00000390: 2e73 6368 656d 6120 696d 706f 7274 2066  .schema import f
+000003a0: 6965 6c64 5f73 6368 656d 612c 2067 6574  ield_schema, get
+000003b0: 5f6d 6f64 656c 5f6e 616d 655f 6d61 702c  _model_name_map,
+000003c0: 206d 6f64 656c 5f70 726f 6365 7373 5f73   model_process_s
+000003d0: 6368 656d 610a 6672 6f6d 2070 7964 616e  chema.from pydan
+000003e0: 7469 632e 7574 696c 7320 696d 706f 7274  tic.utils import
+000003f0: 206c 656e 6965 6e74 5f69 7373 7562 636c   lenient_issubcl
+00000400: 6173 730a 6672 6f6d 2073 7461 726c 6574  ass.from starlet
+00000410: 7465 2e72 6573 706f 6e73 6573 2069 6d70  te.responses imp
+00000420: 6f72 7420 4a53 4f4e 5265 7370 6f6e 7365  ort JSONResponse
+00000430: 0a66 726f 6d20 7374 6172 6c65 7474 652e  .from starlette.
+00000440: 726f 7574 696e 6720 696d 706f 7274 2042  routing import B
+00000450: 6173 6552 6f75 7465 0a66 726f 6d20 7374  aseRoute.from st
+00000460: 6172 6c65 7474 652e 7374 6174 7573 2069  arlette.status i
+00000470: 6d70 6f72 7420 4854 5450 5f34 3232 5f55  mport HTTP_422_U
+00000480: 4e50 524f 4345 5353 4142 4c45 5f45 4e54  NPROCESSABLE_ENT
+00000490: 4954 590a 0a66 726f 6d20 6661 7374 6170  ITY..from fastap
+000004a0: 695f 7377 6167 6765 7232 2e63 6f6e 7374  i_swagger2.const
+000004b0: 616e 7473 2069 6d70 6f72 7420 5245 465f  ants import REF_
+000004c0: 5052 4546 4958 0a66 726f 6d20 6661 7374  PREFIX.from fast
+000004d0: 6170 695f 7377 6167 6765 7232 2e6d 6f64  api_swagger2.mod
+000004e0: 656c 7320 696d 706f 7274 2053 7761 6767  els import Swagg
+000004f0: 6572 320a 0a76 616c 6964 6174 696f 6e5f  er2..validation_
+00000500: 6572 726f 725f 6465 6669 6e69 7469 6f6e  error_definition
+00000510: 203d 207b 0a20 2020 2022 7469 746c 6522   = {.    "title"
+00000520: 3a20 2256 616c 6964 6174 696f 6e45 7272  : "ValidationErr
+00000530: 6f72 222c 0a20 2020 2022 7479 7065 223a  or",.    "type":
+00000540: 2022 6f62 6a65 6374 222c 0a20 2020 2022   "object",.    "
+00000550: 7072 6f70 6572 7469 6573 223a 207b 0a20  properties": {. 
+00000560: 2020 2020 2020 2022 6c6f 6322 3a20 7b0a         "loc": {.
+00000570: 2020 2020 2020 2020 2020 2020 2274 6974              "tit
+00000580: 6c65 223a 2022 4c6f 6361 7469 6f6e 222c  le": "Location",
+00000590: 0a20 2020 2020 2020 2020 2020 2022 7479  .            "ty
+000005a0: 7065 223a 2022 6172 7261 7922 2c0a 2020  pe": "array",.  
+000005b0: 2020 2020 2020 2020 2020 2269 7465 6d73            "items
+000005c0: 223a 207b 2274 7970 6522 3a20 2273 7472  ": {"type": "str
+000005d0: 696e 6722 7d2c 0a20 2020 2020 2020 207d  ing"},.        }
+000005e0: 2c0a 2020 2020 2020 2020 226d 7367 223a  ,.        "msg":
+000005f0: 207b 2274 6974 6c65 223a 2022 4d65 7373   {"title": "Mess
+00000600: 6167 6522 2c20 2274 7970 6522 3a20 2273  age", "type": "s
+00000610: 7472 696e 6722 7d2c 0a20 2020 2020 2020  tring"},.       
+00000620: 2022 7479 7065 223a 207b 2274 6974 6c65   "type": {"title
+00000630: 223a 2022 4572 726f 7220 5479 7065 222c  ": "Error Type",
+00000640: 2022 7479 7065 223a 2022 7374 7269 6e67   "type": "string
+00000650: 227d 2c0a 2020 2020 7d2c 0a20 2020 2022  "},.    },.    "
+00000660: 7265 7175 6972 6564 223a 205b 226c 6f63  required": ["loc
+00000670: 222c 2022 6d73 6722 2c20 2274 7970 6522  ", "msg", "type"
+00000680: 5d2c 0a7d 0a0a 7661 6c69 6461 7469 6f6e  ],.}..validation
+00000690: 5f65 7272 6f72 5f72 6573 706f 6e73 655f  _error_response_
+000006a0: 6465 6669 6e69 7469 6f6e 203d 207b 0a20  definition = {. 
+000006b0: 2020 2022 7469 746c 6522 3a20 2248 5454     "title": "HTT
+000006c0: 5056 616c 6964 6174 696f 6e45 7272 6f72  PValidationError
+000006d0: 222c 0a20 2020 2022 7479 7065 223a 2022  ",.    "type": "
+000006e0: 6f62 6a65 6374 222c 0a20 2020 2022 7072  object",.    "pr
+000006f0: 6f70 6572 7469 6573 223a 207b 0a20 2020  operties": {.   
+00000700: 2020 2020 2022 6465 7461 696c 223a 207b       "detail": {
+00000710: 0a20 2020 2020 2020 2020 2020 2022 7469  .            "ti
+00000720: 746c 6522 3a20 2244 6574 6169 6c22 2c0a  tle": "Detail",.
+00000730: 2020 2020 2020 2020 2020 2020 2274 7970              "typ
+00000740: 6522 3a20 2261 7272 6179 222c 0a20 2020  e": "array",.   
+00000750: 2020 2020 2020 2020 2022 6974 656d 7322           "items"
+00000760: 3a20 7b22 2472 6566 223a 2052 4546 5f50  : {"$ref": REF_P
+00000770: 5245 4649 5820 2b20 2256 616c 6964 6174  REFIX + "Validat
+00000780: 696f 6e45 7272 6f72 227d 2c0a 2020 2020  ionError"},.    
+00000790: 2020 2020 7d0a 2020 2020 7d2c 0a7d 0a0a      }.    },.}..
+000007a0: 0a64 6566 2067 6574 5f6d 6f64 656c 5f64  .def get_model_d
+000007b0: 6566 696e 6974 696f 6e73 280a 2020 2020  efinitions(.    
+000007c0: 2a2c 0a20 2020 2066 6c61 745f 6d6f 6465  *,.    flat_mode
+000007d0: 6c73 3a20 5365 745b 556e 696f 6e5b 5479  ls: Set[Union[Ty
+000007e0: 7065 5b42 6173 654d 6f64 656c 5d2c 2054  pe[BaseModel], T
+000007f0: 7970 655b 456e 756d 5d5d 5d2c 0a20 2020  ype[Enum]]],.   
+00000800: 206d 6f64 656c 5f6e 616d 655f 6d61 703a   model_name_map:
+00000810: 2044 6963 745b 556e 696f 6e5b 5479 7065   Dict[Union[Type
+00000820: 5b42 6173 654d 6f64 656c 5d2c 2054 7970  [BaseModel], Typ
+00000830: 655b 456e 756d 5d5d 2c20 7374 725d 2c0a  e[Enum]], str],.
+00000840: 2920 2d3e 2044 6963 745b 7374 722c 2041  ) -> Dict[str, A
+00000850: 6e79 5d3a 0a20 2020 2064 6566 696e 6974  ny]:.    definit
+00000860: 696f 6e73 3a20 4469 6374 5b73 7472 2c20  ions: Dict[str, 
+00000870: 4469 6374 5b73 7472 2c20 416e 795d 5d20  Dict[str, Any]] 
+00000880: 3d20 7b7d 0a20 2020 2066 6f72 206d 6f64  = {}.    for mod
+00000890: 656c 2069 6e20 666c 6174 5f6d 6f64 656c  el in flat_model
+000008a0: 733a 0a20 2020 2020 2020 206d 5f73 6368  s:.        m_sch
+000008b0: 656d 612c 206d 5f64 6566 696e 6974 696f  ema, m_definitio
+000008c0: 6e73 2c20 6d5f 6e65 7374 6564 5f6d 6f64  ns, m_nested_mod
+000008d0: 656c 7320 3d20 6d6f 6465 6c5f 7072 6f63  els = model_proc
+000008e0: 6573 735f 7363 6865 6d61 280a 2020 2020  ess_schema(.    
+000008f0: 2020 2020 2020 2020 6d6f 6465 6c2c 206d          model, m
+00000900: 6f64 656c 5f6e 616d 655f 6d61 703d 6d6f  odel_name_map=mo
+00000910: 6465 6c5f 6e61 6d65 5f6d 6170 2c20 7265  del_name_map, re
+00000920: 665f 7072 6566 6978 3d52 4546 5f50 5245  f_prefix=REF_PRE
+00000930: 4649 580a 2020 2020 2020 2020 290a 2020  FIX.        ).  
+00000940: 2020 2020 2020 6465 6669 6e69 7469 6f6e        definition
+00000950: 732e 7570 6461 7465 286d 5f64 6566 696e  s.update(m_defin
+00000960: 6974 696f 6e73 290a 2020 2020 2020 2020  itions).        
+00000970: 6d6f 6465 6c5f 6e61 6d65 203d 206d 6f64  model_name = mod
+00000980: 656c 5f6e 616d 655f 6d61 705b 6d6f 6465  el_name_map[mode
+00000990: 6c5d 0a20 2020 2020 2020 2069 6620 2264  l].        if "d
+000009a0: 6573 6372 6970 7469 6f6e 2220 696e 206d  escription" in m
+000009b0: 5f73 6368 656d 613a 0a20 2020 2020 2020  _schema:.       
+000009c0: 2020 2020 206d 5f73 6368 656d 615b 2264       m_schema["d
+000009d0: 6573 6372 6970 7469 6f6e 225d 203d 206d  escription"] = m
+000009e0: 5f73 6368 656d 615b 2264 6573 6372 6970  _schema["descrip
+000009f0: 7469 6f6e 225d 2e73 706c 6974 2822 5c66  tion"].split("\f
+00000a00: 2229 5b30 5d0a 2020 2020 2020 2020 6465  ")[0].        de
+00000a10: 6669 6e69 7469 6f6e 735b 6d6f 6465 6c5f  finitions[model_
+00000a20: 6e61 6d65 5d20 3d20 6d5f 7363 6865 6d61  name] = m_schema
+00000a30: 0a20 2020 2072 6574 7572 6e20 6465 6669  .    return defi
+00000a40: 6e69 7469 6f6e 730a 0a0a 6465 6620 6765  nitions...def ge
+00000a50: 745f 7377 6167 6765 7232 5f73 6563 7572  t_swagger2_secur
+00000a60: 6974 795f 6465 6669 6e69 7469 6f6e 7328  ity_definitions(
+00000a70: 0a20 2020 2066 6c61 745f 6465 7065 6e64  .    flat_depend
+00000a80: 616e 743a 2044 6570 656e 6461 6e74 2c0a  ant: Dependant,.
+00000a90: 2920 2d3e 2054 7570 6c65 5b44 6963 745b  ) -> Tuple[Dict[
+00000aa0: 7374 722c 2041 6e79 5d2c 204c 6973 745b  str, Any], List[
+00000ab0: 4469 6374 5b73 7472 2c20 416e 795d 5d5d  Dict[str, Any]]]
+00000ac0: 3a0a 2020 2020 6465 6620 5f6d 6170 5f6f  :.    def _map_o
+00000ad0: 6175 7468 325f 666c 6f77 2866 6c6f 775f  auth2_flow(flow_
+00000ae0: 6b65 793a 2073 7472 2c20 666c 6f77 3a20  key: str, flow: 
+00000af0: 4469 6374 5b73 7472 2c20 416e 795d 2920  Dict[str, Any]) 
+00000b00: 2d3e 2044 6963 745b 7374 722c 2041 6e79  -> Dict[str, Any
+00000b10: 5d3a 0a20 2020 2020 2020 2073 6563 7572  ]:.        secur
+00000b20: 6974 795f 6465 6669 6e69 7469 6f6e 203d  ity_definition =
+00000b30: 207b 0a20 2020 2020 2020 2020 2020 2022   {.            "
+00000b40: 7479 7065 223a 2022 6f61 7574 6832 222c  type": "oauth2",
+00000b50: 0a20 2020 2020 2020 2020 2020 2022 666c  .            "fl
+00000b60: 6f77 223a 2066 6c6f 775f 6b65 792c 0a20  ow": flow_key,. 
+00000b70: 2020 2020 2020 2020 2020 2022 7363 6f70             "scop
+00000b80: 6573 223a 2066 6c6f 775b 2273 636f 7065  es": flow["scope
+00000b90: 7322 5d2c 0a20 2020 2020 2020 207d 0a20  s"],.        }. 
+00000ba0: 2020 2020 2020 2069 6620 2261 7574 686f         if "autho
+00000bb0: 7269 7a61 7469 6f6e 5572 6c22 2069 6e20  rizationUrl" in 
+00000bc0: 666c 6f77 3a0a 2020 2020 2020 2020 2020  flow:.          
+00000bd0: 2020 7365 6375 7269 7479 5f64 6566 696e    security_defin
+00000be0: 6974 696f 6e2e 7570 6461 7465 287b 2261  ition.update({"a
+00000bf0: 7574 686f 7269 7a61 7469 6f6e 5572 6c22  uthorizationUrl"
+00000c00: 3a20 666c 6f77 5b22 6175 7468 6f72 697a  : flow["authoriz
+00000c10: 6174 696f 6e55 726c 225d 7d29 0a20 2020  ationUrl"]}).   
+00000c20: 2020 2020 2069 6620 2274 6f6b 656e 5572       if "tokenUr
+00000c30: 6c22 2069 6e20 666c 6f77 3a0a 2020 2020  l" in flow:.    
+00000c40: 2020 2020 2020 2020 7365 6375 7269 7479          security
+00000c50: 5f64 6566 696e 6974 696f 6e2e 7570 6461  _definition.upda
+00000c60: 7465 287b 2274 6f6b 656e 5572 6c22 3a20  te({"tokenUrl": 
+00000c70: 666c 6f77 5b22 746f 6b65 6e55 726c 225d  flow["tokenUrl"]
+00000c80: 7d29 0a0a 2020 2020 2020 2020 7265 7475  })..        retu
+00000c90: 726e 2073 6563 7572 6974 795f 6465 6669  rn security_defi
+00000ca0: 6e69 7469 6f6e 0a0a 2020 2020 6f61 7574  nition..    oaut
+00000cb0: 6832 5f66 6c6f 7773 5f6b 6579 735f 6d61  h2_flows_keys_ma
+00000cc0: 7020 3d20 7b0a 2020 2020 2020 2020 2269  p = {.        "i
+00000cd0: 6d70 6c69 6369 7422 3a20 2269 6d70 6c69  mplicit": "impli
+00000ce0: 6369 7422 2c0a 2020 2020 2020 2020 2270  cit",.        "p
+00000cf0: 6173 7377 6f72 6422 3a20 2270 6173 7377  assword": "passw
+00000d00: 6f72 6422 2c0a 2020 2020 2020 2020 2263  ord",.        "c
+00000d10: 6c69 656e 7443 7265 6465 6e74 6961 6c73  lientCredentials
+00000d20: 223a 2022 6170 706c 6963 6174 696f 6e22  ": "application"
+00000d30: 2c0a 2020 2020 2020 2020 2261 7574 686f  ,.        "autho
+00000d40: 7269 7a61 7469 6f6e 436f 6465 223a 2022  rizationCode": "
+00000d50: 6163 6365 7373 436f 6465 222c 0a20 2020  accessCode",.   
+00000d60: 207d 0a20 2020 2073 6563 7572 6974 795f   }.    security_
+00000d70: 6465 6669 6e69 7469 6f6e 7320 3d20 7b7d  definitions = {}
+00000d80: 0a20 2020 206f 7065 7261 7469 6f6e 5f73  .    operation_s
+00000d90: 6563 7572 6974 7920 3d20 5b5d 0a20 2020  ecurity = [].   
+00000da0: 2066 6f72 2073 6563 7572 6974 795f 7265   for security_re
+00000db0: 7175 6972 656d 656e 7420 696e 2066 6c61  quirement in fla
+00000dc0: 745f 6465 7065 6e64 616e 742e 7365 6375  t_dependant.secu
+00000dd0: 7269 7479 5f72 6571 7569 7265 6d65 6e74  rity_requirement
+00000de0: 733a 0a20 2020 2020 2020 2023 2066 6173  s:.        # fas
+00000df0: 7461 7069 2e73 6563 7572 6974 792e 2a20  tapi.security.* 
+00000e00: 7768 6963 6820 6765 7473 206d 6f64 656c  which gets model
+00000e10: 2066 726f 6d20 6661 7374 6170 692e 6f70   from fastapi.op
+00000e20: 656e 6170 692e 6d6f 6465 6c73 0a20 2020  enapi.models.   
+00000e30: 2020 2020 2073 6563 7572 6974 795f 6465       security_de
+00000e40: 6669 6e69 7469 6f6e 203d 206a 736f 6e61  finition = jsona
+00000e50: 626c 655f 656e 636f 6465 7228 0a20 2020  ble_encoder(.   
+00000e60: 2020 2020 2020 2020 2073 6563 7572 6974           securit
+00000e70: 795f 7265 7175 6972 656d 656e 742e 7365  y_requirement.se
+00000e80: 6375 7269 7479 5f73 6368 656d 652e 6d6f  curity_scheme.mo
+00000e90: 6465 6c2c 0a20 2020 2020 2020 2020 2020  del,.           
+00000ea0: 2062 795f 616c 6961 733d 5472 7565 2c0a   by_alias=True,.
+00000eb0: 2020 2020 2020 2020 2020 2020 6578 636c              excl
+00000ec0: 7564 655f 6e6f 6e65 3d54 7275 652c 0a20  ude_none=True,. 
+00000ed0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00000ee0: 2069 6620 7365 6375 7269 7479 5f64 6566   if security_def
+00000ef0: 696e 6974 696f 6e5b 2274 7970 6522 5d20  inition["type"] 
+00000f00: 3d3d 2022 6874 7470 223a 0a20 2020 2020  == "http":.     
+00000f10: 2020 2020 2020 2069 6620 7365 6375 7269         if securi
+00000f20: 7479 5f64 6566 696e 6974 696f 6e2e 6765  ty_definition.ge
+00000f30: 7428 2273 6368 656d 6522 2c20 2262 6173  t("scheme", "bas
+00000f40: 6963 2229 203d 3d20 2262 6173 6963 223a  ic") == "basic":
+00000f50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00000f60: 2073 6563 7572 6974 795f 6465 6669 6e69   security_defini
+00000f70: 7469 6f6e 203d 207b 2274 7970 6522 3a20  tion = {"type": 
+00000f80: 2262 6173 6963 227d 0a20 2020 2020 2020  "basic"}.       
+00000f90: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00000fa0: 2020 2020 2020 2020 2020 206c 6f67 6765             logge
+00000fb0: 722e 7761 726e 696e 6728 0a20 2020 2020  r.warning(.     
+00000fc0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00000fd0: 2266 6173 7461 7069 5f73 7761 6767 6572  "fastapi_swagger
+00000fe0: 323a 2055 6e61 626c 6520 746f 2068 616e  2: Unable to han
+00000ff0: 646c 6520 7365 6375 7269 7479 5f64 6566  dle security_def
+00001000: 696e 6974 696f 6e3a 207b 7365 6375 7269  inition: {securi
+00001010: 7479 5f64 6566 696e 6974 696f 6e7d 220a  ty_definition}".
+00001020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001030: 290a 2020 2020 2020 2020 656c 6966 2073  ).        elif s
+00001040: 6563 7572 6974 795f 6465 6669 6e69 7469  ecurity_definiti
+00001050: 6f6e 5b22 7479 7065 225d 203d 3d20 2261  on["type"] == "a
+00001060: 7069 4b65 7922 3a0a 2020 2020 2020 2020  piKey":.        
+00001070: 2020 2020 7061 7373 0a20 2020 2020 2020      pass.       
+00001080: 2065 6c69 6620 7365 6375 7269 7479 5f64   elif security_d
+00001090: 6566 696e 6974 696f 6e5b 2274 7970 6522  efinition["type"
+000010a0: 5d20 3d3d 2022 6f61 7574 6832 223a 0a20  ] == "oauth2":. 
+000010b0: 2020 2020 2020 2020 2020 205f 7365 6375             _secu
+000010c0: 7269 7479 5f64 6566 696e 6974 696f 6e20  rity_definition 
+000010d0: 3d20 7365 6375 7269 7479 5f64 6566 696e  = security_defin
+000010e0: 6974 696f 6e0a 2020 2020 2020 2020 2020  ition.          
+000010f0: 2020 666c 6f77 7320 3d20 7365 6375 7269    flows = securi
+00001100: 7479 5f64 6566 696e 6974 696f 6e5b 2266  ty_definition["f
+00001110: 6c6f 7773 225d 0a20 2020 2020 2020 2020  lows"].         
+00001120: 2020 2066 6c6f 7773 5f6b 6579 7320 3d20     flows_keys = 
+00001130: 6c69 7374 2866 6c6f 7773 2e6b 6579 7328  list(flows.keys(
+00001140: 2929 0a20 2020 2020 2020 2020 2020 2069  )).            i
+00001150: 6620 6c65 6e28 666c 6f77 735f 6b65 7973  f len(flows_keys
+00001160: 2920 3e3d 2031 3a0a 2020 2020 2020 2020  ) >= 1:.        
+00001170: 2020 2020 2020 2020 666c 6f77 5f6b 6579          flow_key
+00001180: 5f33 203d 2066 6c6f 7773 5f6b 6579 735b  _3 = flows_keys[
+00001190: 305d 0a20 2020 2020 2020 2020 2020 2020  0].             
+000011a0: 2020 2066 6c6f 7720 3d20 666c 6f77 735b     flow = flows[
+000011b0: 666c 6f77 5f6b 6579 5f33 5d0a 2020 2020  flow_key_3].    
+000011c0: 2020 2020 2020 2020 2020 2020 7365 6375              secu
+000011d0: 7269 7479 5f64 6566 696e 6974 696f 6e20  rity_definition 
+000011e0: 3d20 5f6d 6170 5f6f 6175 7468 325f 666c  = _map_oauth2_fl
+000011f0: 6f77 280a 2020 2020 2020 2020 2020 2020  ow(.            
+00001200: 2020 2020 2020 2020 6f61 7574 6832 5f66          oauth2_f
+00001210: 6c6f 7773 5f6b 6579 735f 6d61 705b 666c  lows_keys_map[fl
+00001220: 6f77 5f6b 6579 5f33 5d2c 2066 6c6f 770a  ow_key_3], flow.
+00001230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001240: 290a 0a20 2020 2020 2020 2020 2020 2020  )..             
+00001250: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
+00001260: 6528 312c 206c 656e 2866 6c6f 7773 5f6b  e(1, len(flows_k
+00001270: 6579 7329 293a 0a20 2020 2020 2020 2020  eys)):.         
+00001280: 2020 2020 2020 2020 2020 2066 6c6f 775f             flow_
+00001290: 6b65 795f 3320 3d20 666c 6f77 735f 6b65  key_3 = flows_ke
+000012a0: 7973 5b69 5d0a 2020 2020 2020 2020 2020  ys[i].          
+000012b0: 2020 2020 2020 2020 2020 666c 6f77 203d            flow =
+000012c0: 2066 6c6f 7773 5b66 6c6f 775f 6b65 795f   flows[flow_key_
+000012d0: 335d 0a20 2020 2020 2020 2020 2020 2020  3].             
+000012e0: 2020 2020 2020 2066 6c6f 775f 6b65 795f         flow_key_
+000012f0: 3220 3d20 6f61 7574 6832 5f66 6c6f 7773  2 = oauth2_flows
+00001300: 5f6b 6579 735f 6d61 705b 666c 6f77 5f6b  _keys_map[flow_k
+00001310: 6579 5f33 5d0a 2020 2020 2020 2020 2020  ey_3].          
+00001320: 2020 2020 2020 2020 2020 7365 6375 7269            securi
+00001330: 7479 5f64 6566 696e 6974 696f 6e5f 3120  ty_definition_1 
+00001340: 3d20 5f6d 6170 5f6f 6175 7468 325f 666c  = _map_oauth2_fl
+00001350: 6f77 2866 6c6f 775f 6b65 795f 322c 2066  ow(flow_key_2, f
+00001360: 6c6f 7729 0a20 2020 2020 2020 2020 2020  low).           
+00001370: 2020 2020 2020 2020 2073 6563 7572 6974           securit
+00001380: 795f 6e61 6d65 203d 2073 6563 7572 6974  y_name = securit
+00001390: 795f 7265 7175 6972 656d 656e 742e 7365  y_requirement.se
+000013a0: 6375 7269 7479 5f73 6368 656d 652e 7363  curity_scheme.sc
+000013b0: 6865 6d65 5f6e 616d 650a 2020 2020 2020  heme_name.      
+000013c0: 2020 2020 2020 2020 2020 2020 2020 5f73                _s
+000013d0: 6563 7572 6974 795f 6e61 6d65 203d 2073  ecurity_name = s
+000013e0: 6563 7572 6974 795f 6e61 6d65 202b 2022  ecurity_name + "
+000013f0: 5f22 202b 2066 6c6f 775f 6b65 795f 320a  _" + flow_key_2.
+00001400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001410: 2020 2020 7365 6375 7269 7479 5f64 6566      security_def
+00001420: 696e 6974 696f 6e73 5b5f 7365 6375 7269  initions[_securi
+00001430: 7479 5f6e 616d 655d 203d 2073 6563 7572  ty_name] = secur
+00001440: 6974 795f 6465 6669 6e69 7469 6f6e 5f31  ity_definition_1
+00001450: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00001460: 2020 2020 206f 7065 7261 7469 6f6e 5f73       operation_s
+00001470: 6563 7572 6974 792e 6170 7065 6e64 280a  ecurity.append(.
+00001480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001490: 2020 2020 2020 2020 7b5f 7365 6375 7269          {_securi
+000014a0: 7479 5f6e 616d 653a 2073 6563 7572 6974  ty_name: securit
+000014b0: 795f 7265 7175 6972 656d 656e 742e 7363  y_requirement.sc
+000014c0: 6f70 6573 7d0a 2020 2020 2020 2020 2020  opes}.          
+000014d0: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+000014e0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+000014f0: 2020 2020 2020 6c6f 6767 6572 2e77 6172        logger.war
+00001500: 6e69 6e67 280a 2020 2020 2020 2020 2020  ning(.          
+00001510: 2020 2020 2020 6622 6661 7374 6170 695f        f"fastapi_
+00001520: 7377 6167 6765 7232 3a20 556e 6162 6c65  swagger2: Unable
+00001530: 2074 6f20 6861 6e64 6c65 2073 6563 7572   to handle secur
+00001540: 6974 795f 6465 6669 6e69 7469 6f6e 3a20  ity_definition: 
+00001550: 7b73 6563 7572 6974 795f 6465 6669 6e69  {security_defini
+00001560: 7469 6f6e 7d22 0a20 2020 2020 2020 2020  tion}".         
+00001570: 2020 2029 0a20 2020 2020 2020 2073 6563     ).        sec
+00001580: 7572 6974 795f 6e61 6d65 203d 2073 6563  urity_name = sec
+00001590: 7572 6974 795f 7265 7175 6972 656d 656e  urity_requiremen
+000015a0: 742e 7365 6375 7269 7479 5f73 6368 656d  t.security_schem
+000015b0: 652e 7363 6865 6d65 5f6e 616d 650a 2020  e.scheme_name.  
+000015c0: 2020 2020 2020 7365 6375 7269 7479 5f64        security_d
+000015d0: 6566 696e 6974 696f 6e73 5b73 6563 7572  efinitions[secur
+000015e0: 6974 795f 6e61 6d65 5d20 3d20 7365 6375  ity_name] = secu
+000015f0: 7269 7479 5f64 6566 696e 6974 696f 6e0a  rity_definition.
+00001600: 2020 2020 2020 2020 6f70 6572 6174 696f          operatio
+00001610: 6e5f 7365 6375 7269 7479 2e61 7070 656e  n_security.appen
+00001620: 6428 7b73 6563 7572 6974 795f 6e61 6d65  d({security_name
+00001630: 3a20 7365 6375 7269 7479 5f72 6571 7569  : security_requi
+00001640: 7265 6d65 6e74 2e73 636f 7065 737d 290a  rement.scopes}).
+00001650: 2020 2020 7265 7475 726e 2073 6563 7572      return secur
+00001660: 6974 795f 6465 6669 6e69 7469 6f6e 732c  ity_definitions,
+00001670: 206f 7065 7261 7469 6f6e 5f73 6563 7572   operation_secur
+00001680: 6974 790a 0a0a 6465 6620 6765 745f 7377  ity...def get_sw
+00001690: 6167 6765 7232 5f6f 7065 7261 7469 6f6e  agger2_operation
+000016a0: 5f70 6172 616d 6574 6572 7328 0a20 2020  _parameters(.   
+000016b0: 202a 2c0a 2020 2020 616c 6c5f 726f 7574   *,.    all_rout
+000016c0: 655f 7061 7261 6d73 3a20 5365 7175 656e  e_params: Sequen
+000016d0: 6365 5b4d 6f64 656c 4669 656c 645d 2c0a  ce[ModelField],.
+000016e0: 2020 2020 6d6f 6465 6c5f 6e61 6d65 5f6d      model_name_m
+000016f0: 6170 3a20 4469 6374 5b55 6e69 6f6e 5b54  ap: Dict[Union[T
+00001700: 7970 655b 4261 7365 4d6f 6465 6c5d 2c20  ype[BaseModel], 
+00001710: 5479 7065 5b45 6e75 6d5d 5d2c 2073 7472  Type[Enum]], str
+00001720: 5d2c 0a29 202d 3e20 4c69 7374 5b44 6963  ],.) -> List[Dic
+00001730: 745b 7374 722c 2041 6e79 5d5d 3a0a 2020  t[str, Any]]:.  
+00001740: 2020 7061 7261 6d65 7465 7273 203d 205b    parameters = [
+00001750: 5d0a 2020 2020 666f 7220 7061 7261 6d20  ].    for param 
+00001760: 696e 2061 6c6c 5f72 6f75 7465 5f70 6172  in all_route_par
+00001770: 616d 733a 0a20 2020 2020 2020 2066 6965  ams:.        fie
+00001780: 6c64 5f69 6e66 6f20 3d20 7061 7261 6d2e  ld_info = param.
+00001790: 6669 656c 645f 696e 666f 0a20 2020 2020  field_info.     
+000017a0: 2020 2066 6965 6c64 5f69 6e66 6f20 3d20     field_info = 
+000017b0: 6361 7374 2850 6172 616d 2c20 6669 656c  cast(Param, fiel
+000017c0: 645f 696e 666f 290a 2020 2020 2020 2020  d_info).        
+000017d0: 6966 206e 6f74 2066 6965 6c64 5f69 6e66  if not field_inf
+000017e0: 6f2e 696e 636c 7564 655f 696e 5f73 6368  o.include_in_sch
+000017f0: 656d 613a 0a20 2020 2020 2020 2020 2020  ema:.           
+00001800: 2063 6f6e 7469 6e75 650a 2020 2020 2020   continue.      
+00001810: 2020 7061 7261 6d65 7465 723a 2044 6963    parameter: Dic
+00001820: 745b 7374 722c 2041 6e79 5d20 3d20 7b0a  t[str, Any] = {.
+00001830: 2020 2020 2020 2020 2020 2020 226e 616d              "nam
+00001840: 6522 3a20 7061 7261 6d2e 616c 6961 732c  e": param.alias,
+00001850: 0a20 2020 2020 2020 2020 2020 2022 696e  .            "in
+00001860: 223a 2066 6965 6c64 5f69 6e66 6f2e 696e  ": field_info.in
+00001870: 5f2e 7661 6c75 652c 0a20 2020 2020 2020  _.value,.       
+00001880: 2020 2020 2022 7265 7175 6972 6564 223a       "required":
+00001890: 2070 6172 616d 2e72 6571 7569 7265 642c   param.required,
+000018a0: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
+000018b0: 2020 2073 6368 656d 613a 2044 6963 745b     schema: Dict[
+000018c0: 7374 722c 2041 6e79 5d20 3d20 6669 656c  str, Any] = fiel
+000018d0: 645f 7363 6865 6d61 280a 2020 2020 2020  d_schema(.      
+000018e0: 2020 2020 2020 7061 7261 6d2c 206d 6f64        param, mod
+000018f0: 656c 5f6e 616d 655f 6d61 703d 6d6f 6465  el_name_map=mode
+00001900: 6c5f 6e61 6d65 5f6d 6170 2c20 7265 665f  l_name_map, ref_
+00001910: 7072 6566 6978 3d52 4546 5f50 5245 4649  prefix=REF_PREFI
+00001920: 580a 2020 2020 2020 2020 295b 305d 0a20  X.        )[0]. 
+00001930: 2020 2020 2020 2069 6620 6669 656c 645f         if field_
+00001940: 696e 666f 2e69 6e5f 2e76 616c 7565 203d  info.in_.value =
+00001950: 3d20 2262 6f64 7922 3a0a 2020 2020 2020  = "body":.      
+00001960: 2020 2020 2020 7061 7261 6d65 7465 725b        parameter[
+00001970: 2273 6368 656d 6122 5d20 3d20 7363 6865  "schema"] = sche
+00001980: 6d61 0a20 2020 2020 2020 2065 6c73 653a  ma.        else:
+00001990: 0a20 2020 2020 2020 2020 2020 2070 6172  .            par
+000019a0: 616d 6574 6572 2e75 7064 6174 6528 7b6b  ameter.update({k
+000019b0: 3a20 7620 666f 7220 286b 2c20 7629 2069  : v for (k, v) i
+000019c0: 6e20 7363 6865 6d61 2e69 7465 6d73 2829  n schema.items()
+000019d0: 2069 6620 6b20 213d 2022 7469 746c 6522   if k != "title"
+000019e0: 7d29 0a20 2020 2020 2020 2069 6620 6669  }).        if fi
+000019f0: 656c 645f 696e 666f 2e64 6573 6372 6970  eld_info.descrip
+00001a00: 7469 6f6e 3a0a 2020 2020 2020 2020 2020  tion:.          
+00001a10: 2020 7061 7261 6d65 7465 725b 2264 6573    parameter["des
+00001a20: 6372 6970 7469 6f6e 225d 203d 2066 6965  cription"] = fie
+00001a30: 6c64 5f69 6e66 6f2e 6465 7363 7269 7074  ld_info.descript
+00001a40: 696f 6e0a 2020 2020 2020 2020 6966 2066  ion.        if f
+00001a50: 6965 6c64 5f69 6e66 6f2e 6578 616d 706c  ield_info.exampl
+00001a60: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
+00001a70: 7061 7261 6d65 7465 725b 2265 7861 6d70  parameter["examp
+00001a80: 6c65 7322 5d20 3d20 6a73 6f6e 6162 6c65  les"] = jsonable
+00001a90: 5f65 6e63 6f64 6572 2866 6965 6c64 5f69  _encoder(field_i
+00001aa0: 6e66 6f2e 6578 616d 706c 6573 290a 2020  nfo.examples).  
+00001ab0: 2020 2020 2020 656c 6966 2066 6965 6c64        elif field
+00001ac0: 5f69 6e66 6f2e 6578 616d 706c 6520 213d  _info.example !=
+00001ad0: 2055 6e64 6566 696e 6564 3a0a 2020 2020   Undefined:.    
+00001ae0: 2020 2020 2020 2020 7061 7261 6d65 7465          paramete
+00001af0: 725b 2265 7861 6d70 6c65 225d 203d 206a  r["example"] = j
+00001b00: 736f 6e61 626c 655f 656e 636f 6465 7228  sonable_encoder(
+00001b10: 6669 656c 645f 696e 666f 2e65 7861 6d70  field_info.examp
+00001b20: 6c65 290a 2020 2020 2020 2020 6966 2066  le).        if f
+00001b30: 6965 6c64 5f69 6e66 6f2e 6465 7072 6563  ield_info.deprec
+00001b40: 6174 6564 3a0a 2020 2020 2020 2020 2020  ated:.          
+00001b50: 2020 7061 7261 6d65 7465 725b 2264 6570    parameter["dep
+00001b60: 7265 6361 7465 6422 5d20 3d20 6669 656c  recated"] = fiel
+00001b70: 645f 696e 666f 2e64 6570 7265 6361 7465  d_info.deprecate
+00001b80: 640a 2020 2020 2020 2020 7061 7261 6d65  d.        parame
+00001b90: 7465 7273 2e61 7070 656e 6428 7061 7261  ters.append(para
+00001ba0: 6d65 7465 7229 0a20 2020 2072 6574 7572  meter).    retur
+00001bb0: 6e20 7061 7261 6d65 7465 7273 0a0a 0a64  n parameters...d
+00001bc0: 6566 2067 6574 5f73 7761 6767 6572 325f  ef get_swagger2_
+00001bd0: 6f70 6572 6174 696f 6e5f 7265 7175 6573  operation_reques
+00001be0: 745f 626f 6479 280a 2020 2020 2a2c 0a20  t_body(.    *,. 
+00001bf0: 2020 2062 6f64 795f 6669 656c 643a 204f     body_field: O
+00001c00: 7074 696f 6e61 6c5b 4d6f 6465 6c46 6965  ptional[ModelFie
+00001c10: 6c64 5d2c 0a20 2020 206d 6f64 656c 5f6e  ld],.    model_n
+00001c20: 616d 655f 6d61 703a 2044 6963 745b 556e  ame_map: Dict[Un
+00001c30: 696f 6e5b 5479 7065 5b42 6173 654d 6f64  ion[Type[BaseMod
+00001c40: 656c 5d2c 2054 7970 655b 456e 756d 5d5d  el], Type[Enum]]
+00001c50: 2c20 7374 725d 2c0a 2920 2d3e 204f 7074  , str],.) -> Opt
+00001c60: 696f 6e61 6c5b 4469 6374 5b73 7472 2c20  ional[Dict[str, 
+00001c70: 416e 795d 5d3a 0a20 2020 2069 6620 6e6f  Any]]:.    if no
+00001c80: 7420 626f 6479 5f66 6965 6c64 3a0a 2020  t body_field:.  
+00001c90: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
+00001ca0: 650a 2020 2020 6173 7365 7274 2069 7369  e.    assert isi
+00001cb0: 6e73 7461 6e63 6528 626f 6479 5f66 6965  nstance(body_fie
+00001cc0: 6c64 2c20 4d6f 6465 6c46 6965 6c64 290a  ld, ModelField).
+00001cd0: 2020 2020 626f 6479 5f73 6368 656d 612c      body_schema,
+00001ce0: 205f 2c20 5f20 3d20 6669 656c 645f 7363   _, _ = field_sc
+00001cf0: 6865 6d61 280a 2020 2020 2020 2020 626f  hema(.        bo
+00001d00: 6479 5f66 6965 6c64 2c20 6d6f 6465 6c5f  dy_field, model_
+00001d10: 6e61 6d65 5f6d 6170 3d6d 6f64 656c 5f6e  name_map=model_n
+00001d20: 616d 655f 6d61 702c 2072 6566 5f70 7265  ame_map, ref_pre
+00001d30: 6669 783d 5245 465f 5052 4546 4958 0a20  fix=REF_PREFIX. 
+00001d40: 2020 2029 0a20 2020 2066 6965 6c64 5f69     ).    field_i
+00001d50: 6e66 6f20 3d20 6361 7374 2842 6f64 792c  nfo = cast(Body,
+00001d60: 2062 6f64 795f 6669 656c 642e 6669 656c   body_field.fiel
+00001d70: 645f 696e 666f 290a 2020 2020 2320 7265  d_info).    # re
+00001d80: 7175 6573 745f 6d65 6469 615f 7479 7065  quest_media_type
+00001d90: 203d 2066 6965 6c64 5f69 6e66 6f2e 6d65   = field_info.me
+00001da0: 6469 615f 7479 7065 0a20 2020 2072 6571  dia_type.    req
+00001db0: 7569 7265 6420 3d20 626f 6479 5f66 6965  uired = body_fie
+00001dc0: 6c64 2e72 6571 7569 7265 640a 2020 2020  ld.required.    
+00001dd0: 7265 7175 6573 745f 626f 6479 5f6f 6169  request_body_oai
+00001de0: 3a20 4469 6374 5b73 7472 2c20 416e 795d  : Dict[str, Any]
+00001df0: 203d 207b 7d0a 2020 2020 7265 7175 6573   = {}.    reques
+00001e00: 745f 626f 6479 5f6f 6169 5b22 6e61 6d65  t_body_oai["name
+00001e10: 225d 203d 2062 6f64 795f 6669 656c 642e  "] = body_field.
+00001e20: 616c 6961 730a 2020 2020 7265 7175 6573  alias.    reques
+00001e30: 745f 626f 6479 5f6f 6169 5b22 696e 225d  t_body_oai["in"]
+00001e40: 203d 2022 626f 6479 220a 2020 2020 6966   = "body".    if
+00001e50: 2072 6571 7569 7265 643a 0a20 2020 2020   required:.     
+00001e60: 2020 2072 6571 7565 7374 5f62 6f64 795f     request_body_
+00001e70: 6f61 695b 2272 6571 7569 7265 6422 5d20  oai["required"] 
+00001e80: 3d20 7265 7175 6972 6564 0a0a 2020 2020  = required..    
+00001e90: 7265 7175 6573 745f 6d65 6469 615f 636f  request_media_co
+00001ea0: 6e74 656e 743a 2044 6963 745b 7374 722c  ntent: Dict[str,
+00001eb0: 2041 6e79 5d20 3d20 7b22 7363 6865 6d61   Any] = {"schema
+00001ec0: 223a 2062 6f64 795f 7363 6865 6d61 7d0a  ": body_schema}.
+00001ed0: 2020 2020 6966 2066 6965 6c64 5f69 6e66      if field_inf
+00001ee0: 6f2e 6578 616d 706c 6573 3a0a 2020 2020  o.examples:.    
+00001ef0: 2020 2020 7265 7175 6573 745f 6d65 6469      request_medi
+00001f00: 615f 636f 6e74 656e 745b 2265 7861 6d70  a_content["examp
+00001f10: 6c65 7322 5d20 3d20 6a73 6f6e 6162 6c65  les"] = jsonable
+00001f20: 5f65 6e63 6f64 6572 2866 6965 6c64 5f69  _encoder(field_i
+00001f30: 6e66 6f2e 6578 616d 706c 6573 290a 2020  nfo.examples).  
+00001f40: 2020 656c 6966 2066 6965 6c64 5f69 6e66    elif field_inf
+00001f50: 6f2e 6578 616d 706c 6520 213d 2055 6e64  o.example != Und
+00001f60: 6566 696e 6564 3a0a 2020 2020 2020 2020  efined:.        
+00001f70: 7265 7175 6573 745f 6d65 6469 615f 636f  request_media_co
+00001f80: 6e74 656e 745b 2265 7861 6d70 6c65 225d  ntent["example"]
+00001f90: 203d 206a 736f 6e61 626c 655f 656e 636f   = jsonable_enco
+00001fa0: 6465 7228 6669 656c 645f 696e 666f 2e65  der(field_info.e
+00001fb0: 7861 6d70 6c65 290a 2020 2020 2320 7265  xample).    # re
+00001fc0: 7175 6573 745f 626f 6479 5f6f 6169 5b22  quest_body_oai["
+00001fd0: 636f 6e74 656e 7422 5d20 3d20 7b72 6571  content"] = {req
+00001fe0: 7565 7374 5f6d 6564 6961 5f74 7970 653a  uest_media_type:
+00001ff0: 2072 6571 7565 7374 5f6d 6564 6961 5f63   request_media_c
+00002000: 6f6e 7465 6e74 7d0a 2020 2020 7265 7175  ontent}.    requ
+00002010: 6573 745f 626f 6479 5f6f 6169 2e75 7064  est_body_oai.upd
+00002020: 6174 6528 7265 7175 6573 745f 6d65 6469  ate(request_medi
+00002030: 615f 636f 6e74 656e 7429 0a20 2020 2072  a_content).    r
+00002040: 6574 7572 6e20 7265 7175 6573 745f 626f  eturn request_bo
+00002050: 6479 5f6f 6169 0a0a 0a64 6566 2067 6574  dy_oai...def get
+00002060: 5f73 7761 6767 6572 325f 7061 7468 280a  _swagger2_path(.
+00002070: 2020 2020 2a2c 2072 6f75 7465 3a20 726f      *, route: ro
+00002080: 7574 696e 672e 4150 4952 6f75 7465 2c20  uting.APIRoute, 
+00002090: 6d6f 6465 6c5f 6e61 6d65 5f6d 6170 3a20  model_name_map: 
+000020a0: 4469 6374 5b74 7970 652c 2073 7472 5d2c  Dict[type, str],
+000020b0: 206f 7065 7261 7469 6f6e 5f69 6473 3a20   operation_ids: 
+000020c0: 5365 745b 7374 725d 0a29 202d 3e20 5475  Set[str].) -> Tu
+000020d0: 706c 655b 4469 6374 5b73 7472 2c20 416e  ple[Dict[str, An
+000020e0: 795d 2c20 4469 6374 5b73 7472 2c20 416e  y], Dict[str, An
+000020f0: 795d 2c20 4469 6374 5b73 7472 2c20 416e  y], Dict[str, An
+00002100: 795d 5d3a 0a20 2020 2070 6174 683a 2044  y]]:.    path: D
+00002110: 6963 745b 7374 722c 2041 6e79 5d20 3d20  ict[str, Any] = 
+00002120: 7b7d 0a20 2020 2073 6563 7572 6974 795f  {}.    security_
+00002130: 7363 6865 6d65 733a 2044 6963 745b 7374  schemes: Dict[st
+00002140: 722c 2041 6e79 5d20 3d20 7b7d 0a20 2020  r, Any] = {}.   
+00002150: 2064 6566 696e 6974 696f 6e73 3a20 4469   definitions: Di
+00002160: 6374 5b73 7472 2c20 416e 795d 203d 207b  ct[str, Any] = {
+00002170: 7d0a 2020 2020 6173 7365 7274 2072 6f75  }.    assert rou
+00002180: 7465 2e6d 6574 686f 6473 2069 7320 6e6f  te.methods is no
+00002190: 7420 4e6f 6e65 2c20 224d 6574 686f 6473  t None, "Methods
+000021a0: 206d 7573 7420 6265 2061 206c 6973 7422   must be a list"
+000021b0: 0a0a 2020 2020 6966 2069 7369 6e73 7461  ..    if isinsta
+000021c0: 6e63 6528 726f 7574 652e 7265 7370 6f6e  nce(route.respon
+000021d0: 7365 5f63 6c61 7373 2c20 4465 6661 756c  se_class, Defaul
+000021e0: 7450 6c61 6365 686f 6c64 6572 293a 0a20  tPlaceholder):. 
+000021f0: 2020 2020 2020 2063 7572 7265 6e74 5f72         current_r
+00002200: 6573 706f 6e73 655f 636c 6173 733a 2054  esponse_class: T
+00002210: 7970 655b 5265 7370 6f6e 7365 5d20 3d20  ype[Response] = 
+00002220: 726f 7574 652e 7265 7370 6f6e 7365 5f63  route.response_c
+00002230: 6c61 7373 2e76 616c 7565 0a20 2020 2065  lass.value.    e
+00002240: 6c73 653a 0a20 2020 2020 2020 2063 7572  lse:.        cur
+00002250: 7265 6e74 5f72 6573 706f 6e73 655f 636c  rent_response_cl
+00002260: 6173 7320 3d20 726f 7574 652e 7265 7370  ass = route.resp
+00002270: 6f6e 7365 5f63 6c61 7373 0a20 2020 2061  onse_class.    a
+00002280: 7373 6572 7420 6375 7272 656e 745f 7265  ssert current_re
+00002290: 7370 6f6e 7365 5f63 6c61 7373 2c20 2241  sponse_class, "A
+000022a0: 2072 6573 706f 6e73 6520 636c 6173 7320   response class 
+000022b0: 6973 206e 6565 6465 6420 746f 2067 656e  is needed to gen
+000022c0: 6572 6174 6520 5377 6167 6765 7222 0a0a  erate Swagger"..
+000022d0: 2020 2020 726f 7574 655f 7265 7370 6f6e      route_respon
+000022e0: 7365 5f6d 6564 6961 5f74 7970 653a 204f  se_media_type: O
+000022f0: 7074 696f 6e61 6c5b 7374 725d 203d 2063  ptional[str] = c
+00002300: 7572 7265 6e74 5f72 6573 706f 6e73 655f  urrent_response_
+00002310: 636c 6173 732e 6d65 6469 615f 7479 7065  class.media_type
+00002320: 0a20 2020 2069 6620 726f 7574 652e 696e  .    if route.in
+00002330: 636c 7564 655f 696e 5f73 6368 656d 613a  clude_in_schema:
+00002340: 0a20 2020 2020 2020 2066 6f72 206d 6574  .        for met
+00002350: 686f 6420 696e 2072 6f75 7465 2e6d 6574  hod in route.met
+00002360: 686f 6473 3a0a 2020 2020 2020 2020 2020  hods:.          
+00002370: 2020 6f70 6572 6174 696f 6e20 3d20 6765    operation = ge
+00002380: 745f 6f70 656e 6170 695f 6f70 6572 6174  t_openapi_operat
+00002390: 696f 6e5f 6d65 7461 6461 7461 280a 2020  ion_metadata(.  
+000023a0: 2020 2020 2020 2020 2020 2020 2020 726f                ro
+000023b0: 7574 653d 726f 7574 652c 206d 6574 686f  ute=route, metho
+000023c0: 643d 6d65 7468 6f64 2c20 6f70 6572 6174  d=method, operat
+000023d0: 696f 6e5f 6964 733d 6f70 6572 6174 696f  ion_ids=operatio
+000023e0: 6e5f 6964 730a 2020 2020 2020 2020 2020  n_ids.          
+000023f0: 2020 290a 0a20 2020 2020 2020 2020 2020    )..           
+00002400: 2070 6172 616d 6574 6572 733a 204c 6973   parameters: Lis
+00002410: 745b 4469 6374 5b73 7472 2c20 416e 795d  t[Dict[str, Any]
+00002420: 5d20 3d20 5b5d 0a20 2020 2020 2020 2020  ] = [].         
+00002430: 2020 2066 6c61 745f 6465 7065 6e64 616e     flat_dependan
+00002440: 7420 3d20 6765 745f 666c 6174 5f64 6570  t = get_flat_dep
+00002450: 656e 6461 6e74 2872 6f75 7465 2e64 6570  endant(route.dep
+00002460: 656e 6461 6e74 2c20 736b 6970 5f72 6570  endant, skip_rep
+00002470: 6561 7473 3d54 7275 6529 0a20 2020 2020  eats=True).     
+00002480: 2020 2020 2020 2028 0a20 2020 2020 2020         (.       
+00002490: 2020 2020 2020 2020 2073 6563 7572 6974           securit
+000024a0: 795f 6465 6669 6e69 7469 6f6e 732c 0a20  y_definitions,. 
+000024b0: 2020 2020 2020 2020 2020 2020 2020 206f                 o
+000024c0: 7065 7261 7469 6f6e 5f73 6563 7572 6974  peration_securit
+000024d0: 792c 0a20 2020 2020 2020 2020 2020 2029  y,.            )
+000024e0: 203d 2067 6574 5f73 7761 6767 6572 325f   = get_swagger2_
+000024f0: 7365 6375 7269 7479 5f64 6566 696e 6974  security_definit
+00002500: 696f 6e73 2866 6c61 745f 6465 7065 6e64  ions(flat_depend
+00002510: 616e 743d 666c 6174 5f64 6570 656e 6461  ant=flat_dependa
+00002520: 6e74 290a 0a20 2020 2020 2020 2020 2020  nt)..           
+00002530: 2069 6620 6f70 6572 6174 696f 6e5f 7365   if operation_se
+00002540: 6375 7269 7479 3a0a 2020 2020 2020 2020  curity:.        
+00002550: 2020 2020 2020 2020 6f70 6572 6174 696f          operatio
+00002560: 6e2e 7365 7464 6566 6175 6c74 2822 7365  n.setdefault("se
+00002570: 6375 7269 7479 222c 205b 5d29 2e65 7874  curity", []).ext
+00002580: 656e 6428 6f70 6572 6174 696f 6e5f 7365  end(operation_se
+00002590: 6375 7269 7479 290a 0a20 2020 2020 2020  curity)..       
+000025a0: 2020 2020 2069 6620 7365 6375 7269 7479       if security
+000025b0: 5f64 6566 696e 6974 696f 6e73 3a0a 2020  _definitions:.  
+000025c0: 2020 2020 2020 2020 2020 2020 2020 7365                se
+000025d0: 6375 7269 7479 5f73 6368 656d 6573 2e75  curity_schemes.u
+000025e0: 7064 6174 6528 7365 6375 7269 7479 5f64  pdate(security_d
+000025f0: 6566 696e 6974 696f 6e73 290a 0a20 2020  efinitions)..   
+00002600: 2020 2020 2020 2020 2061 6c6c 5f72 6f75           all_rou
+00002610: 7465 5f70 6172 616d 7320 3d20 6765 745f  te_params = get_
+00002620: 666c 6174 5f70 6172 616d 7328 726f 7574  flat_params(rout
+00002630: 652e 6465 7065 6e64 616e 7429 0a20 2020  e.dependant).   
+00002640: 2020 2020 2020 2020 206f 7065 7261 7469           operati
+00002650: 6f6e 5f70 6172 616d 6574 6572 7320 3d20  on_parameters = 
+00002660: 6765 745f 7377 6167 6765 7232 5f6f 7065  get_swagger2_ope
+00002670: 7261 7469 6f6e 5f70 6172 616d 6574 6572  ration_parameter
+00002680: 7328 0a20 2020 2020 2020 2020 2020 2020  s(.             
+00002690: 2020 2061 6c6c 5f72 6f75 7465 5f70 6172     all_route_par
+000026a0: 616d 733d 616c 6c5f 726f 7574 655f 7061  ams=all_route_pa
+000026b0: 7261 6d73 2c20 6d6f 6465 6c5f 6e61 6d65  rams, model_name
+000026c0: 5f6d 6170 3d6d 6f64 656c 5f6e 616d 655f  _map=model_name_
+000026d0: 6d61 700a 2020 2020 2020 2020 2020 2020  map.            
+000026e0: 290a 2020 2020 2020 2020 2020 2020 7061  ).            pa
+000026f0: 7261 6d65 7465 7273 2e65 7874 656e 6428  rameters.extend(
+00002700: 6f70 6572 6174 696f 6e5f 7061 7261 6d65  operation_parame
+00002710: 7465 7273 290a 2020 2020 2020 2020 2020  ters).          
+00002720: 2020 6966 2070 6172 616d 6574 6572 733a    if parameters:
+00002730: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002740: 2061 6c6c 5f70 6172 616d 6574 6572 7320   all_parameters 
+00002750: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+00002760: 2020 2020 2020 2020 2870 6172 616d 5b22          (param["
+00002770: 696e 225d 2c20 7061 7261 6d5b 226e 616d  in"], param["nam
+00002780: 6522 5d29 3a20 7061 7261 6d20 666f 7220  e"]): param for 
+00002790: 7061 7261 6d20 696e 2070 6172 616d 6574  param in paramet
+000027a0: 6572 730a 2020 2020 2020 2020 2020 2020  ers.            
+000027b0: 2020 2020 7d0a 2020 2020 2020 2020 2020      }.          
+000027c0: 2020 2020 2020 7265 7175 6972 6564 5f70        required_p
+000027d0: 6172 616d 6574 6572 7320 3d20 7b0a 2020  arameters = {.  
+000027e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000027f0: 2020 2870 6172 616d 5b22 696e 225d 2c20    (param["in"], 
+00002800: 7061 7261 6d5b 226e 616d 6522 5d29 3a20  param["name"]): 
+00002810: 7061 7261 6d0a 2020 2020 2020 2020 2020  param.          
+00002820: 2020 2020 2020 2020 2020 666f 7220 7061            for pa
+00002830: 7261 6d20 696e 2070 6172 616d 6574 6572  ram in parameter
+00002840: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
+00002850: 2020 2020 2020 6966 2070 6172 616d 2e67        if param.g
+00002860: 6574 2822 7265 7175 6972 6564 2229 0a20  et("required"). 
+00002870: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+00002880: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002890: 2023 204d 616b 6520 7375 7265 2072 6571   # Make sure req
+000028a0: 7569 7265 6420 6465 6669 6e69 7469 6f6e  uired definition
+000028b0: 7320 6f66 2074 6865 2073 616d 6520 7061  s of the same pa
+000028c0: 7261 6d65 7465 7220 7461 6b65 2070 7265  rameter take pre
+000028d0: 6365 6465 6e63 650a 2020 2020 2020 2020  cedence.        
+000028e0: 2020 2020 2020 2020 2320 6f76 6572 206e          # over n
+000028f0: 6f6e 2d72 6571 7569 7265 6420 6465 6669  on-required defi
+00002900: 6e69 7469 6f6e 730a 2020 2020 2020 2020  nitions.        
+00002910: 2020 2020 2020 2020 616c 6c5f 7061 7261          all_para
+00002920: 6d65 7465 7273 2e75 7064 6174 6528 7265  meters.update(re
+00002930: 7175 6972 6564 5f70 6172 616d 6574 6572  quired_parameter
+00002940: 7329 0a0a 2020 2020 2020 2020 2020 2020  s)..            
+00002950: 2020 2020 6966 206d 6574 686f 6420 696e      if method in
+00002960: 204d 4554 484f 4453 5f57 4954 485f 424f   METHODS_WITH_BO
+00002970: 4459 3a0a 2020 2020 2020 2020 2020 2020  DY:.            
+00002980: 2020 2020 2020 2020 7265 7175 6573 745f          request_
+00002990: 626f 6479 5f6f 6169 203d 2067 6574 5f73  body_oai = get_s
+000029a0: 7761 6767 6572 325f 6f70 6572 6174 696f  wagger2_operatio
+000029b0: 6e5f 7265 7175 6573 745f 626f 6479 280a  n_request_body(.
+000029c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000029d0: 2020 2020 2020 2020 626f 6479 5f66 6965          body_fie
+000029e0: 6c64 3d72 6f75 7465 2e62 6f64 795f 6669  ld=route.body_fi
+000029f0: 656c 642c 206d 6f64 656c 5f6e 616d 655f  eld, model_name_
+00002a00: 6d61 703d 6d6f 6465 6c5f 6e61 6d65 5f6d  map=model_name_m
+00002a10: 6170 0a20 2020 2020 2020 2020 2020 2020  ap.             
+00002a20: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00002a30: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00002a40: 7265 7175 6573 745f 626f 6479 5f6f 6169  request_body_oai
+00002a50: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00002a60: 2020 2020 2020 2020 2020 616c 6c5f 7061            all_pa
+00002a70: 7261 6d65 7465 7273 2e75 7064 6174 6528  rameters.update(
+00002a80: 7b28 2262 6f64 7922 2c20 2262 6f64 7922  {("body", "body"
+00002a90: 293a 2072 6571 7565 7374 5f62 6f64 795f  ): request_body_
+00002aa0: 6f61 697d 290a 0a20 2020 2020 2020 2020  oai})..         
+00002ab0: 2020 2020 2020 206f 7065 7261 7469 6f6e         operation
+00002ac0: 5b22 7061 7261 6d65 7465 7273 225d 203d  ["parameters"] =
+00002ad0: 206c 6973 7428 616c 6c5f 7061 7261 6d65   list(all_parame
+00002ae0: 7465 7273 2e76 616c 7565 7328 2929 0a0a  ters.values())..
+00002af0: 2020 2020 2020 2020 2020 2020 6966 2072              if r
+00002b00: 6f75 7465 2e63 616c 6c62 6163 6b73 3a0a  oute.callbacks:.
+00002b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002b20: 6361 6c6c 6261 636b 7320 3d20 7b7d 0a20  callbacks = {}. 
+00002b30: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00002b40: 6f72 2063 616c 6c62 6163 6b20 696e 2072  or callback in r
+00002b50: 6f75 7465 2e63 616c 6c62 6163 6b73 3a0a  oute.callbacks:.
 00002b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002b70: 2020 2020 2062 6f64 795f 6669 656c 643d       body_field=
-00002b80: 726f 7574 652e 626f 6479 5f66 6965 6c64  route.body_field
-00002b90: 2c20 6d6f 6465 6c5f 6e61 6d65 5f6d 6170  , model_name_map
-00002ba0: 3d6d 6f64 656c 5f6e 616d 655f 6d61 700a  =model_name_map.
-00002bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002bc0: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
-00002bd0: 2020 2020 2020 2020 2020 6966 2072 6571            if req
-00002be0: 7565 7374 5f62 6f64 795f 6f61 693a 0a20  uest_body_oai:. 
-00002bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002c00: 2020 2020 2020 2061 6c6c 5f70 6172 616d         all_param
-00002c10: 6574 6572 732e 7570 6461 7465 287b 2822  eters.update({("
-00002c20: 626f 6479 222c 2022 626f 6479 2229 3a20  body", "body"): 
-00002c30: 7265 7175 6573 745f 626f 6479 5f6f 6169  request_body_oai
-00002c40: 7d29 0a0a 2020 2020 2020 2020 2020 2020  })..            
-00002c50: 2020 2020 6f70 6572 6174 696f 6e5b 2270      operation["p
-00002c60: 6172 616d 6574 6572 7322 5d20 3d20 6c69  arameters"] = li
-00002c70: 7374 2861 6c6c 5f70 6172 616d 6574 6572  st(all_parameter
-00002c80: 732e 7661 6c75 6573 2829 290a 0a20 2020  s.values())..   
-00002c90: 2020 2020 2020 2020 2069 6620 726f 7574           if rout
-00002ca0: 652e 6361 6c6c 6261 636b 733a 0a20 2020  e.callbacks:.   
-00002cb0: 2020 2020 2020 2020 2020 2020 2063 616c               cal
-00002cc0: 6c62 6163 6b73 203d 207b 7d0a 2020 2020  lbacks = {}.    
-00002cd0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00002ce0: 6361 6c6c 6261 636b 2069 6e20 726f 7574  callback in rout
-00002cf0: 652e 6361 6c6c 6261 636b 733a 0a20 2020  e.callbacks:.   
-00002d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002d10: 2069 6620 6973 696e 7374 616e 6365 2863   if isinstance(c
-00002d20: 616c 6c62 6163 6b2c 2072 6f75 7469 6e67  allback, routing
-00002d30: 2e41 5049 526f 7574 6529 3a0a 2020 2020  .APIRoute):.    
-00002d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002d50: 2020 2020 280a 2020 2020 2020 2020 2020      (.          
-00002d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002d70: 2020 6362 5f70 6174 682c 0a20 2020 2020    cb_path,.     
-00002d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002d90: 2020 2020 2020 2063 625f 7365 6375 7269         cb_securi
-00002da0: 7479 5f73 6368 656d 6573 2c0a 2020 2020  ty_schemes,.    
-00002db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002dc0: 2020 2020 2020 2020 6362 5f64 6566 696e          cb_defin
-00002dd0: 6974 696f 6e73 2c0a 2020 2020 2020 2020  itions,.        
-00002de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002df0: 2920 3d20 6765 745f 7377 6167 6765 7232  ) = get_swagger2
-00002e00: 5f70 6174 6828 0a20 2020 2020 2020 2020  _path(.         
-00002e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002e20: 2020 2072 6f75 7465 3d63 616c 6c62 6163     route=callbac
-00002e30: 6b2c 0a20 2020 2020 2020 2020 2020 2020  k,.             
-00002e40: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-00002e50: 6f64 656c 5f6e 616d 655f 6d61 703d 6d6f  odel_name_map=mo
-00002e60: 6465 6c5f 6e61 6d65 5f6d 6170 2c0a 2020  del_name_map,.  
-00002e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002e80: 2020 2020 2020 2020 2020 6f70 6572 6174            operat
-00002e90: 696f 6e5f 6964 733d 6f70 6572 6174 696f  ion_ids=operatio
-00002ea0: 6e5f 6964 732c 0a20 2020 2020 2020 2020  n_ids,.         
-00002eb0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00002ec0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002ed0: 2020 2020 2020 2020 2063 616c 6c62 6163           callbac
-00002ee0: 6b73 5b63 616c 6c62 6163 6b2e 6e61 6d65  ks[callback.name
-00002ef0: 5d20 3d20 7b63 616c 6c62 6163 6b2e 7061  ] = {callback.pa
-00002f00: 7468 3a20 6362 5f70 6174 687d 0a20 2020  th: cb_path}.   
-00002f10: 2020 2020 2020 2020 2020 2020 206f 7065               ope
-00002f20: 7261 7469 6f6e 5b22 6361 6c6c 6261 636b  ration["callback
-00002f30: 7322 5d20 3d20 6361 6c6c 6261 636b 730a  s"] = callbacks.
-00002f40: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00002f50: 726f 7574 652e 7374 6174 7573 5f63 6f64  route.status_cod
-00002f60: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
-00002f70: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00002f80: 7461 7475 735f 636f 6465 203d 2073 7472  tatus_code = str
-00002f90: 2872 6f75 7465 2e73 7461 7475 735f 636f  (route.status_co
-00002fa0: 6465 290a 2020 2020 2020 2020 2020 2020  de).            
-00002fb0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00002fc0: 2020 2020 2020 2320 4974 2077 6f75 6c64        # It would
-00002fd0: 2070 726f 6261 626c 7920 6d61 6b65 206d   probably make m
-00002fe0: 6f72 6520 7365 6e73 6520 666f 7220 616c  ore sense for al
-00002ff0: 6c20 7265 7370 6f6e 7365 2063 6c61 7373  l response class
-00003000: 6573 2074 6f20 6861 7665 2061 6e0a 2020  es to have an.  
-00003010: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00003020: 6578 706c 6963 6974 2064 6566 6175 6c74  explicit default
-00003030: 2073 7461 7475 735f 636f 6465 2c20 616e   status_code, an
-00003040: 6420 746f 2065 7874 7261 6374 2069 7420  d to extract it 
-00003050: 6672 6f6d 2074 6865 6d2c 2069 6e73 7465  from them, inste
-00003060: 6164 206f 660a 2020 2020 2020 2020 2020  ad of.          
-00003070: 2020 2020 2020 2320 646f 696e 6720 7468        # doing th
-00003080: 6973 2069 6e73 7065 6374 696f 6e20 7472  is inspection tr
-00003090: 6963 6b73 2c20 7468 6174 2077 6f75 6c64  icks, that would
-000030a0: 2070 726f 6261 626c 7920 6265 2069 6e20   probably be in 
-000030b0: 7468 6520 6675 7475 7265 0a20 2020 2020  the future.     
-000030c0: 2020 2020 2020 2020 2020 2023 2054 4f44             # TOD
-000030d0: 4f3a 2070 726f 6261 626c 7920 6d61 6b65  O: probably make
-000030e0: 2073 7461 7475 735f 636f 6465 2061 2064   status_code a d
-000030f0: 6566 6175 6c74 2063 6c61 7373 2061 7474  efault class att
-00003100: 7269 6275 7465 2066 6f72 2061 6c6c 0a20  ribute for all. 
-00003110: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00003120: 2072 6573 706f 6e73 6573 2069 6e20 5374   responses in St
-00003130: 6172 6c65 7474 650a 2020 2020 2020 2020  arlette.        
-00003140: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
-00003150: 5f73 6967 6e61 7475 7265 203d 2069 6e73  _signature = ins
-00003160: 7065 6374 2e73 6967 6e61 7475 7265 2863  pect.signature(c
-00003170: 7572 7265 6e74 5f72 6573 706f 6e73 655f  urrent_response_
-00003180: 636c 6173 732e 5f5f 696e 6974 5f5f 290a  class.__init__).
-00003190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000031a0: 7374 6174 7573 5f63 6f64 655f 7061 7261  status_code_para
-000031b0: 6d20 3d20 7265 7370 6f6e 7365 5f73 6967  m = response_sig
-000031c0: 6e61 7475 7265 2e70 6172 616d 6574 6572  nature.parameter
-000031d0: 732e 6765 7428 2273 7461 7475 735f 636f  s.get("status_co
-000031e0: 6465 2229 0a20 2020 2020 2020 2020 2020  de").           
-000031f0: 2020 2020 2069 6620 7374 6174 7573 5f63       if status_c
-00003200: 6f64 655f 7061 7261 6d20 6973 206e 6f74  ode_param is not
-00003210: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00003220: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-00003230: 696e 7374 616e 6365 2873 7461 7475 735f  instance(status_
-00003240: 636f 6465 5f70 6172 616d 2e64 6566 6175  code_param.defau
-00003250: 6c74 2c20 696e 7429 3a0a 2020 2020 2020  lt, int):.      
-00003260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003270: 2020 7374 6174 7573 5f63 6f64 6520 3d20    status_code = 
-00003280: 7374 7228 7374 6174 7573 5f63 6f64 655f  str(status_code_
-00003290: 7061 7261 6d2e 6465 6661 756c 7429 0a20  param.default). 
-000032a0: 2020 2020 2020 2020 2020 206f 7065 7261             opera
-000032b0: 7469 6f6e 2e73 6574 6465 6661 756c 7428  tion.setdefault(
-000032c0: 2272 6573 706f 6e73 6573 222c 207b 7d29  "responses", {})
-000032d0: 2e73 6574 6465 6661 756c 7428 7374 6174  .setdefault(stat
-000032e0: 7573 5f63 6f64 652c 207b 7d29 5b0a 2020  us_code, {})[.  
-000032f0: 2020 2020 2020 2020 2020 2020 2020 2264                "d
-00003300: 6573 6372 6970 7469 6f6e 220a 2020 2020  escription".    
-00003310: 2020 2020 2020 2020 5d20 3d20 726f 7574          ] = rout
-00003320: 652e 7265 7370 6f6e 7365 5f64 6573 6372  e.response_descr
-00003330: 6970 7469 6f6e 0a0a 2020 2020 2020 2020  iption..        
-00003340: 2020 2020 6966 2072 6f75 7465 5f72 6573      if route_res
-00003350: 706f 6e73 655f 6d65 6469 615f 7479 7065  ponse_media_type
-00003360: 2061 6e64 2069 735f 626f 6479 5f61 6c6c   and is_body_all
-00003370: 6f77 6564 5f66 6f72 5f73 7461 7475 735f  owed_for_status_
-00003380: 636f 6465 280a 2020 2020 2020 2020 2020  code(.          
-00003390: 2020 2020 2020 726f 7574 652e 7374 6174        route.stat
-000033a0: 7573 5f63 6f64 650a 2020 2020 2020 2020  us_code.        
-000033b0: 2020 2020 293a 0a20 2020 2020 2020 2020      ):.         
-000033c0: 2020 2020 2020 2072 6573 706f 6e73 655f         response_
-000033d0: 7363 6865 6d61 203d 207b 2274 7970 6522  schema = {"type"
-000033e0: 3a20 2273 7472 696e 6722 7d0a 2020 2020  : "string"}.    
-000033f0: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-00003400: 656e 6965 6e74 5f69 7373 7562 636c 6173  enient_issubclas
-00003410: 7328 6375 7272 656e 745f 7265 7370 6f6e  s(current_respon
-00003420: 7365 5f63 6c61 7373 2c20 4a53 4f4e 5265  se_class, JSONRe
-00003430: 7370 6f6e 7365 293a 0a20 2020 2020 2020  sponse):.       
-00003440: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00003450: 726f 7574 652e 7265 7370 6f6e 7365 5f66  route.response_f
-00003460: 6965 6c64 3a0a 2020 2020 2020 2020 2020  ield:.          
-00003470: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00003480: 7370 6f6e 7365 5f73 6368 656d 612c 205f  sponse_schema, _
-00003490: 2c20 5f20 3d20 6669 656c 645f 7363 6865  , _ = field_sche
-000034a0: 6d61 280a 2020 2020 2020 2020 2020 2020  ma(.            
-000034b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000034c0: 726f 7574 652e 7265 7370 6f6e 7365 5f66  route.response_f
-000034d0: 6965 6c64 2c0a 2020 2020 2020 2020 2020  ield,.          
-000034e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000034f0: 2020 6d6f 6465 6c5f 6e61 6d65 5f6d 6170    model_name_map
-00003500: 3d6d 6f64 656c 5f6e 616d 655f 6d61 702c  =model_name_map,
-00003510: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003520: 2020 2020 2020 2020 2020 2020 2072 6566               ref
-00003530: 5f70 7265 6669 783d 5245 465f 5052 4546  _prefix=REF_PREF
-00003540: 4958 2c0a 2020 2020 2020 2020 2020 2020  IX,.            
-00003550: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+00002b70: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00002b80: 6528 6361 6c6c 6261 636b 2c20 726f 7574  e(callback, rout
+00002b90: 696e 672e 4150 4952 6f75 7465 293a 0a20  ing.APIRoute):. 
+00002ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002bb0: 2020 2020 2020 2028 0a20 2020 2020 2020         (.       
+00002bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002bd0: 2020 2020 2063 625f 7061 7468 2c0a 2020       cb_path,.  
+00002be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002bf0: 2020 2020 2020 2020 2020 6362 5f73 6563            cb_sec
+00002c00: 7572 6974 795f 7363 6865 6d65 732c 0a20  urity_schemes,. 
+00002c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002c20: 2020 2020 2020 2020 2020 2063 625f 6465             cb_de
+00002c30: 6669 6e69 7469 6f6e 732c 0a20 2020 2020  finitions,.     
+00002c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002c50: 2020 2029 203d 2067 6574 5f73 7761 6767     ) = get_swagg
+00002c60: 6572 325f 7061 7468 280a 2020 2020 2020  er2_path(.      
+00002c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002c80: 2020 2020 2020 726f 7574 653d 6361 6c6c        route=call
+00002c90: 6261 636b 2c0a 2020 2020 2020 2020 2020  back,.          
+00002ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002cb0: 2020 6d6f 6465 6c5f 6e61 6d65 5f6d 6170    model_name_map
+00002cc0: 3d6d 6f64 656c 5f6e 616d 655f 6d61 702c  =model_name_map,
+00002cd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002ce0: 2020 2020 2020 2020 2020 2020 206f 7065               ope
+00002cf0: 7261 7469 6f6e 5f69 6473 3d6f 7065 7261  ration_ids=opera
+00002d00: 7469 6f6e 5f69 6473 2c0a 2020 2020 2020  tion_ids,.      
+00002d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002d20: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+00002d30: 2020 2020 2020 2020 2020 2020 6361 6c6c              call
+00002d40: 6261 636b 735b 6361 6c6c 6261 636b 2e6e  backs[callback.n
+00002d50: 616d 655d 203d 207b 6361 6c6c 6261 636b  ame] = {callback
+00002d60: 2e70 6174 683a 2063 625f 7061 7468 7d0a  .path: cb_path}.
+00002d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002d80: 6f70 6572 6174 696f 6e5b 2263 616c 6c62  operation["callb
+00002d90: 6163 6b73 225d 203d 2063 616c 6c62 6163  acks"] = callbac
+00002da0: 6b73 0a0a 2020 2020 2020 2020 2020 2020  ks..            
+00002db0: 6966 2072 6f75 7465 2e73 7461 7475 735f  if route.status_
+00002dc0: 636f 6465 2069 7320 6e6f 7420 4e6f 6e65  code is not None
+00002dd0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00002de0: 2020 7374 6174 7573 5f63 6f64 6520 3d20    status_code = 
+00002df0: 7374 7228 726f 7574 652e 7374 6174 7573  str(route.status
+00002e00: 5f63 6f64 6529 0a20 2020 2020 2020 2020  _code).         
+00002e10: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00002e20: 2020 2020 2020 2020 2023 2049 7420 776f           # It wo
+00002e30: 756c 6420 7072 6f62 6162 6c79 206d 616b  uld probably mak
+00002e40: 6520 6d6f 7265 2073 656e 7365 2066 6f72  e more sense for
+00002e50: 2061 6c6c 2072 6573 706f 6e73 6520 636c   all response cl
+00002e60: 6173 7365 7320 746f 2068 6176 6520 616e  asses to have an
+00002e70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002e80: 2023 2065 7870 6c69 6369 7420 6465 6661   # explicit defa
+00002e90: 756c 7420 7374 6174 7573 5f63 6f64 652c  ult status_code,
+00002ea0: 2061 6e64 2074 6f20 6578 7472 6163 7420   and to extract 
+00002eb0: 6974 2066 726f 6d20 7468 656d 2c20 696e  it from them, in
+00002ec0: 7374 6561 6420 6f66 0a20 2020 2020 2020  stead of.       
+00002ed0: 2020 2020 2020 2020 2023 2064 6f69 6e67           # doing
+00002ee0: 2074 6869 7320 696e 7370 6563 7469 6f6e   this inspection
+00002ef0: 2074 7269 636b 732c 2074 6861 7420 776f   tricks, that wo
+00002f00: 756c 6420 7072 6f62 6162 6c79 2062 6520  uld probably be 
+00002f10: 696e 2074 6865 2066 7574 7572 650a 2020  in the future.  
+00002f20: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00002f30: 544f 444f 3a20 7072 6f62 6162 6c79 206d  TODO: probably m
+00002f40: 616b 6520 7374 6174 7573 5f63 6f64 6520  ake status_code 
+00002f50: 6120 6465 6661 756c 7420 636c 6173 7320  a default class 
+00002f60: 6174 7472 6962 7574 6520 666f 7220 616c  attribute for al
+00002f70: 6c0a 2020 2020 2020 2020 2020 2020 2020  l.              
+00002f80: 2020 2320 7265 7370 6f6e 7365 7320 696e    # responses in
+00002f90: 2053 7461 726c 6574 7465 0a20 2020 2020   Starlette.     
+00002fa0: 2020 2020 2020 2020 2020 2072 6573 706f             respo
+00002fb0: 6e73 655f 7369 676e 6174 7572 6520 3d20  nse_signature = 
+00002fc0: 696e 7370 6563 742e 7369 676e 6174 7572  inspect.signatur
+00002fd0: 6528 6375 7272 656e 745f 7265 7370 6f6e  e(current_respon
+00002fe0: 7365 5f63 6c61 7373 2e5f 5f69 6e69 745f  se_class.__init_
+00002ff0: 5f29 0a20 2020 2020 2020 2020 2020 2020  _).             
+00003000: 2020 2073 7461 7475 735f 636f 6465 5f70     status_code_p
+00003010: 6172 616d 203d 2072 6573 706f 6e73 655f  aram = response_
+00003020: 7369 676e 6174 7572 652e 7061 7261 6d65  signature.parame
+00003030: 7465 7273 2e67 6574 2822 7374 6174 7573  ters.get("status
+00003040: 5f63 6f64 6522 290a 2020 2020 2020 2020  _code").        
+00003050: 2020 2020 2020 2020 6966 2073 7461 7475          if statu
+00003060: 735f 636f 6465 5f70 6172 616d 2069 7320  s_code_param is 
+00003070: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00003080: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00003090: 2069 7369 6e73 7461 6e63 6528 7374 6174   isinstance(stat
+000030a0: 7573 5f63 6f64 655f 7061 7261 6d2e 6465  us_code_param.de
+000030b0: 6661 756c 742c 2069 6e74 293a 0a20 2020  fault, int):.   
+000030c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000030d0: 2020 2020 2073 7461 7475 735f 636f 6465       status_code
+000030e0: 203d 2073 7472 2873 7461 7475 735f 636f   = str(status_co
+000030f0: 6465 5f70 6172 616d 2e64 6566 6175 6c74  de_param.default
+00003100: 290a 2020 2020 2020 2020 2020 2020 6f70  ).            op
+00003110: 6572 6174 696f 6e2e 7365 7464 6566 6175  eration.setdefau
+00003120: 6c74 2822 7265 7370 6f6e 7365 7322 2c20  lt("responses", 
+00003130: 7b7d 292e 7365 7464 6566 6175 6c74 2873  {}).setdefault(s
+00003140: 7461 7475 735f 636f 6465 2c20 7b7d 295b  tatus_code, {})[
+00003150: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003160: 2022 6465 7363 7269 7074 696f 6e22 0a20   "description". 
+00003170: 2020 2020 2020 2020 2020 205d 203d 2072             ] = r
+00003180: 6f75 7465 2e72 6573 706f 6e73 655f 6465  oute.response_de
+00003190: 7363 7269 7074 696f 6e0a 0a20 2020 2020  scription..     
+000031a0: 2020 2020 2020 2069 6620 726f 7574 655f         if route_
+000031b0: 7265 7370 6f6e 7365 5f6d 6564 6961 5f74  response_media_t
+000031c0: 7970 6520 616e 6420 6973 5f62 6f64 795f  ype and is_body_
+000031d0: 616c 6c6f 7765 645f 666f 725f 7374 6174  allowed_for_stat
+000031e0: 7573 5f63 6f64 6528 0a20 2020 2020 2020  us_code(.       
+000031f0: 2020 2020 2020 2020 2072 6f75 7465 2e73           route.s
+00003200: 7461 7475 735f 636f 6465 0a20 2020 2020  tatus_code.     
+00003210: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
+00003220: 2020 2020 2020 2020 2020 7265 7370 6f6e            respon
+00003230: 7365 5f73 6368 656d 6120 3d20 7b22 7479  se_schema = {"ty
+00003240: 7065 223a 2022 7374 7269 6e67 227d 0a20  pe": "string"}. 
+00003250: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00003260: 6620 6c65 6e69 656e 745f 6973 7375 6263  f lenient_issubc
+00003270: 6c61 7373 2863 7572 7265 6e74 5f72 6573  lass(current_res
+00003280: 706f 6e73 655f 636c 6173 732c 204a 534f  ponse_class, JSO
+00003290: 4e52 6573 706f 6e73 6529 3a0a 2020 2020  NResponse):.    
+000032a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000032b0: 6966 2072 6f75 7465 2e72 6573 706f 6e73  if route.respons
+000032c0: 655f 6669 656c 643a 0a20 2020 2020 2020  e_field:.       
+000032d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000032e0: 2072 6573 706f 6e73 655f 7363 6865 6d61   response_schema
+000032f0: 2c20 5f2c 205f 203d 2066 6965 6c64 5f73  , _, _ = field_s
+00003300: 6368 656d 6128 0a20 2020 2020 2020 2020  chema(.         
+00003310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003320: 2020 2072 6f75 7465 2e72 6573 706f 6e73     route.respons
+00003330: 655f 6669 656c 642c 0a20 2020 2020 2020  e_field,.       
+00003340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003350: 2020 2020 206d 6f64 656c 5f6e 616d 655f       model_name_
+00003360: 6d61 703d 6d6f 6465 6c5f 6e61 6d65 5f6d  map=model_name_m
+00003370: 6170 2c0a 2020 2020 2020 2020 2020 2020  ap,.            
+00003380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003390: 7265 665f 7072 6566 6978 3d52 4546 5f50  ref_prefix=REF_P
+000033a0: 5245 4649 582c 0a20 2020 2020 2020 2020  REFIX,.         
+000033b0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+000033c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000033d0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+000033e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000033f0: 2020 2072 6573 706f 6e73 655f 7363 6865     response_sche
+00003400: 6d61 203d 207b 7d0a 2020 2020 2020 2020  ma = {}.        
+00003410: 2020 2020 2020 2020 6f70 6572 6174 696f          operatio
+00003420: 6e2e 7365 7464 6566 6175 6c74 2822 7265  n.setdefault("re
+00003430: 7370 6f6e 7365 7322 2c20 7b7d 292e 7365  sponses", {}).se
+00003440: 7464 6566 6175 6c74 2873 7461 7475 735f  tdefault(status_
+00003450: 636f 6465 2c20 7b7d 295b 0a20 2020 2020  code, {})[.     
+00003460: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00003470: 7363 6865 6d61 220a 2020 2020 2020 2020  schema".        
+00003480: 2020 2020 2020 2020 5d20 3d20 7265 7370          ] = resp
+00003490: 6f6e 7365 5f73 6368 656d 610a 2020 2020  onse_schema.    
+000034a0: 2020 2020 2020 2020 2020 2020 6f70 6572              oper
+000034b0: 6174 696f 6e2e 7365 7464 6566 6175 6c74  ation.setdefault
+000034c0: 2822 7072 6f64 7563 6573 222c 205b 5d29  ("produces", [])
+000034d0: 2e61 7070 656e 6428 726f 7574 655f 7265  .append(route_re
+000034e0: 7370 6f6e 7365 5f6d 6564 6961 5f74 7970  sponse_media_typ
+000034f0: 6529 0a0a 2020 2020 2020 2020 2020 2020  e)..            
+00003500: 6966 2072 6f75 7465 2e72 6573 706f 6e73  if route.respons
+00003510: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
+00003520: 2020 2020 6f70 6572 6174 696f 6e5f 7265      operation_re
+00003530: 7370 6f6e 7365 7320 3d20 6f70 6572 6174  sponses = operat
+00003540: 696f 6e2e 7365 7464 6566 6175 6c74 2822  ion.setdefault("
+00003550: 7265 7370 6f6e 7365 7322 2c20 7b7d 290a  responses", {}).
 00003560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003570: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00003580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003590: 7265 7370 6f6e 7365 5f73 6368 656d 6120  response_schema 
-000035a0: 3d20 7b7d 0a20 2020 2020 2020 2020 2020  = {}.           
-000035b0: 2020 2020 206f 7065 7261 7469 6f6e 2e73       operation.s
-000035c0: 6574 6465 6661 756c 7428 2272 6573 706f  etdefault("respo
-000035d0: 6e73 6573 222c 207b 7d29 2e73 6574 6465  nses", {}).setde
-000035e0: 6661 756c 7428 7374 6174 7573 5f63 6f64  fault(status_cod
-000035f0: 652c 207b 7d29 5b0a 2020 2020 2020 2020  e, {})[.        
-00003600: 2020 2020 2020 2020 2020 2020 2273 6368              "sch
-00003610: 656d 6122 0a20 2020 2020 2020 2020 2020  ema".           
-00003620: 2020 2020 205d 203d 2072 6573 706f 6e73       ] = respons
-00003630: 655f 7363 6865 6d61 0a20 2020 2020 2020  e_schema.       
-00003640: 2020 2020 2020 2020 206f 7065 7261 7469           operati
-00003650: 6f6e 2e73 6574 6465 6661 756c 7428 2270  on.setdefault("p
-00003660: 726f 6475 6365 7322 2c20 5b5d 292e 6170  roduces", []).ap
-00003670: 7065 6e64 2872 6f75 7465 5f72 6573 706f  pend(route_respo
-00003680: 6e73 655f 6d65 6469 615f 7479 7065 290a  nse_media_type).
-00003690: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000036a0: 726f 7574 652e 7265 7370 6f6e 7365 733a  route.responses:
-000036b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000036c0: 206f 7065 7261 7469 6f6e 5f72 6573 706f   operation_respo
-000036d0: 6e73 6573 203d 206f 7065 7261 7469 6f6e  nses = operation
-000036e0: 2e73 6574 6465 6661 756c 7428 2272 6573  .setdefault("res
-000036f0: 706f 6e73 6573 222c 207b 7d29 0a20 2020  ponses", {}).   
-00003700: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-00003710: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
-00003720: 2020 2020 2020 2061 6464 6974 696f 6e61         additiona
-00003730: 6c5f 7374 6174 7573 5f63 6f64 652c 0a20  l_status_code,. 
-00003740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003750: 2020 2061 6464 6974 696f 6e61 6c5f 7265     additional_re
-00003760: 7370 6f6e 7365 2c0a 2020 2020 2020 2020  sponse,.        
-00003770: 2020 2020 2020 2020 2920 696e 2072 6f75          ) in rou
-00003780: 7465 2e72 6573 706f 6e73 6573 2e69 7465  te.responses.ite
-00003790: 6d73 2829 3a0a 2020 2020 2020 2020 2020  ms():.          
-000037a0: 2020 2020 2020 2020 2020 7072 6f63 6573            proces
-000037b0: 735f 7265 7370 6f6e 7365 203d 2061 6464  s_response = add
-000037c0: 6974 696f 6e61 6c5f 7265 7370 6f6e 7365  itional_response
-000037d0: 2e63 6f70 7928 290a 2020 2020 2020 2020  .copy().        
-000037e0: 2020 2020 2020 2020 2020 2020 7072 6f63              proc
-000037f0: 6573 735f 7265 7370 6f6e 7365 2e70 6f70  ess_response.pop
-00003800: 2822 6d6f 6465 6c22 2c20 4e6f 6e65 290a  ("model", None).
-00003810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003820: 2020 2020 7374 6174 7573 5f63 6f64 655f      status_code_
-00003830: 6b65 7920 3d20 7374 7228 6164 6469 7469  key = str(additi
-00003840: 6f6e 616c 5f73 7461 7475 735f 636f 6465  onal_status_code
-00003850: 292e 7570 7065 7228 290a 2020 2020 2020  ).upper().      
-00003860: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00003870: 2073 7461 7475 735f 636f 6465 5f6b 6579   status_code_key
-00003880: 203d 3d20 2244 4546 4155 4c54 223a 0a20   == "DEFAULT":. 
-00003890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000038a0: 2020 2020 2020 2073 7461 7475 735f 636f         status_co
-000038b0: 6465 5f6b 6579 203d 2022 6465 6661 756c  de_key = "defaul
-000038c0: 7422 0a20 2020 2020 2020 2020 2020 2020  t".             
-000038d0: 2020 2020 2020 206f 7065 6e61 7069 5f72         openapi_r
-000038e0: 6573 706f 6e73 6520 3d20 6f70 6572 6174  esponse = operat
-000038f0: 696f 6e5f 7265 7370 6f6e 7365 732e 7365  ion_responses.se
-00003900: 7464 6566 6175 6c74 280a 2020 2020 2020  tdefault(.      
-00003910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003920: 2020 7374 6174 7573 5f63 6f64 655f 6b65    status_code_ke
-00003930: 792c 207b 7d0a 2020 2020 2020 2020 2020  y, {}.          
-00003940: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-00003950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003960: 6173 7365 7274 2069 7369 6e73 7461 6e63  assert isinstanc
-00003970: 6528 0a20 2020 2020 2020 2020 2020 2020  e(.             
-00003980: 2020 2020 2020 2020 2020 2070 726f 6365             proce
-00003990: 7373 5f72 6573 706f 6e73 652c 2064 6963  ss_response, dic
-000039a0: 740a 2020 2020 2020 2020 2020 2020 2020  t.              
-000039b0: 2020 2020 2020 292c 2022 416e 2061 6464        ), "An add
-000039c0: 6974 696f 6e61 6c20 7265 7370 6f6e 7365  itional response
-000039d0: 206d 7573 7420 6265 2061 2064 6963 7422   must be a dict"
-000039e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000039f0: 2020 2020 2066 6965 6c64 203d 2072 6f75       field = rou
-00003a00: 7465 2e72 6573 706f 6e73 655f 6669 656c  te.response_fiel
-00003a10: 6473 2e67 6574 2861 6464 6974 696f 6e61  ds.get(additiona
-00003a20: 6c5f 7374 6174 7573 5f63 6f64 6529 0a20  l_status_code). 
-00003a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003a40: 2020 2061 6464 6974 696f 6e61 6c5f 6669     additional_fi
-00003a50: 656c 645f 7363 6865 6d61 3a20 4f70 7469  eld_schema: Opti
-00003a60: 6f6e 616c 5b44 6963 745b 7374 722c 2041  onal[Dict[str, A
-00003a70: 6e79 5d5d 203d 204e 6f6e 650a 2020 2020  ny]] = None.    
-00003a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003a90: 6966 2066 6965 6c64 3a0a 2020 2020 2020  if field:.      
-00003aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003ab0: 2020 6164 6469 7469 6f6e 616c 5f66 6965    additional_fie
-00003ac0: 6c64 5f73 6368 656d 612c 205f 2c20 5f20  ld_schema, _, _ 
-00003ad0: 3d20 6669 656c 645f 7363 6865 6d61 280a  = field_schema(.
-00003ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003af0: 2020 2020 2020 2020 2020 2020 6669 656c              fiel
-00003b00: 642c 206d 6f64 656c 5f6e 616d 655f 6d61  d, model_name_ma
-00003b10: 703d 6d6f 6465 6c5f 6e61 6d65 5f6d 6170  p=model_name_map
-00003b20: 2c20 7265 665f 7072 6566 6978 3d52 4546  , ref_prefix=REF
-00003b30: 5f50 5245 4649 580a 2020 2020 2020 2020  _PREFIX.        
+00003570: 666f 7220 280a 2020 2020 2020 2020 2020  for (.          
+00003580: 2020 2020 2020 2020 2020 6164 6469 7469            additi
+00003590: 6f6e 616c 5f73 7461 7475 735f 636f 6465  onal_status_code
+000035a0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000035b0: 2020 2020 2020 6164 6469 7469 6f6e 616c        additional
+000035c0: 5f72 6573 706f 6e73 652c 0a20 2020 2020  _response,.     
+000035d0: 2020 2020 2020 2020 2020 2029 2069 6e20             ) in 
+000035e0: 726f 7574 652e 7265 7370 6f6e 7365 732e  route.responses.
+000035f0: 6974 656d 7328 293a 0a20 2020 2020 2020  items():.       
+00003600: 2020 2020 2020 2020 2020 2020 2070 726f               pro
+00003610: 6365 7373 5f72 6573 706f 6e73 6520 3d20  cess_response = 
+00003620: 6164 6469 7469 6f6e 616c 5f72 6573 706f  additional_respo
+00003630: 6e73 652e 636f 7079 2829 0a20 2020 2020  nse.copy().     
+00003640: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00003650: 726f 6365 7373 5f72 6573 706f 6e73 652e  rocess_response.
+00003660: 706f 7028 226d 6f64 656c 222c 204e 6f6e  pop("model", Non
+00003670: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
+00003680: 2020 2020 2020 2073 7461 7475 735f 636f         status_co
+00003690: 6465 5f6b 6579 203d 2073 7472 2861 6464  de_key = str(add
+000036a0: 6974 696f 6e61 6c5f 7374 6174 7573 5f63  itional_status_c
+000036b0: 6f64 6529 2e75 7070 6572 2829 0a20 2020  ode).upper().   
+000036c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000036d0: 2069 6620 7374 6174 7573 5f63 6f64 655f   if status_code_
+000036e0: 6b65 7920 3d3d 2022 4445 4641 554c 5422  key == "DEFAULT"
+000036f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00003700: 2020 2020 2020 2020 2020 7374 6174 7573            status
+00003710: 5f63 6f64 655f 6b65 7920 3d20 2264 6566  _code_key = "def
+00003720: 6175 6c74 220a 2020 2020 2020 2020 2020  ault".          
+00003730: 2020 2020 2020 2020 2020 6f70 656e 6170            openap
+00003740: 695f 7265 7370 6f6e 7365 203d 206f 7065  i_response = ope
+00003750: 7261 7469 6f6e 5f72 6573 706f 6e73 6573  ration_responses
+00003760: 2e73 6574 6465 6661 756c 7428 0a20 2020  .setdefault(.   
+00003770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003780: 2020 2020 2073 7461 7475 735f 636f 6465       status_code
+00003790: 5f6b 6579 2c20 7b7d 0a20 2020 2020 2020  _key, {}.       
+000037a0: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
+000037b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000037c0: 2020 2061 7373 6572 7420 6973 696e 7374     assert isinst
+000037d0: 616e 6365 280a 2020 2020 2020 2020 2020  ance(.          
+000037e0: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+000037f0: 6f63 6573 735f 7265 7370 6f6e 7365 2c20  ocess_response, 
+00003800: 6469 6374 0a20 2020 2020 2020 2020 2020  dict.           
+00003810: 2020 2020 2020 2020 2029 2c20 2241 6e20           ), "An 
+00003820: 6164 6469 7469 6f6e 616c 2072 6573 706f  additional respo
+00003830: 6e73 6520 6d75 7374 2062 6520 6120 6469  nse must be a di
+00003840: 6374 220a 2020 2020 2020 2020 2020 2020  ct".            
+00003850: 2020 2020 2020 2020 6669 656c 6420 3d20          field = 
+00003860: 726f 7574 652e 7265 7370 6f6e 7365 5f66  route.response_f
+00003870: 6965 6c64 732e 6765 7428 6164 6469 7469  ields.get(additi
+00003880: 6f6e 616c 5f73 7461 7475 735f 636f 6465  onal_status_code
+00003890: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000038a0: 2020 2020 2020 6164 6469 7469 6f6e 616c        additional
+000038b0: 5f66 6965 6c64 5f73 6368 656d 613a 204f  _field_schema: O
+000038c0: 7074 696f 6e61 6c5b 4469 6374 5b73 7472  ptional[Dict[str
+000038d0: 2c20 416e 795d 5d20 3d20 4e6f 6e65 0a20  , Any]] = None. 
+000038e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000038f0: 2020 2069 6620 6669 656c 643a 0a20 2020     if field:.   
+00003900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003910: 2020 2020 2061 6464 6974 696f 6e61 6c5f       additional_
+00003920: 6669 656c 645f 7363 6865 6d61 2c20 5f2c  field_schema, _,
+00003930: 205f 203d 2066 6965 6c64 5f73 6368 656d   _ = field_schem
+00003940: 6128 0a20 2020 2020 2020 2020 2020 2020  a(.             
+00003950: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00003960: 6965 6c64 2c20 6d6f 6465 6c5f 6e61 6d65  ield, model_name
+00003970: 5f6d 6170 3d6d 6f64 656c 5f6e 616d 655f  _map=model_name_
+00003980: 6d61 702c 2072 6566 5f70 7265 6669 783d  map, ref_prefix=
+00003990: 5245 465f 5052 4546 4958 0a20 2020 2020  REF_PREFIX.     
+000039a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000039b0: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+000039c0: 2020 2020 2020 2020 2020 2020 2023 206d               # m
+000039d0: 6564 6961 5f74 7970 6520 3d20 726f 7574  edia_type = rout
+000039e0: 655f 7265 7370 6f6e 7365 5f6d 6564 6961  e_response_media
+000039f0: 5f74 7970 6520 6f72 2022 6170 706c 6963  _type or "applic
+00003a00: 6174 696f 6e2f 6a73 6f6e 220a 2020 2020  ation/json".    
+00003a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003a20: 2020 2020 6164 6469 7469 6f6e 616c 5f73      additional_s
+00003a30: 6368 656d 6120 3d20 7072 6f63 6573 735f  chema = process_
+00003a40: 7265 7370 6f6e 7365 2e73 6574 6465 6661  response.setdefa
+00003a50: 756c 7428 2273 6368 656d 6122 2c20 7b7d  ult("schema", {}
+00003a60: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00003a70: 2020 2020 2020 2020 2020 6465 6570 5f64            deep_d
+00003a80: 6963 745f 7570 6461 7465 2861 6464 6974  ict_update(addit
+00003a90: 696f 6e61 6c5f 7363 6865 6d61 2c20 6164  ional_schema, ad
+00003aa0: 6469 7469 6f6e 616c 5f66 6965 6c64 5f73  ditional_field_s
+00003ab0: 6368 656d 6129 0a20 2020 2020 2020 2020  chema).         
+00003ac0: 2020 2020 2020 2020 2020 2073 7461 7475             statu
+00003ad0: 735f 7465 7874 3a20 4f70 7469 6f6e 616c  s_text: Optional
+00003ae0: 5b73 7472 5d20 3d20 7374 6174 7573 5f63  [str] = status_c
+00003af0: 6f64 655f 7261 6e67 6573 2e67 6574 280a  ode_ranges.get(.
+00003b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003b10: 2020 2020 2020 2020 7374 7228 6164 6469          str(addi
+00003b20: 7469 6f6e 616c 5f73 7461 7475 735f 636f  tional_status_co
+00003b30: 6465 292e 7570 7065 7228 290a 2020 2020  de).upper().    
 00003b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003b50: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00003b60: 2020 2020 2020 2020 2020 2320 6d65 6469            # medi
-00003b70: 615f 7479 7065 203d 2072 6f75 7465 5f72  a_type = route_r
-00003b80: 6573 706f 6e73 655f 6d65 6469 615f 7479  esponse_media_ty
-00003b90: 7065 206f 7220 2261 7070 6c69 6361 7469  pe or "applicati
-00003ba0: 6f6e 2f6a 736f 6e22 0a20 2020 2020 2020  on/json".       
+00003b50: 2920 6f72 2068 7474 702e 636c 6965 6e74  ) or http.client
+00003b60: 2e72 6573 706f 6e73 6573 2e67 6574 2869  .responses.get(i
+00003b70: 6e74 2861 6464 6974 696f 6e61 6c5f 7374  nt(additional_st
+00003b80: 6174 7573 5f63 6f64 6529 290a 2020 2020  atus_code)).    
+00003b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003ba0: 6465 7363 7269 7074 696f 6e20 3d20 280a  description = (.
 00003bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003bc0: 2061 6464 6974 696f 6e61 6c5f 7363 6865   additional_sche
-00003bd0: 6d61 203d 2070 726f 6365 7373 5f72 6573  ma = process_res
-00003be0: 706f 6e73 652e 7365 7464 6566 6175 6c74  ponse.setdefault
-00003bf0: 2822 7363 6865 6d61 222c 207b 7d29 0a20  ("schema", {}). 
-00003c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003c10: 2020 2020 2020 2064 6565 705f 6469 6374         deep_dict
-00003c20: 5f75 7064 6174 6528 6164 6469 7469 6f6e  _update(addition
-00003c30: 616c 5f73 6368 656d 612c 2061 6464 6974  al_schema, addit
-00003c40: 696f 6e61 6c5f 6669 656c 645f 7363 6865  ional_field_sche
-00003c50: 6d61 290a 2020 2020 2020 2020 2020 2020  ma).            
-00003c60: 2020 2020 2020 2020 7374 6174 7573 5f74          status_t
-00003c70: 6578 743a 204f 7074 696f 6e61 6c5b 7374  ext: Optional[st
-00003c80: 725d 203d 2073 7461 7475 735f 636f 6465  r] = status_code
-00003c90: 5f72 616e 6765 732e 6765 7428 0a20 2020  _ranges.get(.   
-00003ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003cb0: 2020 2020 2073 7472 2861 6464 6974 696f       str(additio
-00003cc0: 6e61 6c5f 7374 6174 7573 5f63 6f64 6529  nal_status_code)
-00003cd0: 2e75 7070 6572 2829 0a20 2020 2020 2020  .upper().       
-00003ce0: 2020 2020 2020 2020 2020 2020 2029 206f               ) o
-00003cf0: 7220 6874 7470 2e63 6c69 656e 742e 7265  r http.client.re
-00003d00: 7370 6f6e 7365 732e 6765 7428 696e 7428  sponses.get(int(
-00003d10: 6164 6469 7469 6f6e 616c 5f73 7461 7475  additional_statu
-00003d20: 735f 636f 6465 2929 0a20 2020 2020 2020  s_code)).       
-00003d30: 2020 2020 2020 2020 2020 2020 2064 6573               des
-00003d40: 6372 6970 7469 6f6e 203d 2028 0a20 2020  cription = (.   
-00003d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003d60: 2020 2020 2070 726f 6365 7373 5f72 6573       process_res
-00003d70: 706f 6e73 652e 6765 7428 2264 6573 6372  ponse.get("descr
-00003d80: 6970 7469 6f6e 2229 0a20 2020 2020 2020  iption").       
-00003d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003da0: 206f 7220 6f70 656e 6170 695f 7265 7370   or openapi_resp
-00003db0: 6f6e 7365 2e67 6574 2822 6465 7363 7269  onse.get("descri
-00003dc0: 7074 696f 6e22 290a 2020 2020 2020 2020  ption").        
-00003dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003de0: 6f72 2073 7461 7475 735f 7465 7874 0a20  or status_text. 
-00003df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003e00: 2020 2020 2020 206f 7220 2241 6464 6974         or "Addit
-00003e10: 696f 6e61 6c20 5265 7370 6f6e 7365 220a  ional Response".
-00003e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003e30: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
-00003e40: 2020 2020 2020 2020 2020 6465 6570 5f64            deep_d
-00003e50: 6963 745f 7570 6461 7465 286f 7065 6e61  ict_update(opena
-00003e60: 7069 5f72 6573 706f 6e73 652c 2070 726f  pi_response, pro
-00003e70: 6365 7373 5f72 6573 706f 6e73 6529 0a20  cess_response). 
-00003e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003e90: 2020 206f 7065 6e61 7069 5f72 6573 706f     openapi_respo
-00003ea0: 6e73 655b 2264 6573 6372 6970 7469 6f6e  nse["description
-00003eb0: 225d 203d 2064 6573 6372 6970 7469 6f6e  "] = description
-00003ec0: 0a0a 2020 2020 2020 2020 2020 2020 6874  ..            ht
-00003ed0: 7470 3432 3220 3d20 7374 7228 4854 5450  tp422 = str(HTTP
-00003ee0: 5f34 3232 5f55 4e50 524f 4345 5353 4142  _422_UNPROCESSAB
-00003ef0: 4c45 5f45 4e54 4954 5929 0a20 2020 2020  LE_ENTITY).     
-00003f00: 2020 2020 2020 2069 6620 2861 6c6c 5f72         if (all_r
-00003f10: 6f75 7465 5f70 6172 616d 7320 6f72 2072  oute_params or r
-00003f20: 6f75 7465 2e62 6f64 795f 6669 656c 6429  oute.body_field)
-00003f30: 2061 6e64 206e 6f74 2061 6e79 280a 2020   and not any(.  
-00003f40: 2020 2020 2020 2020 2020 2020 2020 5b0a                [.
-00003f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003f60: 2020 2020 7374 6174 7573 2069 6e20 6f70      status in op
-00003f70: 6572 6174 696f 6e5b 2272 6573 706f 6e73  eration["respons
-00003f80: 6573 225d 0a20 2020 2020 2020 2020 2020  es"].           
-00003f90: 2020 2020 2020 2020 2066 6f72 2073 7461           for sta
-00003fa0: 7475 7320 696e 205b 6874 7470 3432 322c  tus in [http422,
-00003fb0: 2022 3458 5822 2c20 2264 6566 6175 6c74   "4XX", "default
-00003fc0: 225d 0a20 2020 2020 2020 2020 2020 2020  "].             
-00003fd0: 2020 205d 0a20 2020 2020 2020 2020 2020     ].           
-00003fe0: 2029 3a0a 2020 2020 2020 2020 2020 2020   ):.            
-00003ff0: 2020 2020 6f70 6572 6174 696f 6e5b 2272      operation["r
-00004000: 6573 706f 6e73 6573 225d 5b68 7474 7034  esponses"][http4
-00004010: 3232 5d20 3d20 7b0a 2020 2020 2020 2020  22] = {.        
-00004020: 2020 2020 2020 2020 2020 2020 2264 6573              "des
-00004030: 6372 6970 7469 6f6e 223a 2022 5661 6c69  cription": "Vali
-00004040: 6461 7469 6f6e 2045 7272 6f72 222c 0a20  dation Error",. 
-00004050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004060: 2020 2022 7363 6865 6d61 223a 207b 2224     "schema": {"$
-00004070: 7265 6622 3a20 5245 465f 5052 4546 4958  ref": REF_PREFIX
-00004080: 202b 2022 4854 5450 5661 6c69 6461 7469   + "HTTPValidati
-00004090: 6f6e 4572 726f 7222 7d2c 0a20 2020 2020  onError"},.     
-000040a0: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
-000040b0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-000040c0: 2256 616c 6964 6174 696f 6e45 7272 6f72  "ValidationError
-000040d0: 2220 6e6f 7420 696e 2064 6566 696e 6974  " not in definit
-000040e0: 696f 6e73 3a0a 2020 2020 2020 2020 2020  ions:.          
-000040f0: 2020 2020 2020 2020 2020 6465 6669 6e69            defini
-00004100: 7469 6f6e 732e 7570 6461 7465 280a 2020  tions.update(.  
-00004110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004120: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
-00004130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004140: 2020 2020 2256 616c 6964 6174 696f 6e45      "ValidationE
-00004150: 7272 6f72 223a 2076 616c 6964 6174 696f  rror": validatio
-00004160: 6e5f 6572 726f 725f 6465 6669 6e69 7469  n_error_definiti
-00004170: 6f6e 2c0a 2020 2020 2020 2020 2020 2020  on,.            
-00004180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004190: 2248 5454 5056 616c 6964 6174 696f 6e45  "HTTPValidationE
-000041a0: 7272 6f72 223a 2076 616c 6964 6174 696f  rror": validatio
-000041b0: 6e5f 6572 726f 725f 7265 7370 6f6e 7365  n_error_response
-000041c0: 5f64 6566 696e 6974 696f 6e2c 0a20 2020  _definition,.   
-000041d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000041e0: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
-000041f0: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-00004200: 2020 2020 2020 2020 2069 6620 726f 7574           if rout
-00004210: 652e 6f70 656e 6170 695f 6578 7472 613a  e.openapi_extra:
-00004220: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004230: 2064 6565 705f 6469 6374 5f75 7064 6174   deep_dict_updat
-00004240: 6528 6f70 6572 6174 696f 6e2c 2072 6f75  e(operation, rou
-00004250: 7465 2e6f 7065 6e61 7069 5f65 7874 7261  te.openapi_extra
-00004260: 290a 2020 2020 2020 2020 2020 2020 7061  ).            pa
-00004270: 7468 5b6d 6574 686f 642e 6c6f 7765 7228  th[method.lower(
-00004280: 295d 203d 206f 7065 7261 7469 6f6e 0a0a  )] = operation..
-00004290: 2020 2020 7265 7475 726e 2070 6174 682c      return path,
-000042a0: 2073 6563 7572 6974 795f 7363 6865 6d65   security_scheme
-000042b0: 732c 2064 6566 696e 6974 696f 6e73 0a0a  s, definitions..
-000042c0: 0a64 6566 2067 6574 5f73 7761 6767 6572  .def get_swagger
-000042d0: 3228 0a20 2020 202a 2c0a 2020 2020 7469  2(.    *,.    ti
-000042e0: 746c 653a 2073 7472 2c0a 2020 2020 7665  tle: str,.    ve
-000042f0: 7273 696f 6e3a 2073 7472 2c0a 2020 2020  rsion: str,.    
-00004300: 7377 6167 6765 7232 5f76 6572 7369 6f6e  swagger2_version
-00004310: 3a20 7374 7220 3d20 2232 2e30 222c 0a20  : str = "2.0",. 
-00004320: 2020 2064 6573 6372 6970 7469 6f6e 3a20     description: 
-00004330: 4f70 7469 6f6e 616c 5b73 7472 5d20 3d20  Optional[str] = 
-00004340: 4e6f 6e65 2c0a 2020 2020 726f 7574 6573  None,.    routes
-00004350: 3a20 5365 7175 656e 6365 5b42 6173 6552  : Sequence[BaseR
-00004360: 6f75 7465 5d2c 0a20 2020 2074 6167 733a  oute],.    tags:
-00004370: 204f 7074 696f 6e61 6c5b 4c69 7374 5b44   Optional[List[D
-00004380: 6963 745b 7374 722c 2041 6e79 5d5d 5d20  ict[str, Any]]] 
-00004390: 3d20 4e6f 6e65 2c0a 2020 2020 7365 7276  = None,.    serv
-000043a0: 6572 3a20 4f70 7469 6f6e 616c 5b73 7472  er: Optional[str
-000043b0: 5d20 3d20 4e6f 6e65 2c0a 2020 2020 7465  ] = None,.    te
-000043c0: 726d 735f 6f66 5f73 6572 7669 6365 3a20  rms_of_service: 
-000043d0: 4f70 7469 6f6e 616c 5b73 7472 5d20 3d20  Optional[str] = 
-000043e0: 4e6f 6e65 2c0a 2020 2020 636f 6e74 6163  None,.    contac
-000043f0: 743a 204f 7074 696f 6e61 6c5b 4469 6374  t: Optional[Dict
-00004400: 5b73 7472 2c20 556e 696f 6e5b 7374 722c  [str, Union[str,
-00004410: 2041 6e79 5d5d 5d20 3d20 4e6f 6e65 2c0a   Any]]] = None,.
-00004420: 2020 2020 6c69 6365 6e73 655f 696e 666f      license_info
-00004430: 3a20 4f70 7469 6f6e 616c 5b44 6963 745b  : Optional[Dict[
-00004440: 7374 722c 2055 6e69 6f6e 5b73 7472 2c20  str, Union[str, 
-00004450: 416e 795d 5d5d 203d 204e 6f6e 652c 0a29  Any]]] = None,.)
-00004460: 202d 3e20 4469 6374 5b73 7472 2c20 416e   -> Dict[str, An
-00004470: 795d 3a0a 2020 2020 696e 666f 3a20 4469  y]:.    info: Di
-00004480: 6374 5b73 7472 2c20 416e 795d 203d 207b  ct[str, Any] = {
-00004490: 2274 6974 6c65 223a 2074 6974 6c65 2c20  "title": title, 
-000044a0: 2276 6572 7369 6f6e 223a 2076 6572 7369  "version": versi
-000044b0: 6f6e 7d0a 2020 2020 6966 2064 6573 6372  on}.    if descr
-000044c0: 6970 7469 6f6e 3a0a 2020 2020 2020 2020  iption:.        
-000044d0: 696e 666f 5b22 6465 7363 7269 7074 696f  info["descriptio
-000044e0: 6e22 5d20 3d20 6465 7363 7269 7074 696f  n"] = descriptio
-000044f0: 6e0a 2020 2020 6966 2074 6572 6d73 5f6f  n.    if terms_o
-00004500: 665f 7365 7276 6963 653a 0a20 2020 2020  f_service:.     
-00004510: 2020 2069 6e66 6f5b 2274 6572 6d73 4f66     info["termsOf
-00004520: 5365 7276 6963 6522 5d20 3d20 7465 726d  Service"] = term
-00004530: 735f 6f66 5f73 6572 7669 6365 0a20 2020  s_of_service.   
-00004540: 2069 6620 636f 6e74 6163 743a 0a20 2020   if contact:.   
-00004550: 2020 2020 2069 6e66 6f5b 2263 6f6e 7461       info["conta
-00004560: 6374 225d 203d 2063 6f6e 7461 6374 0a20  ct"] = contact. 
-00004570: 2020 2069 6620 6c69 6365 6e73 655f 696e     if license_in
-00004580: 666f 3a0a 2020 2020 2020 2020 696e 666f  fo:.        info
-00004590: 5b22 6c69 6365 6e73 6522 5d20 3d20 6c69  ["license"] = li
-000045a0: 6365 6e73 655f 696e 666f 0a0a 2020 2020  cense_info..    
-000045b0: 6f75 7470 7574 3a20 4469 6374 5b73 7472  output: Dict[str
-000045c0: 2c20 416e 795d 203d 207b 2273 7761 6767  , Any] = {"swagg
-000045d0: 6572 223a 2073 7761 6767 6572 325f 7665  er": swagger2_ve
-000045e0: 7273 696f 6e2c 2022 696e 666f 223a 2069  rsion, "info": i
-000045f0: 6e66 6f7d 0a0a 2020 2020 6966 2073 6572  nfo}..    if ser
-00004600: 7665 723a 0a20 2020 2020 2020 2070 723a  ver:.        pr:
-00004610: 2050 6172 7365 5265 7375 6c74 203d 2075   ParseResult = u
-00004620: 726c 7061 7273 6528 7365 7276 6572 290a  rlparse(server).
-00004630: 2020 2020 2020 2020 6f75 7470 7574 5b22          output["
-00004640: 686f 7374 225d 203d 2070 722e 6e65 746c  host"] = pr.netl
-00004650: 6f63 0a20 2020 2020 2020 206f 7574 7075  oc.        outpu
-00004660: 745b 2262 6173 6550 6174 6822 5d20 3d20  t["basePath"] = 
-00004670: 7072 2e70 6174 6820 6f72 2022 2f22 0a20  pr.path or "/". 
-00004680: 2020 2020 2020 206f 7574 7075 742e 7365         output.se
-00004690: 7464 6566 6175 6c74 2822 7363 6865 6d65  tdefault("scheme
-000046a0: 7322 2c20 5b5d 292e 6170 7065 6e64 2870  s", []).append(p
-000046b0: 722e 7363 6865 6d65 290a 0a20 2020 2070  r.scheme)..    p
-000046c0: 6174 6873 3a20 4469 6374 5b73 7472 2c20  aths: Dict[str, 
-000046d0: 4469 6374 5b73 7472 2c20 416e 795d 5d20  Dict[str, Any]] 
-000046e0: 3d20 7b7d 0a20 2020 206f 7065 7261 7469  = {}.    operati
-000046f0: 6f6e 5f69 6473 3a20 5365 745b 7374 725d  on_ids: Set[str]
-00004700: 203d 2073 6574 2829 0a0a 2020 2020 666c   = set()..    fl
-00004710: 6174 5f6d 6f64 656c 7320 3d20 6765 745f  at_models = get_
-00004720: 666c 6174 5f6d 6f64 656c 735f 6672 6f6d  flat_models_from
-00004730: 5f72 6f75 7465 7328 726f 7574 6573 290a  _routes(routes).
-00004740: 2020 2020 6d6f 6465 6c5f 6e61 6d65 5f6d      model_name_m
-00004750: 6170 203d 2067 6574 5f6d 6f64 656c 5f6e  ap = get_model_n
-00004760: 616d 655f 6d61 7028 666c 6174 5f6d 6f64  ame_map(flat_mod
-00004770: 656c 7329 0a20 2020 2064 6566 696e 6974  els).    definit
-00004780: 696f 6e73 203d 2067 6574 5f6d 6f64 656c  ions = get_model
-00004790: 5f64 6566 696e 6974 696f 6e73 280a 2020  _definitions(.  
-000047a0: 2020 2020 2020 666c 6174 5f6d 6f64 656c        flat_model
-000047b0: 733d 666c 6174 5f6d 6f64 656c 732c 206d  s=flat_models, m
-000047c0: 6f64 656c 5f6e 616d 655f 6d61 703d 6d6f  odel_name_map=mo
-000047d0: 6465 6c5f 6e61 6d65 5f6d 6170 0a20 2020  del_name_map.   
-000047e0: 2029 0a0a 2020 2020 666f 7220 726f 7574   )..    for rout
-000047f0: 6520 696e 2072 6f75 7465 733a 0a20 2020  e in routes:.   
-00004800: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-00004810: 6365 2872 6f75 7465 2c20 726f 7574 696e  ce(route, routin
-00004820: 672e 4150 4952 6f75 7465 293a 0a20 2020  g.APIRoute):.   
-00004830: 2020 2020 2020 2020 2072 6573 756c 7420           result 
-00004840: 3d20 6765 745f 7377 6167 6765 7232 5f70  = get_swagger2_p
-00004850: 6174 6828 0a20 2020 2020 2020 2020 2020  ath(.           
-00004860: 2020 2020 2072 6f75 7465 3d72 6f75 7465       route=route
-00004870: 2c20 6d6f 6465 6c5f 6e61 6d65 5f6d 6170  , model_name_map
-00004880: 3d6d 6f64 656c 5f6e 616d 655f 6d61 702c  =model_name_map,
-00004890: 206f 7065 7261 7469 6f6e 5f69 6473 3d6f   operation_ids=o
-000048a0: 7065 7261 7469 6f6e 5f69 6473 0a20 2020  peration_ids.   
-000048b0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-000048c0: 2020 2020 2020 2069 6620 7265 7375 6c74         if result
-000048d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000048e0: 2020 7061 7468 2c20 7365 6375 7269 7479    path, security
-000048f0: 5f73 6368 656d 6573 2c20 7061 7468 5f64  _schemes, path_d
-00004900: 6566 696e 6974 696f 6e73 203d 2072 6573  efinitions = res
-00004910: 756c 740a 0a20 2020 2020 2020 2020 2020  ult..           
-00004920: 2020 2020 2069 6620 7061 7468 3a0a 2020       if path:.  
-00004930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004940: 2020 7061 7468 732e 7365 7464 6566 6175    paths.setdefau
-00004950: 6c74 2872 6f75 7465 2e70 6174 685f 666f  lt(route.path_fo
-00004960: 726d 6174 2c20 7b7d 292e 7570 6461 7465  rmat, {}).update
-00004970: 2870 6174 6829 0a0a 2020 2020 2020 2020  (path)..        
-00004980: 2020 2020 2020 2020 6966 2073 6563 7572          if secur
-00004990: 6974 795f 7363 6865 6d65 733a 0a20 2020  ity_schemes:.   
-000049a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000049b0: 206f 7574 7075 742e 7365 7464 6566 6175   output.setdefau
-000049c0: 6c74 2822 7365 6375 7269 7479 4465 6669  lt("securityDefi
-000049d0: 6e69 7469 6f6e 7322 2c20 7b7d 292e 7570  nitions", {}).up
-000049e0: 6461 7465 280a 2020 2020 2020 2020 2020  date(.          
-000049f0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00004a00: 6375 7269 7479 5f73 6368 656d 6573 0a20  curity_schemes. 
-00004a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004a20: 2020 2029 0a0a 2020 2020 2020 2020 2020     )..          
-00004a30: 2020 2020 2020 6966 2070 6174 685f 6465        if path_de
-00004a40: 6669 6e69 7469 6f6e 733a 0a20 2020 2020  finitions:.     
-00004a50: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-00004a60: 6566 696e 6974 696f 6e73 2e75 7064 6174  efinitions.updat
-00004a70: 6528 7061 7468 5f64 6566 696e 6974 696f  e(path_definitio
-00004a80: 6e73 290a 0a20 2020 206f 7574 7075 745b  ns)..    output[
-00004a90: 2270 6174 6873 225d 203d 2070 6174 6873  "paths"] = paths
-00004aa0: 0a0a 2020 2020 6966 2064 6566 696e 6974  ..    if definit
-00004ab0: 696f 6e73 3a0a 2020 2020 2020 2020 6f75  ions:.        ou
-00004ac0: 7470 7574 5b22 6465 6669 6e69 7469 6f6e  tput["definition
-00004ad0: 7322 5d20 3d20 7b6b 3a20 6465 6669 6e69  s"] = {k: defini
-00004ae0: 7469 6f6e 735b 6b5d 2066 6f72 206b 2069  tions[k] for k i
-00004af0: 6e20 736f 7274 6564 2864 6566 696e 6974  n sorted(definit
-00004b00: 696f 6e73 297d 0a0a 2020 2020 6966 2074  ions)}..    if t
-00004b10: 6167 733a 0a20 2020 2020 2020 206f 7574  ags:.        out
-00004b20: 7075 745b 2274 6167 7322 5d20 3d20 7461  put["tags"] = ta
-00004b30: 6773 0a0a 2020 2020 7265 7475 726e 206a  gs..    return j
-00004b40: 736f 6e61 626c 655f 656e 636f 6465 7228  sonable_encoder(
-00004b50: 5377 6167 6765 7232 282a 2a6f 7574 7075  Swagger2(**outpu
-00004b60: 7429 2c20 6279 5f61 6c69 6173 3d54 7275  t), by_alias=Tru
-00004b70: 652c 2065 7863 6c75 6465 5f6e 6f6e 653d  e, exclude_none=
-00004b80: 5472 7565 2920 2023 2074 7970 653a 2069  True)  # type: i
-00004b90: 676e 6f72 650a                           gnore.
+00003bc0: 2020 2020 2020 2020 7072 6f63 6573 735f          process_
+00003bd0: 7265 7370 6f6e 7365 2e67 6574 2822 6465  response.get("de
+00003be0: 7363 7269 7074 696f 6e22 290a 2020 2020  scription").    
+00003bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003c00: 2020 2020 6f72 206f 7065 6e61 7069 5f72      or openapi_r
+00003c10: 6573 706f 6e73 652e 6765 7428 2264 6573  esponse.get("des
+00003c20: 6372 6970 7469 6f6e 2229 0a20 2020 2020  cription").     
+00003c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003c40: 2020 206f 7220 7374 6174 7573 5f74 6578     or status_tex
+00003c50: 740a 2020 2020 2020 2020 2020 2020 2020  t.              
+00003c60: 2020 2020 2020 2020 2020 6f72 2022 4164            or "Ad
+00003c70: 6469 7469 6f6e 616c 2052 6573 706f 6e73  ditional Respons
+00003c80: 6522 0a20 2020 2020 2020 2020 2020 2020  e".             
+00003c90: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00003ca0: 2020 2020 2020 2020 2020 2020 2064 6565               dee
+00003cb0: 705f 6469 6374 5f75 7064 6174 6528 6f70  p_dict_update(op
+00003cc0: 656e 6170 695f 7265 7370 6f6e 7365 2c20  enapi_response, 
+00003cd0: 7072 6f63 6573 735f 7265 7370 6f6e 7365  process_response
+00003ce0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00003cf0: 2020 2020 2020 6f70 656e 6170 695f 7265        openapi_re
+00003d00: 7370 6f6e 7365 5b22 6465 7363 7269 7074  sponse["descript
+00003d10: 696f 6e22 5d20 3d20 6465 7363 7269 7074  ion"] = descript
+00003d20: 696f 6e0a 0a20 2020 2020 2020 2020 2020  ion..           
+00003d30: 2068 7474 7034 3232 203d 2073 7472 2848   http422 = str(H
+00003d40: 5454 505f 3432 325f 554e 5052 4f43 4553  TTP_422_UNPROCES
+00003d50: 5341 424c 455f 454e 5449 5459 290a 2020  SABLE_ENTITY).  
+00003d60: 2020 2020 2020 2020 2020 6966 2028 616c            if (al
+00003d70: 6c5f 726f 7574 655f 7061 7261 6d73 206f  l_route_params o
+00003d80: 7220 726f 7574 652e 626f 6479 5f66 6965  r route.body_fie
+00003d90: 6c64 2920 616e 6420 6e6f 7420 616e 7928  ld) and not any(
+00003da0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003db0: 2073 7461 7475 7320 696e 206f 7065 7261   status in opera
+00003dc0: 7469 6f6e 5b22 7265 7370 6f6e 7365 7322  tion["responses"
+00003dd0: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+00003de0: 2020 666f 7220 7374 6174 7573 2069 6e20    for status in 
+00003df0: 5b68 7474 7034 3232 2c20 2234 5858 222c  [http422, "4XX",
+00003e00: 2022 6465 6661 756c 7422 5d0a 2020 2020   "default"].    
+00003e10: 2020 2020 2020 2020 293a 0a20 2020 2020          ):.     
+00003e20: 2020 2020 2020 2020 2020 206f 7065 7261             opera
+00003e30: 7469 6f6e 5b22 7265 7370 6f6e 7365 7322  tion["responses"
+00003e40: 5d5b 6874 7470 3432 325d 203d 207b 0a20  ][http422] = {. 
+00003e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003e60: 2020 2022 6465 7363 7269 7074 696f 6e22     "description"
+00003e70: 3a20 2256 616c 6964 6174 696f 6e20 4572  : "Validation Er
+00003e80: 726f 7222 2c0a 2020 2020 2020 2020 2020  ror",.          
+00003e90: 2020 2020 2020 2020 2020 2273 6368 656d            "schem
+00003ea0: 6122 3a20 7b22 2472 6566 223a 2052 4546  a": {"$ref": REF
+00003eb0: 5f50 5245 4649 5820 2b20 2248 5454 5056  _PREFIX + "HTTPV
+00003ec0: 616c 6964 6174 696f 6e45 7272 6f72 227d  alidationError"}
+00003ed0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00003ee0: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
+00003ef0: 2020 2020 6966 2022 5661 6c69 6461 7469      if "Validati
+00003f00: 6f6e 4572 726f 7222 206e 6f74 2069 6e20  onError" not in 
+00003f10: 6465 6669 6e69 7469 6f6e 733a 0a20 2020  definitions:.   
+00003f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003f30: 2064 6566 696e 6974 696f 6e73 2e75 7064   definitions.upd
+00003f40: 6174 6528 0a20 2020 2020 2020 2020 2020  ate(.           
+00003f50: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
+00003f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003f70: 2020 2020 2020 2020 2020 2022 5661 6c69             "Vali
+00003f80: 6461 7469 6f6e 4572 726f 7222 3a20 7661  dationError": va
+00003f90: 6c69 6461 7469 6f6e 5f65 7272 6f72 5f64  lidation_error_d
+00003fa0: 6566 696e 6974 696f 6e2c 0a20 2020 2020  efinition,.     
+00003fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003fc0: 2020 2020 2020 2022 4854 5450 5661 6c69         "HTTPVali
+00003fd0: 6461 7469 6f6e 4572 726f 7222 3a20 7661  dationError": va
+00003fe0: 6c69 6461 7469 6f6e 5f65 7272 6f72 5f72  lidation_error_r
+00003ff0: 6573 706f 6e73 655f 6465 6669 6e69 7469  esponse_definiti
+00004000: 6f6e 2c0a 2020 2020 2020 2020 2020 2020  on,.            
+00004010: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
+00004020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004030: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+00004040: 6966 2072 6f75 7465 2e6f 7065 6e61 7069  if route.openapi
+00004050: 5f65 7874 7261 3a0a 2020 2020 2020 2020  _extra:.        
+00004060: 2020 2020 2020 2020 6465 6570 5f64 6963          deep_dic
+00004070: 745f 7570 6461 7465 286f 7065 7261 7469  t_update(operati
+00004080: 6f6e 2c20 726f 7574 652e 6f70 656e 6170  on, route.openap
+00004090: 695f 6578 7472 6129 0a20 2020 2020 2020  i_extra).       
+000040a0: 2020 2020 2070 6174 685b 6d65 7468 6f64       path[method
+000040b0: 2e6c 6f77 6572 2829 5d20 3d20 6f70 6572  .lower()] = oper
+000040c0: 6174 696f 6e0a 0a20 2020 2072 6574 7572  ation..    retur
+000040d0: 6e20 7061 7468 2c20 7365 6375 7269 7479  n path, security
+000040e0: 5f73 6368 656d 6573 2c20 6465 6669 6e69  _schemes, defini
+000040f0: 7469 6f6e 730a 0a0a 6465 6620 6765 745f  tions...def get_
+00004100: 7377 6167 6765 7232 280a 2020 2020 2a2c  swagger2(.    *,
+00004110: 0a20 2020 2074 6974 6c65 3a20 7374 722c  .    title: str,
+00004120: 0a20 2020 2076 6572 7369 6f6e 3a20 7374  .    version: st
+00004130: 722c 0a20 2020 2073 7761 6767 6572 325f  r,.    swagger2_
+00004140: 7665 7273 696f 6e3a 2073 7472 203d 2022  version: str = "
+00004150: 322e 3022 2c0a 2020 2020 6465 7363 7269  2.0",.    descri
+00004160: 7074 696f 6e3a 204f 7074 696f 6e61 6c5b  ption: Optional[
+00004170: 7374 725d 203d 204e 6f6e 652c 0a20 2020  str] = None,.   
+00004180: 2072 6f75 7465 733a 2053 6571 7565 6e63   routes: Sequenc
+00004190: 655b 4261 7365 526f 7574 655d 2c0a 2020  e[BaseRoute],.  
+000041a0: 2020 7461 6773 3a20 4f70 7469 6f6e 616c    tags: Optional
+000041b0: 5b4c 6973 745b 4469 6374 5b73 7472 2c20  [List[Dict[str, 
+000041c0: 416e 795d 5d5d 203d 204e 6f6e 652c 0a20  Any]]] = None,. 
+000041d0: 2020 2073 6572 7665 723a 204f 7074 696f     server: Optio
+000041e0: 6e61 6c5b 7374 725d 203d 204e 6f6e 652c  nal[str] = None,
+000041f0: 0a20 2020 2074 6572 6d73 5f6f 665f 7365  .    terms_of_se
+00004200: 7276 6963 653a 204f 7074 696f 6e61 6c5b  rvice: Optional[
+00004210: 7374 725d 203d 204e 6f6e 652c 0a20 2020  str] = None,.   
+00004220: 2063 6f6e 7461 6374 3a20 4f70 7469 6f6e   contact: Option
+00004230: 616c 5b44 6963 745b 7374 722c 2055 6e69  al[Dict[str, Uni
+00004240: 6f6e 5b73 7472 2c20 416e 795d 5d5d 203d  on[str, Any]]] =
+00004250: 204e 6f6e 652c 0a20 2020 206c 6963 656e   None,.    licen
+00004260: 7365 5f69 6e66 6f3a 204f 7074 696f 6e61  se_info: Optiona
+00004270: 6c5b 4469 6374 5b73 7472 2c20 556e 696f  l[Dict[str, Unio
+00004280: 6e5b 7374 722c 2041 6e79 5d5d 5d20 3d20  n[str, Any]]] = 
+00004290: 4e6f 6e65 2c0a 2920 2d3e 2044 6963 745b  None,.) -> Dict[
+000042a0: 7374 722c 2041 6e79 5d3a 0a20 2020 2069  str, Any]:.    i
+000042b0: 6e66 6f3a 2044 6963 745b 7374 722c 2041  nfo: Dict[str, A
+000042c0: 6e79 5d20 3d20 7b22 7469 746c 6522 3a20  ny] = {"title": 
+000042d0: 7469 746c 652c 2022 7665 7273 696f 6e22  title, "version"
+000042e0: 3a20 7665 7273 696f 6e7d 0a20 2020 2069  : version}.    i
+000042f0: 6620 6465 7363 7269 7074 696f 6e3a 0a20  f description:. 
+00004300: 2020 2020 2020 2069 6e66 6f5b 2264 6573         info["des
+00004310: 6372 6970 7469 6f6e 225d 203d 2064 6573  cription"] = des
+00004320: 6372 6970 7469 6f6e 0a20 2020 2069 6620  cription.    if 
+00004330: 7465 726d 735f 6f66 5f73 6572 7669 6365  terms_of_service
+00004340: 3a0a 2020 2020 2020 2020 696e 666f 5b22  :.        info["
+00004350: 7465 726d 734f 6653 6572 7669 6365 225d  termsOfService"]
+00004360: 203d 2074 6572 6d73 5f6f 665f 7365 7276   = terms_of_serv
+00004370: 6963 650a 2020 2020 6966 2063 6f6e 7461  ice.    if conta
+00004380: 6374 3a0a 2020 2020 2020 2020 696e 666f  ct:.        info
+00004390: 5b22 636f 6e74 6163 7422 5d20 3d20 636f  ["contact"] = co
+000043a0: 6e74 6163 740a 2020 2020 6966 206c 6963  ntact.    if lic
+000043b0: 656e 7365 5f69 6e66 6f3a 0a20 2020 2020  ense_info:.     
+000043c0: 2020 2069 6e66 6f5b 226c 6963 656e 7365     info["license
+000043d0: 225d 203d 206c 6963 656e 7365 5f69 6e66  "] = license_inf
+000043e0: 6f0a 0a20 2020 206f 7574 7075 743a 2044  o..    output: D
+000043f0: 6963 745b 7374 722c 2041 6e79 5d20 3d20  ict[str, Any] = 
+00004400: 7b22 7377 6167 6765 7222 3a20 7377 6167  {"swagger": swag
+00004410: 6765 7232 5f76 6572 7369 6f6e 2c20 2269  ger2_version, "i
+00004420: 6e66 6f22 3a20 696e 666f 7d0a 0a20 2020  nfo": info}..   
+00004430: 2069 6620 7365 7276 6572 3a0a 2020 2020   if server:.    
+00004440: 2020 2020 7072 3a20 5061 7273 6552 6573      pr: ParseRes
+00004450: 756c 7420 3d20 7572 6c70 6172 7365 2873  ult = urlparse(s
+00004460: 6572 7665 7229 0a20 2020 2020 2020 206f  erver).        o
+00004470: 7574 7075 745b 2268 6f73 7422 5d20 3d20  utput["host"] = 
+00004480: 7072 2e6e 6574 6c6f 630a 2020 2020 2020  pr.netloc.      
+00004490: 2020 6f75 7470 7574 5b22 6261 7365 5061    output["basePa
+000044a0: 7468 225d 203d 2070 722e 7061 7468 206f  th"] = pr.path o
+000044b0: 7220 222f 220a 2020 2020 2020 2020 6f75  r "/".        ou
+000044c0: 7470 7574 2e73 6574 6465 6661 756c 7428  tput.setdefault(
+000044d0: 2273 6368 656d 6573 222c 205b 5d29 2e61  "schemes", []).a
+000044e0: 7070 656e 6428 7072 2e73 6368 656d 6529  ppend(pr.scheme)
+000044f0: 0a0a 2020 2020 7061 7468 733a 2044 6963  ..    paths: Dic
+00004500: 745b 7374 722c 2044 6963 745b 7374 722c  t[str, Dict[str,
+00004510: 2041 6e79 5d5d 203d 207b 7d0a 2020 2020   Any]] = {}.    
+00004520: 6f70 6572 6174 696f 6e5f 6964 733a 2053  operation_ids: S
+00004530: 6574 5b73 7472 5d20 3d20 7365 7428 290a  et[str] = set().
+00004540: 0a20 2020 2066 6c61 745f 6d6f 6465 6c73  .    flat_models
+00004550: 203d 2067 6574 5f66 6c61 745f 6d6f 6465   = get_flat_mode
+00004560: 6c73 5f66 726f 6d5f 726f 7574 6573 2872  ls_from_routes(r
+00004570: 6f75 7465 7329 0a20 2020 206d 6f64 656c  outes).    model
+00004580: 5f6e 616d 655f 6d61 7020 3d20 6765 745f  _name_map = get_
+00004590: 6d6f 6465 6c5f 6e61 6d65 5f6d 6170 2866  model_name_map(f
+000045a0: 6c61 745f 6d6f 6465 6c73 290a 2020 2020  lat_models).    
+000045b0: 6465 6669 6e69 7469 6f6e 7320 3d20 6765  definitions = ge
+000045c0: 745f 6d6f 6465 6c5f 6465 6669 6e69 7469  t_model_definiti
+000045d0: 6f6e 7328 0a20 2020 2020 2020 2066 6c61  ons(.        fla
+000045e0: 745f 6d6f 6465 6c73 3d66 6c61 745f 6d6f  t_models=flat_mo
+000045f0: 6465 6c73 2c20 6d6f 6465 6c5f 6e61 6d65  dels, model_name
+00004600: 5f6d 6170 3d6d 6f64 656c 5f6e 616d 655f  _map=model_name_
+00004610: 6d61 700a 2020 2020 290a 0a20 2020 2066  map.    )..    f
+00004620: 6f72 2072 6f75 7465 2069 6e20 726f 7574  or route in rout
+00004630: 6573 3a0a 2020 2020 2020 2020 6966 2069  es:.        if i
+00004640: 7369 6e73 7461 6e63 6528 726f 7574 652c  sinstance(route,
+00004650: 2072 6f75 7469 6e67 2e41 5049 526f 7574   routing.APIRout
+00004660: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
+00004670: 7265 7375 6c74 203d 2067 6574 5f73 7761  result = get_swa
+00004680: 6767 6572 325f 7061 7468 280a 2020 2020  gger2_path(.    
+00004690: 2020 2020 2020 2020 2020 2020 726f 7574              rout
+000046a0: 653d 726f 7574 652c 206d 6f64 656c 5f6e  e=route, model_n
+000046b0: 616d 655f 6d61 703d 6d6f 6465 6c5f 6e61  ame_map=model_na
+000046c0: 6d65 5f6d 6170 2c20 6f70 6572 6174 696f  me_map, operatio
+000046d0: 6e5f 6964 733d 6f70 6572 6174 696f 6e5f  n_ids=operation_
+000046e0: 6964 730a 2020 2020 2020 2020 2020 2020  ids.            
+000046f0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+00004700: 2072 6573 756c 743a 0a20 2020 2020 2020   result:.       
+00004710: 2020 2020 2020 2020 2070 6174 682c 2073           path, s
+00004720: 6563 7572 6974 795f 7363 6865 6d65 732c  ecurity_schemes,
+00004730: 2070 6174 685f 6465 6669 6e69 7469 6f6e   path_definition
+00004740: 7320 3d20 7265 7375 6c74 0a0a 2020 2020  s = result..    
+00004750: 2020 2020 2020 2020 2020 2020 6966 2070              if p
+00004760: 6174 683a 0a20 2020 2020 2020 2020 2020  ath:.           
+00004770: 2020 2020 2020 2020 2070 6174 6873 2e73           paths.s
+00004780: 6574 6465 6661 756c 7428 726f 7574 652e  etdefault(route.
+00004790: 7061 7468 5f66 6f72 6d61 742c 207b 7d29  path_format, {})
+000047a0: 2e75 7064 6174 6528 7061 7468 290a 0a20  .update(path).. 
+000047b0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000047c0: 6620 7365 6375 7269 7479 5f73 6368 656d  f security_schem
+000047d0: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
+000047e0: 2020 2020 2020 2020 6f75 7470 7574 2e73          output.s
+000047f0: 6574 6465 6661 756c 7428 2273 6563 7572  etdefault("secur
+00004800: 6974 7944 6566 696e 6974 696f 6e73 222c  ityDefinitions",
+00004810: 207b 7d29 2e75 7064 6174 6528 0a20 2020   {}).update(.   
+00004820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004830: 2020 2020 2073 6563 7572 6974 795f 7363       security_sc
+00004840: 6865 6d65 730a 2020 2020 2020 2020 2020  hemes.          
+00004850: 2020 2020 2020 2020 2020 290a 0a20 2020            )..   
+00004860: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00004870: 7061 7468 5f64 6566 696e 6974 696f 6e73  path_definitions
+00004880: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00004890: 2020 2020 2020 6465 6669 6e69 7469 6f6e        definition
+000048a0: 732e 7570 6461 7465 2870 6174 685f 6465  s.update(path_de
+000048b0: 6669 6e69 7469 6f6e 7329 0a0a 2020 2020  finitions)..    
+000048c0: 6f75 7470 7574 5b22 7061 7468 7322 5d20  output["paths"] 
+000048d0: 3d20 7061 7468 730a 0a20 2020 2069 6620  = paths..    if 
+000048e0: 6465 6669 6e69 7469 6f6e 733a 0a20 2020  definitions:.   
+000048f0: 2020 2020 206f 7574 7075 745b 2264 6566       output["def
+00004900: 696e 6974 696f 6e73 225d 203d 207b 6b3a  initions"] = {k:
+00004910: 2064 6566 696e 6974 696f 6e73 5b6b 5d20   definitions[k] 
+00004920: 666f 7220 6b20 696e 2073 6f72 7465 6428  for k in sorted(
+00004930: 6465 6669 6e69 7469 6f6e 7329 7d0a 0a20  definitions)}.. 
+00004940: 2020 2069 6620 7461 6773 3a0a 2020 2020     if tags:.    
+00004950: 2020 2020 6f75 7470 7574 5b22 7461 6773      output["tags
+00004960: 225d 203d 2074 6167 730a 0a20 2020 2072  "] = tags..    r
+00004970: 6574 7572 6e20 6a73 6f6e 6162 6c65 5f65  eturn jsonable_e
+00004980: 6e63 6f64 6572 2853 7761 6767 6572 3228  ncoder(Swagger2(
+00004990: 2a2a 6f75 7470 7574 292c 2062 795f 616c  **output), by_al
+000049a0: 6961 733d 5472 7565 2c20 6578 636c 7564  ias=True, exclud
+000049b0: 655f 6e6f 6e65 3d54 7275 6529 2020 2320  e_none=True)  # 
+000049c0: 7479 7065 3a20 6967 6e6f 7265 0a         type: ignore.
```

### Comparing `fastapi_swagger2-0.0.1b5/src/fastapi_swagger2/__init__.py` & `fastapi_swagger2-0.0.2/src/fastapi_swagger2/__init__.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-__version__ = "0.0.1b5"
+__version__ = "0.0.2"
 
 from typing import Any, Dict, List, Optional, TypeVar
 
 from fastapi import FastAPI
 from fastapi.openapi.docs import (
     get_redoc_html,
     get_swagger_ui_html,
```

### Comparing `fastapi_swagger2-0.0.1b5/src/fastapi_swagger2/models.py` & `fastapi_swagger2-0.0.2/src/fastapi_swagger2/models.py`

 * *Files identical despite different names*

### Comparing `fastapi_swagger2-0.0.1b5/.gitignore` & `fastapi_swagger2-0.0.2/.gitignore`

 * *Files identical despite different names*

### Comparing `fastapi_swagger2-0.0.1b5/LICENSE` & `fastapi_swagger2-0.0.2/LICENSE`

 * *Files identical despite different names*

### Comparing `fastapi_swagger2-0.0.1b5/README.md` & `fastapi_swagger2-0.0.2/README.md`

 * *Files 13% similar despite different names*

```diff
@@ -15,24 +15,19 @@
 
 _Reason behind this library:_
 
 Few API GW services like Google Cloud API GW still support only Swagger 2.0 spec. Since FastAPI only supports OAS3, it is a challenge. Converting from OAS3 to Swagger 2.0 requires some manual steps which would hinder CI/CD.
 
 ---
 
-<b>* NOTE: THIS IS STILL WORK IN PROGRESS. CURRENTLY SUPPORTS BASIC SPEC LIKE PATHS, PARAMS, ETC.</b>
-<b>ANY HELP IS HIGHLY APPRECIATED.</b>
-
----
-
 ## Requirements
 
 Python 3.8+
 
-FastAPI 0.79.0+
+0.0.2 - FastAPI >= 0.79.0, <= 0.98.0
 
 ## Installation
 
 <div class="termy">
 
 ```console
 $ pip install fastapi_swagger2
```

### Comparing `fastapi_swagger2-0.0.1b5/pyproject.toml` & `fastapi_swagger2-0.0.2/pyproject.toml`

 * *Files 1% similar despite different names*

```diff
@@ -34,15 +34,15 @@
     "Programming Language :: Python :: 3.9",
     "Programming Language :: Python :: 3.10",
     "Programming Language :: Python :: 3.11",
     "Topic :: Internet :: WWW/HTTP :: HTTP Servers",
     "Topic :: Internet :: WWW/HTTP",
 ]
 dependencies = [
-    "fastapi>=0.79.0",
+    "fastapi >=0.79.0,<=0.98.0",
 ]
 dynamic = ["version"]
 
 [project.urls]
 Homepage = "https://github.com/virajkanwade/fastapi_swagger2"
 Documentation = "https://github.com/virajkanwade/fastapi_swagger2"
```

### Comparing `fastapi_swagger2-0.0.1b5/PKG-INFO` & `fastapi_swagger2-0.0.2/PKG-INFO`

 * *Files 4% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: fastapi_swagger2
-Version: 0.0.1b5
+Version: 0.0.2
 Summary: Swagger2 support for FastAPI framework
 Project-URL: Homepage, https://github.com/virajkanwade/fastapi_swagger2
 Project-URL: Documentation, https://github.com/virajkanwade/fastapi_swagger2
 Author-email: Viraj Kanwade <virajk.oib@gmail.com>
 License: MIT License
         
         Copyright (c) 2023 Viraj Kanwade
@@ -48,15 +48,15 @@
 Classifier: Topic :: Internet :: WWW/HTTP
 Classifier: Topic :: Internet :: WWW/HTTP :: HTTP Servers
 Classifier: Topic :: Software Development
 Classifier: Topic :: Software Development :: Libraries
 Classifier: Topic :: Software Development :: Libraries :: Python Modules
 Classifier: Typing :: Typed
 Requires-Python: >=3.8
-Requires-Dist: fastapi>=0.79.0
+Requires-Dist: fastapi<=0.98.0,>=0.79.0
 Provides-Extra: all
 Requires-Dist: httpx>=0.23.0; extra == 'all'
 Provides-Extra: dev
 Requires-Dist: ruff==0.0.272; extra == 'dev'
 Provides-Extra: test
 Requires-Dist: black==23.3.0; extra == 'test'
 Requires-Dist: coverage[toml]<8.0,>=6.5.0; extra == 'test'
@@ -84,24 +84,19 @@
 
 _Reason behind this library:_
 
 Few API GW services like Google Cloud API GW still support only Swagger 2.0 spec. Since FastAPI only supports OAS3, it is a challenge. Converting from OAS3 to Swagger 2.0 requires some manual steps which would hinder CI/CD.
 
 ---
 
-<b>* NOTE: THIS IS STILL WORK IN PROGRESS. CURRENTLY SUPPORTS BASIC SPEC LIKE PATHS, PARAMS, ETC.</b>
-<b>ANY HELP IS HIGHLY APPRECIATED.</b>
-
----
-
 ## Requirements
 
 Python 3.8+
 
-FastAPI 0.79.0+
+0.0.2 - FastAPI >= 0.79.0, <= 0.98.0
 
 ## Installation
 
 <div class="termy">
 
 ```console
 $ pip install fastapi_swagger2
```

