# Comparing `tmp/kwcoco-0.6.2-py3-none-any.whl.zip` & `tmp/kwcoco-0.6.3-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,111 +1,115 @@
-Zip file size: 357681 bytes, number of entries: 109
--rw-r--r--  2.0 unx    21711 b- defN 23-May-02 20:33 kwcoco/__init__.py
--rw-r--r--  2.0 unx      276 b- defN 23-May-02 20:33 kwcoco/__main__.py
--rw-rw-rw-  2.0 unx        1 b- defN 23-May-02 20:33 kwcoco/__main__.pyi
--rw-r--r--  2.0 unx     6721 b- defN 23-May-02 20:33 kwcoco/_helpers.py
--rw-rw-rw-  2.0 unx      717 b- defN 23-May-02 20:33 kwcoco/_helpers.pyi
--rw-r--r--  2.0 unx      309 b- defN 23-May-02 20:33 kwcoco/abstract_coco_dataset.py
--rw-rw-rw-  2.0 unx       62 b- defN 23-May-02 20:33 kwcoco/abstract_coco_dataset.pyi
--rw-r--r--  2.0 unx    27500 b- defN 23-May-02 20:33 kwcoco/category_tree.py
--rw-rw-rw-  2.0 unx     2442 b- defN 23-May-02 20:33 kwcoco/category_tree.pyi
--rw-r--r--  2.0 unx      364 b- defN 23-May-02 20:33 kwcoco/channel_spec.py
--rw-rw-rw-  2.0 unx      104 b- defN 23-May-02 20:33 kwcoco/channel_spec.pyi
--rw-r--r--  2.0 unx   256568 b- defN 23-May-02 20:33 kwcoco/coco_dataset.py
--rw-rw-rw-  2.0 unx    12926 b- defN 23-May-02 20:33 kwcoco/coco_dataset.pyi
--rw-r--r--  2.0 unx    50060 b- defN 23-May-02 20:33 kwcoco/coco_evaluator.py
--rw-rw-rw-  2.0 unx     2003 b- defN 23-May-02 20:33 kwcoco/coco_evaluator.pyi
--rw-r--r--  2.0 unx    50830 b- defN 23-May-02 20:33 kwcoco/coco_image.py
--rw-rw-rw-  2.0 unx     3393 b- defN 23-May-02 20:33 kwcoco/coco_image.pyi
--rw-r--r--  2.0 unx    27309 b- defN 23-May-02 20:33 kwcoco/coco_objects1d.py
--rw-rw-rw-  2.0 unx     3468 b- defN 23-May-02 20:33 kwcoco/coco_objects1d.pyi
--rw-r--r--  2.0 unx    11331 b- defN 23-May-02 20:33 kwcoco/coco_schema.py
--rw-rw-rw-  2.0 unx      846 b- defN 23-May-02 20:33 kwcoco/coco_schema.pyi
--rw-r--r--  2.0 unx    91845 b- defN 23-May-02 20:33 kwcoco/coco_sql_dataset.py
--rw-rw-rw-  2.0 unx     6055 b- defN 23-May-02 20:33 kwcoco/coco_sql_dataset.pyi
--rw-r--r--  2.0 unx    16155 b- defN 23-May-02 20:33 kwcoco/compat_dataset.py
--rw-rw-rw-  2.0 unx     1793 b- defN 23-May-02 20:33 kwcoco/compat_dataset.pyi
--rw-r--r--  2.0 unx      328 b- defN 23-May-02 20:33 kwcoco/exceptions.py
--rw-rw-rw-  2.0 unx      128 b- defN 23-May-02 20:33 kwcoco/exceptions.pyi
--rw-r--r--  2.0 unx     2639 b- defN 23-May-02 20:33 kwcoco/kpf.py
--rw-rw-rw-  2.0 unx       74 b- defN 23-May-02 20:33 kwcoco/kpf.pyi
--rw-r--r--  2.0 unx    13342 b- defN 23-May-02 20:33 kwcoco/kw18.py
--rw-rw-rw-  2.0 unx      682 b- defN 23-May-02 20:33 kwcoco/kw18.pyi
--rw-rw-rw-  2.0 unx        0 b- defN 23-May-02 20:33 kwcoco/py.typed
--rw-r--r--  2.0 unx      402 b- defN 23-May-02 20:33 kwcoco/sensorchan_spec.py
--rw-rw-rw-  2.0 unx      325 b- defN 23-May-02 20:33 kwcoco/sensorchan_spec.pyi
--rw-r--r--  2.0 unx        0 b- defN 23-May-02 20:33 kwcoco/cli/__init__.py
--rw-r--r--  2.0 unx     6854 b- defN 23-May-02 20:33 kwcoco/cli/__main__.py
--rw-r--r--  2.0 unx     3372 b- defN 23-May-02 20:33 kwcoco/cli/coco_conform.py
--rw-r--r--  2.0 unx     5725 b- defN 23-May-02 20:33 kwcoco/cli/coco_eval.py
--rw-r--r--  2.0 unx     2293 b- defN 23-May-02 20:33 kwcoco/cli/coco_grab.py
--rw-r--r--  2.0 unx     4164 b- defN 23-May-02 20:33 kwcoco/cli/coco_modify_categories.py
--rw-r--r--  2.0 unx     6771 b- defN 23-May-02 20:33 kwcoco/cli/coco_reroot.py
--rw-r--r--  2.0 unx     4680 b- defN 23-May-02 20:33 kwcoco/cli/coco_show.py
--rw-r--r--  2.0 unx     6731 b- defN 23-May-02 20:33 kwcoco/cli/coco_split.py
--rw-r--r--  2.0 unx     8473 b- defN 23-May-02 20:33 kwcoco/cli/coco_stats.py
--rw-r--r--  2.0 unx    12894 b- defN 23-May-02 20:33 kwcoco/cli/coco_subset.py
--rw-r--r--  2.0 unx     4904 b- defN 23-May-02 20:33 kwcoco/cli/coco_toydata.py
--rw-r--r--  2.0 unx     3566 b- defN 23-May-02 20:33 kwcoco/cli/coco_union.py
--rw-r--r--  2.0 unx     7900 b- defN 23-May-02 20:33 kwcoco/cli/coco_validate.py
--rw-r--r--  2.0 unx        0 b- defN 23-May-02 20:33 kwcoco/data/__init__.py
--rw-r--r--  2.0 unx    21744 b- defN 23-May-02 20:33 kwcoco/data/grab_camvid.py
--rw-r--r--  2.0 unx     5849 b- defN 23-May-02 20:33 kwcoco/data/grab_cifar.py
--rw-r--r--  2.0 unx      720 b- defN 23-May-02 20:33 kwcoco/data/grab_datasets.py
--rw-r--r--  2.0 unx     6857 b- defN 23-May-02 20:33 kwcoco/data/grab_domainnet.py
--rw-r--r--  2.0 unx     9189 b- defN 23-May-02 20:33 kwcoco/data/grab_spacenet.py
--rw-r--r--  2.0 unx     9865 b- defN 23-May-02 20:33 kwcoco/data/grab_voc.py
--rw-r--r--  2.0 unx        0 b- defN 23-May-02 20:33 kwcoco/demo/__init__.py
--rw-r--r--  2.0 unx    23050 b- defN 23-May-02 20:33 kwcoco/demo/boids.py
--rw-r--r--  2.0 unx    14007 b- defN 23-May-02 20:33 kwcoco/demo/perterb.py
--rw-r--r--  2.0 unx      500 b- defN 23-May-02 20:33 kwcoco/demo/toydata.py
--rw-r--r--  2.0 unx    20032 b- defN 23-May-02 20:33 kwcoco/demo/toydata_image.py
--rw-r--r--  2.0 unx    55280 b- defN 23-May-02 20:33 kwcoco/demo/toydata_video.py
--rw-r--r--  2.0 unx    20195 b- defN 23-May-02 20:33 kwcoco/demo/toypatterns.py
--rw-r--r--  2.0 unx        0 b- defN 23-May-02 20:33 kwcoco/examples/__init__.py
--rw-r--r--  2.0 unx     5751 b- defN 23-May-02 20:33 kwcoco/examples/bench_large_hyperspectral.py
--rw-r--r--  2.0 unx     4911 b- defN 23-May-02 20:33 kwcoco/examples/demo_kwcoco_spaces.py
--rw-r--r--  2.0 unx     1971 b- defN 23-May-02 20:33 kwcoco/examples/demo_sql_and_zip_files.py
--rw-r--r--  2.0 unx     2882 b- defN 23-May-02 20:33 kwcoco/examples/draw_gt_and_predicted_boxes.py
--rw-r--r--  2.0 unx     2692 b- defN 23-May-02 20:33 kwcoco/examples/faq.py
--rw-r--r--  2.0 unx     2074 b- defN 23-May-02 20:33 kwcoco/examples/getting_started_existing_dataset.py
--rw-r--r--  2.0 unx     2068 b- defN 23-May-02 20:33 kwcoco/examples/loading_multispectral_data.py
--rw-r--r--  2.0 unx     1683 b- defN 23-May-02 20:33 kwcoco/examples/modification_example.py
--rw-r--r--  2.0 unx     2087 b- defN 23-May-02 20:33 kwcoco/examples/shifting_annots.py
--rw-r--r--  2.0 unx     8961 b- defN 23-May-02 20:33 kwcoco/examples/simple_kwcoco_torch_dataset.py
--rw-r--r--  2.0 unx     7896 b- defN 23-May-02 20:33 kwcoco/examples/vectorized_interface.py
--rw-r--r--  2.0 unx      699 b- defN 23-May-02 20:33 kwcoco/metrics/__init__.py
--rw-r--r--  2.0 unx    27823 b- defN 23-May-02 20:33 kwcoco/metrics/assignment.py
--rw-r--r--  2.0 unx    22260 b- defN 23-May-02 20:33 kwcoco/metrics/clf_report.py
--rw-r--r--  2.0 unx    52248 b- defN 23-May-02 20:33 kwcoco/metrics/confusion_measures.py
--rw-r--r--  2.0 unx    43271 b- defN 23-May-02 20:33 kwcoco/metrics/confusion_vectors.py
--rw-r--r--  2.0 unx    60057 b- defN 23-May-02 20:33 kwcoco/metrics/detect_metrics.py
--rw-r--r--  2.0 unx    22909 b- defN 23-May-02 20:33 kwcoco/metrics/drawing.py
--rw-r--r--  2.0 unx     6984 b- defN 23-May-02 20:33 kwcoco/metrics/functional.py
--rw-r--r--  2.0 unx     7336 b- defN 23-May-02 20:33 kwcoco/metrics/sklearn_alts.py
--rw-r--r--  2.0 unx       77 b- defN 23-May-02 20:33 kwcoco/metrics/util.py
--rw-r--r--  2.0 unx    15348 b- defN 23-May-02 20:33 kwcoco/metrics/voc_metrics.py
--rw-r--r--  2.0 unx     5567 b- defN 23-May-02 20:33 kwcoco/util/__init__.py
--rw-r--r--  2.0 unx     3765 b- defN 23-May-02 20:33 kwcoco/util/dict_like.py
--rw-r--r--  2.0 unx     9344 b- defN 23-May-02 20:33 kwcoco/util/dict_proxy2.py
--rw-r--r--  2.0 unx    13052 b- defN 23-May-02 20:33 kwcoco/util/jsonschema_elements.py
--rw-r--r--  2.0 unx      211 b- defN 23-May-02 20:33 kwcoco/util/lazy_frame_backends.py
--rw-r--r--  2.0 unx    10304 b- defN 23-May-02 20:33 kwcoco/util/util_archive.py
--rw-r--r--  2.0 unx      644 b- defN 23-May-02 20:33 kwcoco/util/util_deprecate.py
--rw-r--r--  2.0 unx     2733 b- defN 23-May-02 20:33 kwcoco/util/util_eval.py
--rw-r--r--  2.0 unx      185 b- defN 23-May-02 20:33 kwcoco/util/util_futures.py
--rw-r--r--  2.0 unx     9367 b- defN 23-May-02 20:33 kwcoco/util/util_json.py
--rw-r--r--  2.0 unx     3678 b- defN 23-May-02 20:33 kwcoco/util/util_monkey.py
--rw-r--r--  2.0 unx     2988 b- defN 23-May-02 20:33 kwcoco/util/util_parallel.py
--rw-r--r--  2.0 unx     3711 b- defN 23-May-02 20:33 kwcoco/util/util_reroot.py
--rw-r--r--  2.0 unx     5654 b- defN 23-May-02 20:33 kwcoco/util/util_sklearn.py
--rw-r--r--  2.0 unx     4809 b- defN 23-May-02 20:33 kwcoco/util/util_special_json.py
--rw-r--r--  2.0 unx     2720 b- defN 23-May-02 20:33 kwcoco/util/util_truncate.py
--rw-r--r--  2.0 unx     2015 b- defN 23-May-02 20:33 kwcoco/util/util_windows.py
--rw-r--r--  2.0 unx     1607 b- defN 23-May-02 20:33 kwcoco/util/delayed_ops/__init__.py
--rw-rw-rw-  2.0 unx    11343 b- defN 23-May-02 20:33 kwcoco-0.6.2.dist-info/LICENSE
--rw-r--r--  2.0 unx    64330 b- defN 23-May-02 20:33 kwcoco-0.6.2.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-May-02 20:33 kwcoco-0.6.2.dist-info/WHEEL
--rw-r--r--  2.0 unx       52 b- defN 23-May-02 20:33 kwcoco-0.6.2.dist-info/entry_points.txt
--rw-r--r--  2.0 unx        7 b- defN 23-May-02 20:33 kwcoco-0.6.2.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     9065 b- defN 23-May-02 20:33 kwcoco-0.6.2.dist-info/RECORD
-109 files, 1347555 bytes uncompressed, 343527 bytes compressed:  74.5%
+Zip file size: 367792 bytes, number of entries: 113
+-rw-r--r--  2.0 unx        0 b- defN 23-Jul-13 18:39 examples/__init__.py
+-rw-r--r--  2.0 unx     5751 b- defN 23-Jul-13 18:39 examples/bench_large_hyperspectral.py
+-rw-r--r--  2.0 unx     4911 b- defN 23-Jul-13 18:39 examples/demo_kwcoco_spaces.py
+-rw-r--r--  2.0 unx     1971 b- defN 23-Jul-13 18:39 examples/demo_sql_and_zip_files.py
+-rw-r--r--  2.0 unx     2882 b- defN 23-Jul-13 18:39 examples/draw_gt_and_predicted_boxes.py
+-rw-r--r--  2.0 unx     3838 b- defN 23-Jul-13 18:39 examples/faq.py
+-rw-r--r--  2.0 unx     2074 b- defN 23-Jul-13 18:39 examples/getting_started_existing_dataset.py
+-rw-r--r--  2.0 unx     2068 b- defN 23-Jul-13 18:39 examples/loading_multispectral_data.py
+-rw-r--r--  2.0 unx     1683 b- defN 23-Jul-13 18:39 examples/modification_example.py
+-rw-r--r--  2.0 unx     2087 b- defN 23-Jul-13 18:39 examples/shifting_annots.py
+-rw-r--r--  2.0 unx     8883 b- defN 23-Jul-13 18:39 examples/simple_kwcoco_torch_dataset.py
+-rw-r--r--  2.0 unx     7896 b- defN 23-Jul-13 18:39 examples/vectorized_interface.py
+-rw-r--r--  2.0 unx    21711 b- defN 23-Jul-13 18:39 kwcoco/__init__.py
+-rw-r--r--  2.0 unx      276 b- defN 23-Jul-13 18:39 kwcoco/__main__.py
+-rw-rw-rw-  2.0 unx        1 b- defN 23-Jul-13 18:39 kwcoco/__main__.pyi
+-rw-r--r--  2.0 unx     6721 b- defN 23-Jul-13 18:39 kwcoco/_helpers.py
+-rw-rw-rw-  2.0 unx      717 b- defN 23-Jul-13 18:39 kwcoco/_helpers.pyi
+-rw-r--r--  2.0 unx      309 b- defN 23-Jul-13 18:39 kwcoco/abstract_coco_dataset.py
+-rw-rw-rw-  2.0 unx       62 b- defN 23-Jul-13 18:39 kwcoco/abstract_coco_dataset.pyi
+-rw-r--r--  2.0 unx    27500 b- defN 23-Jul-13 18:39 kwcoco/category_tree.py
+-rw-rw-rw-  2.0 unx     2483 b- defN 23-Jul-13 18:39 kwcoco/category_tree.pyi
+-rw-r--r--  2.0 unx      364 b- defN 23-Jul-13 18:39 kwcoco/channel_spec.py
+-rw-rw-rw-  2.0 unx      104 b- defN 23-Jul-13 18:39 kwcoco/channel_spec.pyi
+-rw-r--r--  2.0 unx   260466 b- defN 23-Jul-13 18:39 kwcoco/coco_dataset.py
+-rw-rw-rw-  2.0 unx    13509 b- defN 23-Jul-13 18:39 kwcoco/coco_dataset.pyi
+-rw-r--r--  2.0 unx    50064 b- defN 23-Jul-13 18:39 kwcoco/coco_evaluator.py
+-rw-rw-rw-  2.0 unx     1964 b- defN 23-Jul-13 18:39 kwcoco/coco_evaluator.pyi
+-rw-r--r--  2.0 unx    51802 b- defN 23-Jul-13 18:39 kwcoco/coco_image.py
+-rw-rw-rw-  2.0 unx     3809 b- defN 23-Jul-13 18:39 kwcoco/coco_image.pyi
+-rw-r--r--  2.0 unx    27309 b- defN 23-Jul-13 18:39 kwcoco/coco_objects1d.py
+-rw-rw-rw-  2.0 unx     3637 b- defN 23-Jul-13 18:39 kwcoco/coco_objects1d.pyi
+-rw-r--r--  2.0 unx    11927 b- defN 23-Jul-13 18:39 kwcoco/coco_schema.py
+-rw-rw-rw-  2.0 unx      864 b- defN 23-Jul-13 18:39 kwcoco/coco_schema.pyi
+-rw-r--r--  2.0 unx    91500 b- defN 23-Jul-13 18:39 kwcoco/coco_sql_dataset.py
+-rw-rw-rw-  2.0 unx     6451 b- defN 23-Jul-13 18:39 kwcoco/coco_sql_dataset.pyi
+-rw-r--r--  2.0 unx    16155 b- defN 23-Jul-13 18:39 kwcoco/compat_dataset.py
+-rw-rw-rw-  2.0 unx     1757 b- defN 23-Jul-13 18:39 kwcoco/compat_dataset.pyi
+-rw-r--r--  2.0 unx      328 b- defN 23-Jul-13 18:39 kwcoco/exceptions.py
+-rw-rw-rw-  2.0 unx      128 b- defN 23-Jul-13 18:39 kwcoco/exceptions.pyi
+-rw-r--r--  2.0 unx     2639 b- defN 23-Jul-13 18:39 kwcoco/kpf.py
+-rw-rw-rw-  2.0 unx       74 b- defN 23-Jul-13 18:39 kwcoco/kpf.pyi
+-rw-r--r--  2.0 unx    13342 b- defN 23-Jul-13 18:39 kwcoco/kw18.py
+-rw-rw-rw-  2.0 unx      645 b- defN 23-Jul-13 18:39 kwcoco/kw18.pyi
+-rw-rw-rw-  2.0 unx        0 b- defN 23-Jul-13 18:39 kwcoco/py.typed
+-rw-r--r--  2.0 unx      402 b- defN 23-Jul-13 18:39 kwcoco/sensorchan_spec.py
+-rw-rw-rw-  2.0 unx      325 b- defN 23-Jul-13 18:39 kwcoco/sensorchan_spec.pyi
+-rw-r--r--  2.0 unx        0 b- defN 23-Jul-13 18:39 kwcoco/cli/__init__.py
+-rw-r--r--  2.0 unx     3608 b- defN 23-Jul-13 18:39 kwcoco/cli/__main__.py
+-rw-r--r--  2.0 unx     3372 b- defN 23-Jul-13 18:39 kwcoco/cli/coco_conform.py
+-rw-r--r--  2.0 unx     5725 b- defN 23-Jul-13 18:39 kwcoco/cli/coco_eval.py
+-rw-r--r--  2.0 unx     2293 b- defN 23-Jul-13 18:39 kwcoco/cli/coco_grab.py
+-rw-r--r--  2.0 unx     7441 b- defN 23-Jul-13 18:39 kwcoco/cli/coco_info.py
+-rw-r--r--  2.0 unx     4164 b- defN 23-Jul-13 18:39 kwcoco/cli/coco_modify_categories.py
+-rw-r--r--  2.0 unx     2952 b- defN 23-Jul-13 18:39 kwcoco/cli/coco_move.py
+-rw-r--r--  2.0 unx     3470 b- defN 23-Jul-13 18:39 kwcoco/cli/coco_move_assets.py
+-rw-r--r--  2.0 unx     7138 b- defN 23-Jul-13 18:39 kwcoco/cli/coco_reroot.py
+-rw-r--r--  2.0 unx     4680 b- defN 23-Jul-13 18:39 kwcoco/cli/coco_show.py
+-rw-r--r--  2.0 unx     6731 b- defN 23-Jul-13 18:39 kwcoco/cli/coco_split.py
+-rw-r--r--  2.0 unx     8490 b- defN 23-Jul-13 18:39 kwcoco/cli/coco_stats.py
+-rw-r--r--  2.0 unx    13369 b- defN 23-Jul-13 18:39 kwcoco/cli/coco_subset.py
+-rw-r--r--  2.0 unx     4904 b- defN 23-Jul-13 18:39 kwcoco/cli/coco_toydata.py
+-rw-r--r--  2.0 unx     3879 b- defN 23-Jul-13 18:39 kwcoco/cli/coco_union.py
+-rw-r--r--  2.0 unx     7957 b- defN 23-Jul-13 18:39 kwcoco/cli/coco_validate.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jul-13 18:39 kwcoco/data/__init__.py
+-rw-r--r--  2.0 unx    21744 b- defN 23-Jul-13 18:39 kwcoco/data/grab_camvid.py
+-rw-r--r--  2.0 unx     5849 b- defN 23-Jul-13 18:39 kwcoco/data/grab_cifar.py
+-rw-r--r--  2.0 unx      720 b- defN 23-Jul-13 18:39 kwcoco/data/grab_datasets.py
+-rw-r--r--  2.0 unx     6857 b- defN 23-Jul-13 18:39 kwcoco/data/grab_domainnet.py
+-rw-r--r--  2.0 unx     9189 b- defN 23-Jul-13 18:39 kwcoco/data/grab_spacenet.py
+-rw-r--r--  2.0 unx     9865 b- defN 23-Jul-13 18:39 kwcoco/data/grab_voc.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jul-13 18:39 kwcoco/demo/__init__.py
+-rw-r--r--  2.0 unx    23449 b- defN 23-Jul-13 18:39 kwcoco/demo/boids.py
+-rw-r--r--  2.0 unx    14007 b- defN 23-Jul-13 18:39 kwcoco/demo/perterb.py
+-rw-r--r--  2.0 unx      500 b- defN 23-Jul-13 18:39 kwcoco/demo/toydata.py
+-rw-r--r--  2.0 unx    20032 b- defN 23-Jul-13 18:39 kwcoco/demo/toydata_image.py
+-rw-r--r--  2.0 unx    55280 b- defN 23-Jul-13 18:39 kwcoco/demo/toydata_video.py
+-rw-r--r--  2.0 unx    20195 b- defN 23-Jul-13 18:39 kwcoco/demo/toypatterns.py
+-rw-r--r--  2.0 unx      699 b- defN 23-Jul-13 18:39 kwcoco/metrics/__init__.py
+-rw-r--r--  2.0 unx    27823 b- defN 23-Jul-13 18:39 kwcoco/metrics/assignment.py
+-rw-r--r--  2.0 unx    22260 b- defN 23-Jul-13 18:39 kwcoco/metrics/clf_report.py
+-rw-r--r--  2.0 unx    52248 b- defN 23-Jul-13 18:39 kwcoco/metrics/confusion_measures.py
+-rw-r--r--  2.0 unx    43342 b- defN 23-Jul-13 18:39 kwcoco/metrics/confusion_vectors.py
+-rw-r--r--  2.0 unx    60057 b- defN 23-Jul-13 18:39 kwcoco/metrics/detect_metrics.py
+-rw-r--r--  2.0 unx    23045 b- defN 23-Jul-13 18:39 kwcoco/metrics/drawing.py
+-rw-r--r--  2.0 unx     6984 b- defN 23-Jul-13 18:39 kwcoco/metrics/functional.py
+-rw-r--r--  2.0 unx     7336 b- defN 23-Jul-13 18:39 kwcoco/metrics/sklearn_alts.py
+-rw-r--r--  2.0 unx       77 b- defN 23-Jul-13 18:39 kwcoco/metrics/util.py
+-rw-r--r--  2.0 unx    15348 b- defN 23-Jul-13 18:39 kwcoco/metrics/voc_metrics.py
+-rw-r--r--  2.0 unx     5567 b- defN 23-Jul-13 18:39 kwcoco/util/__init__.py
+-rw-r--r--  2.0 unx     3765 b- defN 23-Jul-13 18:39 kwcoco/util/dict_like.py
+-rw-r--r--  2.0 unx     9344 b- defN 23-Jul-13 18:39 kwcoco/util/dict_proxy2.py
+-rw-r--r--  2.0 unx    11679 b- defN 23-Jul-13 18:39 kwcoco/util/ijson_ext.py
+-rw-r--r--  2.0 unx    13191 b- defN 23-Jul-13 18:39 kwcoco/util/jsonschema_elements.py
+-rw-r--r--  2.0 unx      211 b- defN 23-Jul-13 18:39 kwcoco/util/lazy_frame_backends.py
+-rw-r--r--  2.0 unx    10304 b- defN 23-Jul-13 18:39 kwcoco/util/util_archive.py
+-rw-r--r--  2.0 unx      644 b- defN 23-Jul-13 18:39 kwcoco/util/util_deprecate.py
+-rw-r--r--  2.0 unx     2733 b- defN 23-Jul-13 18:39 kwcoco/util/util_eval.py
+-rw-r--r--  2.0 unx      185 b- defN 23-Jul-13 18:39 kwcoco/util/util_futures.py
+-rw-r--r--  2.0 unx     9367 b- defN 23-Jul-13 18:39 kwcoco/util/util_json.py
+-rw-r--r--  2.0 unx     3678 b- defN 23-Jul-13 18:39 kwcoco/util/util_monkey.py
+-rw-r--r--  2.0 unx     2988 b- defN 23-Jul-13 18:39 kwcoco/util/util_parallel.py
+-rw-r--r--  2.0 unx     3711 b- defN 23-Jul-13 18:39 kwcoco/util/util_reroot.py
+-rw-r--r--  2.0 unx     6153 b- defN 23-Jul-13 18:39 kwcoco/util/util_sklearn.py
+-rw-r--r--  2.0 unx     4809 b- defN 23-Jul-13 18:39 kwcoco/util/util_special_json.py
+-rw-r--r--  2.0 unx     2720 b- defN 23-Jul-13 18:39 kwcoco/util/util_truncate.py
+-rw-r--r--  2.0 unx     2015 b- defN 23-Jul-13 18:39 kwcoco/util/util_windows.py
+-rw-r--r--  2.0 unx     1607 b- defN 23-Jul-13 18:39 kwcoco/util/delayed_ops/__init__.py
+-rw-rw-rw-  2.0 unx    11343 b- defN 23-Jul-13 18:39 kwcoco-0.6.3.dist-info/LICENSE
+-rw-r--r--  2.0 unx    68044 b- defN 23-Jul-13 18:39 kwcoco-0.6.3.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-13 18:39 kwcoco-0.6.3.dist-info/WHEEL
+-rw-r--r--  2.0 unx       52 b- defN 23-Jul-13 18:39 kwcoco-0.6.3.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx       16 b- defN 23-Jul-13 18:39 kwcoco-0.6.3.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     9311 b- defN 23-Jul-13 18:39 kwcoco-0.6.3.dist-info/RECORD
+113 files, 1383997 bytes uncompressed, 353302 bytes compressed:  74.5%
```

## zipnote {}

```diff
@@ -1,7 +1,43 @@
+Filename: examples/__init__.py
+Comment: 
+
+Filename: examples/bench_large_hyperspectral.py
+Comment: 
+
+Filename: examples/demo_kwcoco_spaces.py
+Comment: 
+
+Filename: examples/demo_sql_and_zip_files.py
+Comment: 
+
+Filename: examples/draw_gt_and_predicted_boxes.py
+Comment: 
+
+Filename: examples/faq.py
+Comment: 
+
+Filename: examples/getting_started_existing_dataset.py
+Comment: 
+
+Filename: examples/loading_multispectral_data.py
+Comment: 
+
+Filename: examples/modification_example.py
+Comment: 
+
+Filename: examples/shifting_annots.py
+Comment: 
+
+Filename: examples/simple_kwcoco_torch_dataset.py
+Comment: 
+
+Filename: examples/vectorized_interface.py
+Comment: 
+
 Filename: kwcoco/__init__.py
 Comment: 
 
 Filename: kwcoco/__main__.py
 Comment: 
 
 Filename: kwcoco/__main__.pyi
@@ -111,17 +147,26 @@
 
 Filename: kwcoco/cli/coco_eval.py
 Comment: 
 
 Filename: kwcoco/cli/coco_grab.py
 Comment: 
 
+Filename: kwcoco/cli/coco_info.py
+Comment: 
+
 Filename: kwcoco/cli/coco_modify_categories.py
 Comment: 
 
+Filename: kwcoco/cli/coco_move.py
+Comment: 
+
+Filename: kwcoco/cli/coco_move_assets.py
+Comment: 
+
 Filename: kwcoco/cli/coco_reroot.py
 Comment: 
 
 Filename: kwcoco/cli/coco_show.py
 Comment: 
 
 Filename: kwcoco/cli/coco_split.py
@@ -180,50 +225,14 @@
 
 Filename: kwcoco/demo/toydata_video.py
 Comment: 
 
 Filename: kwcoco/demo/toypatterns.py
 Comment: 
 
-Filename: kwcoco/examples/__init__.py
-Comment: 
-
-Filename: kwcoco/examples/bench_large_hyperspectral.py
-Comment: 
-
-Filename: kwcoco/examples/demo_kwcoco_spaces.py
-Comment: 
-
-Filename: kwcoco/examples/demo_sql_and_zip_files.py
-Comment: 
-
-Filename: kwcoco/examples/draw_gt_and_predicted_boxes.py
-Comment: 
-
-Filename: kwcoco/examples/faq.py
-Comment: 
-
-Filename: kwcoco/examples/getting_started_existing_dataset.py
-Comment: 
-
-Filename: kwcoco/examples/loading_multispectral_data.py
-Comment: 
-
-Filename: kwcoco/examples/modification_example.py
-Comment: 
-
-Filename: kwcoco/examples/shifting_annots.py
-Comment: 
-
-Filename: kwcoco/examples/simple_kwcoco_torch_dataset.py
-Comment: 
-
-Filename: kwcoco/examples/vectorized_interface.py
-Comment: 
-
 Filename: kwcoco/metrics/__init__.py
 Comment: 
 
 Filename: kwcoco/metrics/assignment.py
 Comment: 
 
 Filename: kwcoco/metrics/clf_report.py
@@ -258,14 +267,17 @@
 
 Filename: kwcoco/util/dict_like.py
 Comment: 
 
 Filename: kwcoco/util/dict_proxy2.py
 Comment: 
 
+Filename: kwcoco/util/ijson_ext.py
+Comment: 
+
 Filename: kwcoco/util/jsonschema_elements.py
 Comment: 
 
 Filename: kwcoco/util/lazy_frame_backends.py
 Comment: 
 
 Filename: kwcoco/util/util_archive.py
@@ -303,26 +315,26 @@
 
 Filename: kwcoco/util/util_windows.py
 Comment: 
 
 Filename: kwcoco/util/delayed_ops/__init__.py
 Comment: 
 
-Filename: kwcoco-0.6.2.dist-info/LICENSE
+Filename: kwcoco-0.6.3.dist-info/LICENSE
 Comment: 
 
-Filename: kwcoco-0.6.2.dist-info/METADATA
+Filename: kwcoco-0.6.3.dist-info/METADATA
 Comment: 
 
-Filename: kwcoco-0.6.2.dist-info/WHEEL
+Filename: kwcoco-0.6.3.dist-info/WHEEL
 Comment: 
 
-Filename: kwcoco-0.6.2.dist-info/entry_points.txt
+Filename: kwcoco-0.6.3.dist-info/entry_points.txt
 Comment: 
 
-Filename: kwcoco-0.6.2.dist-info/top_level.txt
+Filename: kwcoco-0.6.3.dist-info/top_level.txt
 Comment: 
 
-Filename: kwcoco-0.6.2.dist-info/RECORD
+Filename: kwcoco-0.6.3.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## kwcoco/__init__.py

```diff
@@ -265,15 +265,15 @@
 Testing:
 
     EAGER_IMPORT=1 python -c "import kwcoco"
     python -c "import kwcoco; print(kwcoco.CocoSqlDatabase)"
 
 """
 
-__version__ = '0.6.2'
+__version__ = '0.6.3'
 
 
 __submodules__ = {
     'abstract_coco_dataset': ['AbstractCocoDataset'],
     'coco_dataset': ['CocoDataset'],
     'coco_image': ['CocoImage'],
     'category_tree': ['CategoryTree'],
```

## kwcoco/category_tree.pyi

```diff
@@ -12,15 +12,17 @@
     idx_to_node: List[str]
     id_to_node: Dict[int, str]
     node_to_id: Dict[str, int]
     node_to_idx: Dict[str, int]
     graph: networkx.Graph
     idx_groups: List[List[int]]
 
-    def __init__(self, graph: nx.DiGraph = None, checks: bool = True) -> None:
+    def __init__(self,
+                 graph: nx.DiGraph | None = None,
+                 checks: bool = True) -> None:
         ...
 
     def copy(self):
         ...
 
     @classmethod
     def from_mutex(cls, nodes: List[str], bg_hack: bool = ...):
```

## kwcoco/coco_dataset.py

```diff
@@ -43,14 +43,16 @@
           separate json file. Perhaps allow genric pointer support? Might get
           messy.
 
     - [ ] Reroot needs to be redesigned very carefully.
 
     - [ ] Allow parts of the kwcoco file to be references to other json files.
 
+    - [ ] Add top-level track table (in progress)
+
 References:
     .. [CocoFormat] http://cocodataset.org/#format-data
     .. [PyCocoToolsMask] https://github.com/nightrome/cocostuffapi/blob/master/PythonAPI/pycocotools/mask.py
     .. [CocoTutorial] https://www.immersivelimit.com/tutorials/create-coco-annotations-from-scratch/#coco-dataset-format
 """
 import copy
 import sys
@@ -110,14 +112,15 @@
     'info',
     'licenses',
     'categories',
     'keypoint_categories',  # support only partially implemented
     'videos',
     'images',
     'annotations',
+    'tracks',
 ]
 
 
 class MixinCocoDepricate(object):
     """
     These functions are marked for deprication and will be removed
     """
@@ -1423,16 +1426,19 @@
             self._build_hashid()
             if enable_cache:
                 hashid_cache_data = {
                     'hashid': self.hashid,
                     'hashid_parts': self.hashid_parts,
                     'status_key': status_key,
                 }
-                hashid_sidecar_fpath.parent.ensuredir()
-                hashid_sidecar_fpath.write_text(json_w.dumps(hashid_cache_data))
+                try:
+                    hashid_sidecar_fpath.parent.ensuredir()
+                    hashid_sidecar_fpath.write_text(json_w.dumps(hashid_cache_data))
+                except PermissionError as ex:
+                    warnings.warn(f'Cannot write a cached hashid: {repr(ex)}')
         return self.hashid
 
     @classmethod
     def _cached_hashid_for(cls, fpath):
         """
         Lookup the cached hashid for a kwcoco json file if it exists.
         """
@@ -1574,19 +1580,24 @@
         def _gen_missing_imgs():
             for img in self.dataset['images']:
                 gpath = join(self.bundle_dpath, img['file_name'])
                 if not exists(gpath):
                     yield img
 
         def _has_download_permission(_HAS_PREMISSION=[False]):
-            # TODO: use rich
             if not _HAS_PREMISSION[0] or ub.argflag(('-y', '--yes')):
-                ans = input('is it ok to download? (enter y for yes)')
-                if ans in ['yes', 'y']:
-                    _HAS_PREMISSION[0] = True
+                try:
+                    from rich.prompt import Confirm
+                    ans = Confirm.ask('is it ok to download?')
+                    if ans:
+                        _HAS_PREMISSION[0] = True
+                except ImportError:
+                    ans = input('is it ok to download? (enter y for yes)')
+                    if ans in ['yes', 'y']:
+                        _HAS_PREMISSION[0] = True
             return _HAS_PREMISSION[0]
 
         if gids is None:
             gids = _gen_missing_imgs()
 
         for img in ub.ProgIter(gids, desc='ensure image data'):
             if 'url' in img:
@@ -1851,25 +1862,25 @@
 
     def reroot(self, new_root=None,
                old_prefix=None,
                new_prefix=None,
                absolute=False,
                check=True,
                safe=True,
-               verbose=0):
+               verbose=1):
         """
         Modify the prefix of the image/data paths onto a new image/data root.
 
         Args:
-            new_root (str | None):
-                New image root. If unspecified the current ``self.bundle_dpath`` is
-                used. If old_prefix and new_prefix are unspecified, they will
-                attempt to be determined based on the current root (which
-                assumes the file paths exist at that root) and this new root.
-                Defaults to None.
+            new_root (str | PathLike | None):
+                New image root. If unspecified the current
+                ``self.bundle_dpath`` is used. If old_prefix and new_prefix are
+                unspecified, they will attempt to be determined based on the
+                current root (which assumes the file paths exist at that root)
+                and this new root.  Defaults to None.
 
             old_prefix (str | None):
                 If specified, removes this prefix from file names.
                 This also prevents any inferences that might be made via
                 "new_root". Defaults to None.
 
             new_prefix (str | None):
@@ -1895,41 +1906,48 @@
         CommandLine:
             xdoctest -m kwcoco.coco_dataset MixinCocoExtras.reroot
 
         TODO:
             - [ ] Incorporate maximum ordered subtree embedding?
 
         Example:
+            >>> # xdoctest: +REQUIRES(module:rich)
             >>> import kwcoco
-            >>> def report(dset, name):
+            >>> import ubelt as ub
+            >>> import rich
+            >>> def report(dset):
             >>>     gid = 1
-            >>>     abs_fpath = dset.get_image_fpath(gid)
+            >>>     abs_fpath = ub.Path(dset.get_image_fpath(gid))
             >>>     rel_fpath = dset.index.imgs[gid]['file_name']
-            >>>     color = 'green' if exists(abs_fpath) else 'red'
-            >>>     print('strategy_name = {!r}'.format(name))
-            >>>     print(ub.color_text('abs_fpath = {!r}'.format(abs_fpath), color))
-            >>>     print('rel_fpath = {!r}'.format(rel_fpath))
+            >>>     color = 'green' if abs_fpath.exists() else 'red'
+            >>>     print(ub.color_text(f'abs_fpath = {abs_fpath!r}', color))
+            >>>     print(f'rel_fpath = {rel_fpath!r}')
             >>> dset = self = kwcoco.CocoDataset.demo()
             >>> # Change base relative directory
             >>> bundle_dpath = ub.expandpath('~')
-            >>> print('ORIG self.imgs = {!r}'.format(self.imgs))
-            >>> print('ORIG dset.bundle_dpath = {!r}'.format(dset.bundle_dpath))
-            >>> print('NEW bundle_dpath       = {!r}'.format(bundle_dpath))
-            >>> self.reroot(bundle_dpath)
-            >>> report(self, 'self')
-            >>> print('NEW self.imgs = {!r}'.format(self.imgs))
+            >>> rich.print('ORIG self.imgs = {}'.format(ub.urepr(self.imgs, nl=1)))
+            >>> rich.print('ORIG dset.bundle_dpath = {!r}'.format(dset.bundle_dpath))
+            >>> rich.print('NEW(1) bundle_dpath       = {!r}'.format(bundle_dpath))
+            >>> # Test relative reroot
+            >>> rich.print('[blue] --- 1. RELATIVE REROOT ---')
+            >>> self.reroot(bundle_dpath, verbose=3)
+            >>> report(self)
+            >>> rich.print('NEW(1) self.imgs = {}'.format(ub.urepr(self.imgs, nl=1)))
             >>> if not ub.WIN32:
             >>>     assert self.imgs[1]['file_name'].startswith('.cache')
-
-            >>> # Use absolute paths
-            >>> self.reroot(absolute=True)
+            >>> # Test absolute reroot
+            >>> rich.print('[blue] --- 2. ABSOLUTE REROOT ---')
+            >>> self.reroot(absolute=True, verbose=3)
+            >>> rich.print('NEW(2) self.imgs = {}'.format(ub.urepr(self.imgs, nl=1)))
             >>> assert self.imgs[1]['file_name'].startswith(bundle_dpath)
 
             >>> # Switch back to relative paths
+            >>> rich.print('[blue] --- 3. ABS->REL REROOT ---')
             >>> self.reroot()
+            >>> rich.print('NEW(3) self.imgs = {}'.format(ub.urepr(self.imgs, nl=1)))
             >>> if not ub.WIN32:
             >>>     assert self.imgs[1]['file_name'].startswith('.cache')
 
         Example:
             >>> # demo with auxiliary data
             >>> import kwcoco
             >>> self = kwcoco.CocoDataset.demo('shapes8', aux=True)
@@ -1940,32 +1958,38 @@
             >>> print(self.imgs[1]['file_name'])
             >>> print(self.imgs[1]['auxiliary'][0]['file_name'])
             >>> if not ub.WIN32:
             >>>     assert self.imgs[1]['file_name'].startswith('.cache')
             >>>     assert self.imgs[1]['auxiliary'][0]['file_name'].startswith('.cache')
 
         Ignore:
-            See ~/code/kwcoco/dev/devcheck_reroot.py
+            See ~/code/kwcoco/dev/devcheck/devcheck_reroot.py
         """
         cur_bundle_dpath = self.bundle_dpath
+        if cur_bundle_dpath == '':
+            cur_bundle_dpath = '.'
         new_bundle_dpath = self.bundle_dpath if new_root is None else new_root
+        new_bundle_dpath = os.fspath(new_bundle_dpath)
+
+        # Find the the prefix that to make new relative paths work.
+        rel_prefix = os.path.relpath(cur_bundle_dpath, new_bundle_dpath)
 
         if absolute:
             new_bundle_dpath = os.fspath(ub.Path(new_bundle_dpath).absolute())
 
-        if verbose:
+        if verbose > 1:
             print('kwcoco.reroot')
             print(' * new_bundle_dpath = {}'.format(ub.urepr(new_bundle_dpath, nl=1)))
             print(' * cur_bundle_dpath = {}'.format(ub.urepr(cur_bundle_dpath, nl=1)))
             print(f' * old_prefix={old_prefix}')
             print(f' * new_prefix={new_prefix}')
             print(f' * absolute={absolute}')
             print(f' * safe={safe}')
             print(f' * check={check}')
-            if verbose > 1:
+            if verbose > 2:
                 # First assets
                 if len(self.dataset['images']):
                     from kwcoco.coco_image import CocoImage
                     first_image = CocoImage(self.dataset['images'][0], dset=self)
                     first_image_filepaths = list(first_image.iter_image_filepaths(with_bundle=False))
                     print(' * first_image_filepaths = {}'.format(ub.urepr(first_image_filepaths, nl=1)))
                 else:
@@ -1982,62 +2006,72 @@
             """ Reroot a single file """
 
             # TODO: can this logic be cleaned up, its difficult to follow and
             # describe. The gist is we want reroot to modify the file names of
             # the images based on the new root, unless we are explicitly given
             # information about new and old prefixes. Can we do better than
             # this?
-
+            _old_fname = file_name
             file_name = _normalize_prefix(file_name)
             cur_gpath = join(cur_bundle_dpath, file_name)
 
             if old_prefix is not None:
                 if file_name.startswith(old_prefix):
                     file_name = relpath(file_name, old_prefix)
                 elif cur_gpath.startswith(old_prefix):
                     file_name = relpath(cur_gpath, old_prefix)
 
             # If we don't specify new or old prefixes, but new_root was
             # specified then modify relative file names to be correct with
             # respect to this new root (assuming the previous root was also
             # valid)
-            if old_prefix is None and new_prefix is None:
-                # This is not a good check, fails if we want to
-                # do a relative reroot outside of the original dataset
-                if new_bundle_dpath is not None and cur_gpath.startswith(new_bundle_dpath):
-                    file_name = relpath(cur_gpath, new_bundle_dpath)
+            DO_OLD_CHECK = 0
+            if DO_OLD_CHECK:
+                if old_prefix is None and new_prefix is None:
+                    # This is not a good check, fails if we want to
+                    # do a relative reroot outside of the original dataset
+                    if new_bundle_dpath is not None and cur_gpath.startswith(new_bundle_dpath):
+                        file_name = relpath(cur_gpath, new_bundle_dpath)
 
             if new_prefix is not None:
                 file_name = join(new_prefix, file_name)
 
             if absolute:
                 new_file_name = join(new_bundle_dpath, file_name)
             else:
-                new_file_name = file_name
+                new_file_name = join(rel_prefix, file_name)
+                if os.path.isabs(new_file_name):
+                    # Handle absolute -> relative case
+                    new_file_name = relpath(new_file_name, new_bundle_dpath)
 
             if check:
                 new_gpath = join(new_bundle_dpath, new_file_name)
                 if not exists(new_gpath):
                     print('ERROR')
-                    print(' * file_name = {!r}'.format(file_name))
+                    print(' * file_name (old) = {!r}'.format(_old_fname))
+                    print(' * file_name (new) = {!r}'.format(file_name))
                     print(' * cur_gpath = {!r}'.format(cur_gpath))
                     print(' * new_gpath = {!r}'.format(new_gpath))
                     print(' * new_file_name = {!r}'.format(new_file_name))
                     print(' * cur_bundle_dpath = {!r}'.format(cur_bundle_dpath))
                     print(' * new_bundle_dpath = {!r}'.format(new_bundle_dpath))
                     raise Exception(
                         'Image does not exist: {!r}'.format(new_gpath))
             return new_file_name
 
         # from kwcoco.util import util_reroot
 
+        num_images = len(self.imgs)
+        enable_prog = verbose > 0
+
         if safe:
             # First compute all new values in memory but don't overwrite
             gid_to_new = {}
-            for gid, img in self.imgs.items():
+            prog = ub.ProgIter(self.imgs.items(), total=num_images, enabled=enable_prog, desc='prepare reroot')
+            for gid, img in prog:
                 gname = img.get('file_name', None)
                 try:
                     new = {}
                     if gname is not None:
                         new['file_name'] = _reroot_path(gname)
                     if 'auxiliary' in img:
                         new['auxiliary'] = aux_fname = []
@@ -2050,25 +2084,27 @@
                     gid_to_new[gid] = new
                 except Exception:
                     # img_repr = ub.urepr(img)
                     asset_fpaths = list(self.coco_image(img['id']).iter_image_filepaths())
                     raise Exception('Failed to reroot gid={} with fpaths={}'.format(img['id'], asset_fpaths))
 
             # Overwrite old values
-            for gid, new in gid_to_new.items():
+            prog = ub.ProgIter(gid_to_new.items(), total=num_images, enabled=enable_prog, desc='finalize reroot')
+            for gid, new in prog:
                 img = self.imgs[gid]
                 img['file_name'] = new.get('file_name', None)
                 if 'auxiliary' in new:
                     for aux_fname, aux in zip(new['auxiliary'], img['auxiliary']):
                         aux['file_name'] = aux_fname
                 if 'assets' in new:
                     for aux_fname, aux in zip(new['assets'], img['assets']):
                         aux['file_name'] = aux_fname
         else:
-            for img in self.imgs.values():
+            prog = ub.ProgIter(self.imgs.values(), total=num_images, enabled=enable_prog, desc='rerooting')
+            for img in prog:
                 try:
                     gname = img.get('file_name', None)
                     if gname is not None:
                         img['file_name'] = _reroot_path(gname)
                     for aux in img.get('auxiliary', []):
                         aux['file_name'] = _reroot_path(aux['file_name'])
                     for aux in img.get('assets', []):
@@ -2690,23 +2726,31 @@
                             if chan in seen:
                                 gid = img['id']
                                 _error('The chan={} is specified more than once in gid={}'.format(chan, gid))
                             seen.add(chan)
         if config.get('missing', True):
             missing = dset.missing_images(check_aux=True, verbose=verbose)
             if missing:
-                msg = 'There are {} missing images'.format(len(missing))
+                msg = ub.paragraph(
+                    f'''
+                    There are {len(missing)} missing images.
+                    The first one is {missing[0][1]!r}.
+                    ''')
                 _error(msg)
                 result['missing'] = missing
 
         if config.get('corrupted', False):
             corrupted = dset.corrupted_images(check_aux=True, verbose=verbose,
                                               workers=config.get('workers', 0))
             if corrupted:
-                msg = 'There are {} corrupted images'.format(len(corrupted))
+                msg = ub.paragraph(
+                    f'''
+                    There are {len(corrupted)} corrupted images.
+                    The first one is {corrupted[0][1]!r}.
+                    ''')
                 _error(msg)
                 result['corrupted'] = corrupted
 
         if config.get('require_relative', False):
             rr = config.get('require_relative', False)
             for gid in dset.imgs.keys():
                 coco_img = dset.coco_image(gid)
@@ -5064,14 +5108,15 @@
         if data is None:
             # TODO: rely on subset of SPEC keys
             data = {
                 'categories': [],
                 'videos': [],
                 'images': [],
                 'annotations': [],
+                'tracks': [],
                 'licenses': [],
                 'info': [],
             }
 
         fpath = None
         inferred_date_type = None
         if isinstance(data, dict):
@@ -5174,15 +5219,26 @@
 
             # If data is a path it gives us the absolute location of the root
             if tag is None:
                 tag = key
 
         # Backwards compat hack, allow the coco file to specify the
         # bundle_dpath
+        # TODO: deprecate img_root
         if isinstance(data, dict) and 'img_root' in data:
+            ub.schedule_deprecation(
+                'kwcoco', name='img_root', type='dataset member',
+                deprecate='0.6.3', error='1.0.0', remove='1.1.0',
+                migration=ub.paragraph(
+                    '''
+                    Ensure the location of the saved kwcoco file encodes the
+                    bundle dpath or ensure bundle_dpath is correctly set in the
+                    in-memory CocoDataset object.
+                    ''')
+            )
             # allow image root to be specified in the dataset
             # we refer to this as a json data "body root".
             body_root = data.get('img_root', '')
             if body_root is None:
                 body_root = ''
             elif isinstance(body_root, str):
                 _tmp = ub.expandpath(body_root)
@@ -5233,17 +5289,45 @@
     @property
     def fpath(self):
         """ In the future we will deprecate img_root for bundle_dpath """
         return self._fpath
 
     @fpath.setter
     def fpath(self, value):
-        self._fpath = value if value is None else value
+        # Cant use update fpath because of reroot checks.
+        # self._update_fpath(value)
+        self._fpath = value
         self._infer_dirs()
 
+    def _update_fpath(self, new_fpath):
+        # New method for more robustly updating the file path and bundle
+        # directory, still a WIP. Only works when the current dataset is
+        # already valid.
+        if new_fpath is None:
+            # Bundle directory is clobbered, so we should make everything
+            # absolute
+            self.reroot(absolute=True)
+        else:
+            old_fpath = self.fpath
+            if old_fpath is not None:
+                old_fpath_ = ub.Path(old_fpath)
+                new_fpath_ = ub.Path(new_fpath)
+
+                same_bundle = (
+                    (old_fpath_.parent == new_fpath_.parent) or
+                    (old_fpath_.resolve() == new_fpath_.resolve())
+                )
+                if not same_bundle:
+                    # The bundle directory has changed, so we need to reroot
+                    new_root = new_fpath_.parent
+                    self.reroot(new_root)
+
+            self._fpath = new_fpath
+            self._infer_dirs()
+
     def _infer_dirs(self):
         """
         Ignore:
             self = dset
         """
         data_fpath = self.fpath
         if data_fpath is not None:
@@ -5978,46 +6062,45 @@
         # TODO: add an option such that the union will fail if the names
         # are not already disjoint. Alternatively, it could be the case
         # that a union between images with the same name really does
         # mean that they are the same image.
         unique_img_names = UniqueNameRemapper()
         unique_video_names = UniqueNameRemapper()
 
+        def update_ifnotin(d1, d2):
+            """ copies keys from d2 that doent exist in d1 into d1 """
+            for k, v in d2.items():
+                if k not in d1:
+                    d1[k] = v
+            return d1
+
+        def _has_duplicates(items):
+            seen = set()
+            for item in items:
+                if item in seen:
+                    return True
+                seen.add(item)
+            return False
+
         def _coco_union(relative_dsets, common_root):
             """ union of dictionary based data structure """
             # TODO: rely on subset of SPEC keys
             merged = _dict([
                 ('licenses', []),
                 ('info', []),
                 ('categories', []),
                 ('videos', []),
                 ('images', []),
                 ('annotations', []),
             ])
 
             # TODO: need to handle keypoint_categories
-
             merged_cat_name_to_id = {}
             merged_kp_name_to_id = {}
 
-            def update_ifnotin(d1, d2):
-                """ copies keys from d2 that doent exist in d1 into d1 """
-                for k, v in d2.items():
-                    if k not in d1:
-                        d1[k] = v
-                return d1
-
-            def _has_duplicates(items):
-                seen = set()
-                for item in items:
-                    if item in seen:
-                        return True
-                    seen.add(item)
-                return False
-
             # Check if the image-ids are unique and can be preserved
             _all_imgs = (img for _, _, d in relative_dsets for img in d['images'])
             _all_gids = (img['id'] for img in _all_imgs)
             preserve_gids = not _has_duplicates(_all_gids)
 
             # Check if the video-ids are unique and can be preserved
             _all_videos = (video for _, _, d in relative_dsets
@@ -6359,14 +6442,15 @@
             >>> dset = kwcoco.CocoDataset.demo('vidshapes32')
             >>> postgres_dset = dset.view_sql(backend='postgresql', force_rewrite=True)
             >>> sqlite_dset = dset.view_sql(backend='sqlite', force_rewrite=True)
             >>> list(dset.anns.keys())
             >>> list(postgres_dset.anns.keys())
             >>> list(sqlite_dset.anns.keys())
 
+        Ignore:
             import timerit
             ti = timerit.Timerit(100, bestof=10, verbose=2)
             for timer in ti.reset('dct_dset'):
                 dset.annots().detections
             for timer in ti.reset('postgresql'):
                 postgres_dset.annots().detections
             for timer in ti.reset('sqlite'):
@@ -6404,14 +6488,15 @@
         >>> self.show_image(gid=1)
         >>> kwplot.show_if_requested()
     """
     import kwimage
     from kwimage.im_demodata import _TEST_IMAGES
     from os.path import commonprefix
 
+    # FIXME: be robust to broken urls
     test_imgs_keys = ['astro', 'carl', 'stars']
     urls = {k: _TEST_IMAGES[k]['url'] for k in test_imgs_keys}
     gpaths = {k: kwimage.grab_test_image_fpath(k) for k in test_imgs_keys}
     img_root = commonprefix(list(gpaths.values()))
 
     gpath1, gpath2, gpath3 = ub.take(gpaths, test_imgs_keys)
     url1, url2, url3 = ub.take(urls, test_imgs_keys)
```

## kwcoco/coco_dataset.pyi

```diff
@@ -1,9 +1,8 @@
 import kwcoco
-from typing import Union
 import numpy as np
 from numpy import ndarray
 from os import PathLike
 from numpy.typing import ArrayLike
 from typing import Dict
 import networkx
 from typing import List
@@ -11,14 +10,15 @@
 from typing import Callable
 import kwcoco.coco_objects1d
 import kwimage
 from typing import Any
 from typing import IO
 import ubelt as ub
 from _typeshed import Incomplete
+from collections.abc import Generator
 from kwcoco.abstract_coco_dataset import AbstractCocoDataset
 from types import ModuleType
 from typing import Any
 
 KWCOCO_USE_UJSON: Incomplete
 json_r: ModuleType
 json_w: ModuleType
@@ -37,34 +37,34 @@
         ...
 
 
 class MixinCocoAccessors:
 
     def delayed_load(self,
                      gid: int,
-                     channels: kwcoco.FusedChannelSpec = None,
+                     channels: kwcoco.FusedChannelSpec | None = None,
                      space: str = 'image'):
         ...
 
     def load_image(self,
-                   gid_or_img: Union[int, dict],
-                   channels: Union[str, None] = None) -> np.ndarray:
+                   gid_or_img: int | dict,
+                   channels: str | None = None) -> np.ndarray:
         ...
 
     def get_image_fpath(self,
-                        gid_or_img: Union[int, dict],
-                        channels: Union[str, None] = None) -> PathLike:
+                        gid_or_img: int | dict,
+                        channels: str | None = None) -> PathLike:
         ...
 
-    def get_auxiliary_fpath(self, gid_or_img: Union[int, dict], channels: str):
+    def get_auxiliary_fpath(self, gid_or_img: int | dict, channels: str):
         ...
 
     def load_annot_sample(self,
                           aid_or_ann,
-                          image: Union[ArrayLike, None] = None,
+                          image: ArrayLike | None = None,
                           pad: Incomplete | None = ...):
         ...
 
     def category_graph(self) -> networkx.DiGraph:
         ...
 
     def object_categories(self) -> kwcoco.CategoryTree:
@@ -79,15 +79,15 @@
 
 class MixinCocoExtras:
 
     @classmethod
     def coerce(
         cls,
         key,
-        sqlview: Union[bool, str] = False,
+        sqlview: bool | str = False,
         **kw
     ) -> AbstractCocoDataset | kwcoco.CocoDataset | kwcoco.CocoSqlDatabase:
         ...
 
     tag: Incomplete
     fpath: Incomplete
 
@@ -96,39 +96,40 @@
         ...
 
     @classmethod
     def random(cls, rng: Incomplete | None = ...):
         ...
 
     def missing_images(self,
-                       check_aux: bool = False,
+                       check_aux: bool = True,
                        verbose: int = 0) -> List[Tuple[int, str, int]]:
         ...
 
     def corrupted_images(self,
-                         check_aux: bool = False,
-                         verbose: int = 0) -> List[Tuple[int, str, int]]:
+                         check_aux: bool = True,
+                         verbose: int = 0,
+                         workers: int = 0) -> List[Tuple[int, str, int]]:
         ...
 
     def rename_categories(self,
-                          mapper: Union[dict, Callable],
+                          mapper: dict | Callable,
                           rebuild: bool = ...,
                           merge_policy: str = 'ignore') -> None:
         ...
 
     bundle_dpath: Incomplete
 
     def reroot(self,
-               new_root: Union[str, None] = None,
-               old_prefix: Union[str, None] = None,
-               new_prefix: Union[str, None] = None,
+               new_root: str | PathLike | None = None,
+               old_prefix: str | None = None,
+               new_prefix: str | None = None,
                absolute: bool = False,
                check: bool = True,
                safe: bool = True,
-               verbose: int = 0):
+               verbose: int = 1):
         ...
 
     @property
     def data_root(self):
         ...
 
     @data_root.setter
@@ -151,39 +152,40 @@
     def data_fpath(self, value) -> None:
         ...
 
 
 class MixinCocoObjects:
 
     def annots(self,
-               annot_ids: Union[List[int], None] = None,
-               image_id: Union[int, None] = None,
-               trackid: Union[int, None] = None,
+               annot_ids: List[int] | None = None,
+               image_id: int | None = None,
+               track_id: int | None = None,
+               trackid: Incomplete | None = ...,
                aids: Incomplete | None = ...,
                gid: Incomplete | None = ...) -> kwcoco.coco_objects1d.Annots:
         ...
 
     def images(self,
-               image_ids: Union[List[int], None] = None,
-               video_id: Union[int, None] = None,
-               names: Union[List[str], None] = None,
+               image_ids: List[int] | None = None,
+               video_id: int | None = None,
+               names: List[str] | None = None,
                gids: Incomplete | None = ...,
                vidid: Incomplete | None = ...) -> kwcoco.coco_objects1d.Images:
         ...
 
     def categories(
             self,
-            category_ids: Union[List[int], None] = None,
+            category_ids: List[int] | None = None,
             cids: Incomplete | None = ...) -> kwcoco.coco_objects1d.Categories:
         ...
 
     def videos(
             self,
-            video_ids: Union[List[int], None] = None,
-            names: Union[List[str], None] = None,
+            video_ids: List[int] | None = None,
+            names: List[str] | None = None,
             vidids: Incomplete | None = ...) -> kwcoco.coco_objects1d.Videos:
         ...
 
 
 class MixinCocoStats:
 
     @property
@@ -218,85 +220,81 @@
         ...
 
     def extended_stats(self):
         ...
 
     def boxsize_stats(
             self,
-            anchors: Union[int, None] = None,
+            anchors: int | None = None,
             perclass: bool = True,
-            gids: Union[List[int], None] = None,
-            aids: Union[List[int], None] = None,
+            gids: List[int] | None = None,
+            aids: List[int] | None = None,
             verbose: int = 0,
             clusterkw: dict = ...,
             statskw: dict = ...) -> Dict[str, Dict[str, Dict | ndarray]]:
         ...
 
-    def find_representative_images(self,
-                                   gids: Union[None, List] = None) -> List:
+    def find_representative_images(self, gids: None | List = None) -> List:
         ...
 
 
 class MixinCocoDraw:
 
     def draw_image(self,
                    gid: int,
-                   channels: kwcoco.ChannelSpec = None) -> ndarray:
+                   channels: kwcoco.ChannelSpec | None = None) -> ndarray:
         ...
 
     def show_image(self,
-                   gid: Union[int, None] = None,
-                   aids: Union[list, None] = None,
-                   aid: Union[int, None] = None,
+                   gid: int | None = None,
+                   aids: list | None = None,
+                   aid: int | None = None,
                    channels: Incomplete | None = ...,
-                   setlim: Union[None, str] = None,
+                   setlim: None | str = None,
                    **kwargs):
         ...
 
 
 class MixinCocoAddRemove:
 
-    def add_video(self, name: str, id: Union[None, int] = None, **kw) -> int:
+    def add_video(self, name: str, id: None | int = None, **kw) -> int:
         ...
 
     def add_image(self,
-                  file_name: Union[str, None] = None,
-                  id: Union[None, int] = None,
+                  file_name: str | None = None,
+                  id: None | int = None,
                   **kw) -> int:
         ...
 
     def add_auxiliary_item(self,
                            gid: int,
-                           file_name: Union[str, None] = None,
-                           channels: Union[str,
-                                           kwcoco.FusedChannelSpec] = None,
+                           file_name: str | None = None,
+                           channels: str | kwcoco.FusedChannelSpec
+                           | None = None,
                            **kwargs) -> None:
         ...
 
     def add_annotation(self,
                        image_id: int,
-                       category_id: Union[int, None] = None,
-                       bbox: Union[list, kwimage.Boxes] = ...,
-                       segmentation: Union[Dict, List, Any] = ...,
+                       category_id: int | None = None,
+                       bbox: list | kwimage.Boxes = ...,
+                       segmentation: Dict | List | Any = ...,
                        keypoints: Any = ...,
-                       id: Union[None, int] = None,
+                       id: None | int = None,
                        **kw) -> int:
         ...
 
     def add_category(self,
                      name: str,
-                     supercategory: Union[str, None] = None,
-                     id: Union[int, None] = None,
+                     supercategory: str | None = None,
+                     id: int | None = None,
                      **kw) -> int:
         ...
 
-    def ensure_image(self,
-                     file_name: str,
-                     id: Union[None, int] = None,
-                     **kw) -> int:
+    def ensure_image(self, file_name: str, id: None | int = None, **kw) -> int:
         ...
 
     def ensure_category(self,
                         name,
                         supercategory: Incomplete | None = ...,
                         id: Incomplete | None = ...,
                         **kw) -> int:
@@ -344,16 +342,16 @@
 
     def remove_annotation_keypoints(self, kp_identifiers: List) -> Dict:
         ...
 
     def remove_keypoint_categories(self, kp_identifiers: List) -> Dict:
         ...
 
-    def set_annotation_category(self, aid_or_ann: Union[dict, int],
-                                cid_or_cat: Union[dict, int]) -> None:
+    def set_annotation_category(self, aid_or_ann: dict | int,
+                                cid_or_cat: dict | int) -> None:
         ...
 
 
 class CocoIndex:
     imgs: Dict[int, dict]
     anns: Dict[int, dict]
     cats: Dict[int, dict]
@@ -415,27 +413,27 @@
 
 class CocoDataset(AbstractCocoDataset, MixinCocoAddRemove, MixinCocoStats,
                   MixinCocoObjects, MixinCocoDraw, MixinCocoAccessors,
                   MixinCocoExtras, MixinCocoIndex, MixinCocoDepricate,
                   ub.NiceRepr):
     dataset: Dict
     index: CocoIndex
-    tag: Union[str, None]
-    bundle_dpath: Union[PathLike, None]
-    hashid: Union[str, None]
+    tag: str | None
+    bundle_dpath: PathLike | None
+    hashid: str | None
     hashid_parts: Incomplete
     data_fpath: Incomplete
     cache_dpath: Incomplete
     assets_dpath: Incomplete
 
     def __init__(self,
-                 data: Union[str, PathLike, dict, None] = None,
-                 tag: Union[str, None] = None,
-                 bundle_dpath: Union[str, None] = None,
-                 img_root: Union[str, None] = None,
+                 data: str | PathLike | dict | None = None,
+                 tag: str | None = None,
+                 bundle_dpath: str | None = None,
+                 img_root: str | None = None,
                  fname: Incomplete | None = ...,
                  autobuild: bool = ...) -> None:
         ...
 
     @property
     def fpath(self):
         ...
@@ -455,54 +453,76 @@
     def from_image_paths(CocoDataset,
                          gpaths: List[str],
                          bundle_dpath: Incomplete | None = ...,
                          img_root: Incomplete | None = ...):
         ...
 
     @classmethod
+    def coerce_multiple(cls,
+                        datas: List,
+                        workers: int | str = 0,
+                        mode: str = 'process',
+                        verbose: int = 1,
+                        postprocess: Callable | None = None,
+                        ordered: bool = True,
+                        **kwargs) -> Generator[CocoDataset, None, None]:
+        ...
+
+    @classmethod
+    def load_multiple(cls,
+                      fpaths: List[str | PathLike],
+                      workers: int = 0,
+                      mode: str = 'process',
+                      verbose: int = 1,
+                      postprocess: Callable | None = None,
+                      ordered: bool = True,
+                      **kwargs) -> Generator[CocoDataset, None, None]:
+        ...
+
+    @classmethod
     def from_coco_paths(CocoDataset,
                         fpaths: List[str],
                         max_workers: int = 0,
                         verbose: int = 1,
                         mode: str = 'thread',
-                        union: Union[str, bool] = 'try'):
+                        union: str | bool = 'try'):
         ...
 
     def copy(self):
         ...
 
     def __nice__(self):
         ...
 
-    def dumps(self,
-              indent: Union[int, str, None] = None,
-              newlines: bool = False):
+    def dumps(self, indent: int | str | None = None, newlines: bool = False):
         ...
 
     def dump(self,
-             file: Union[PathLike, IO, None] = None,
-             indent: Union[int, str, None] = None,
+             file: PathLike | IO | None = None,
+             indent: int | str | None = None,
              newlines: bool = False,
-             temp_file: Union[bool, str] = True) -> None:
+             temp_file: bool | str = 'auto',
+             compress: bool | str = 'auto') -> None:
         ...
 
     def union(*others,
               disjoint_tracks: bool = True,
+              remember_parent: bool = False,
               **kwargs) -> kwcoco.CocoDataset:
         ...
 
     def subset(self,
                gids: List[int],
                copy: bool = False,
                autobuild: bool = True):
         ...
 
     def view_sql(self,
                  force_rewrite: bool = False,
                  memory: bool = False,
                  backend: str = 'sqlite',
-                 sql_db_fpath: Union[str, PathLike, None] = None):
+                 sql_db_fpath: str | PathLike | None = None):
         ...
 
 
 def demo_coco_data():
     ...
```

## kwcoco/coco_evaluator.py

```diff
@@ -177,15 +177,15 @@
             None, type=list,
             help='if specified only these classes are given weight'),
 
         'use_image_names': scfg.Value(
             False, help='if True use image file_name to associate images instead of ids'),
     }
 
-    def normalize(self):
+    def __post_init__(self):
         # if self['ovthresh'] is not None:
         #     warnings.warn('ovthresh is deprecated use iou_thresh')
         #     self['iou_thresh'] = self['ovthresh']
 
         if self['area_range'] is not None:
             parsed = []
             code = self['area_range']
```

## kwcoco/coco_evaluator.pyi

```diff
@@ -1,26 +1,23 @@
 import scriptconfig as scfg
 import ubelt as ub
 from _typeshed import Incomplete
 from collections.abc import Generator
-from kwcoco.metrics.util import DictProxy
+from kwcoco.util.dict_like import DictProxy
 from typing import Any
 
-COCO_SAMPLER_CLS: Incomplete
 
+class CocoEvalConfig(scfg.DataConfig):
+    __default__: Incomplete
 
-class CocoEvalConfig(scfg.Config):
-    default: Incomplete
-
-    def normalize(self) -> None:
+    def __post_init__(self) -> None:
         ...
 
 
 class CocoEvaluator:
-    Config: Incomplete
 
     def __init__(coco_eval, config) -> None:
         ...
 
     def log(coco_eval, msg, level: str = ...) -> None:
         ...
```

## kwcoco/coco_image.py

```diff
@@ -16,14 +16,19 @@
 
 try:
     from xdev import profile
 except Exception:
     profile = ub.identity
 
 
+__docstubs__ = """
+from kwcoco.coco_objects1d import Annots
+"""
+
+
 DEFAULT_RESOLUTION_KEYS = {
     'resolution',
     'target_gsd',  # only exists as a convinience for other projects. Remove in the future.
 }
 
 
 class CocoImage(AliasedDictProxy, ub.NiceRepr):
@@ -114,15 +119,15 @@
         return self
 
     @property
     def assets(self):
         assets = []
         for obj in self.iter_asset_objs():
             # TODO: ducktype with an object
-            asset = CocoAsset(obj)
+            asset = CocoAsset(obj, bundle_dpath=self.bundle_dpath)
             # asset = obj
             assets.append(asset)
         return assets
 
     @property
     def datetime(self):
         """
@@ -287,15 +292,15 @@
         fpath = dpath / fname
         return fpath
 
     def primary_asset(self, requires=None):
         """
         Compute a "main" image asset.
 
-        Notes:
+        Note:
             Uses a heuristic.
 
             * First, try to find the auxiliary image that has with the smallest
             distortion to the base image (if known via warp_aux_to_img)
 
             * Second, break ties by using the largest image if w / h is known
 
@@ -598,14 +603,15 @@
             channels = FusedChannelSpec.coerce(channels).spec
 
         if file_name is not None:
             file_name = os.fspath(file_name)
 
         # Make the asset info dict
         obj = {
+            'image_id': img.get('id', None),  # for when assets move to their own table
             'file_name': file_name,
             'height': height,
             'width': width,
             'channels': channels,
             'warp_aux_to_img': warp_aux_to_img.concise(),
         }
         if imdata is not None:
@@ -889,14 +895,17 @@
 
         return delayed
 
     @ub.memoize_method
     def valid_region(self, space='image'):
         """
         If this image has a valid polygon, return it in image, or video space
+
+        Returns:
+            None | kwimage.MultiPolygon
         """
         import kwimage
         valid_coco_poly = self.img.get('valid_region', None)
         if valid_coco_poly is None:
             valid_poly = None
         else:
             kw_poly_img = kwimage.MultiPolygon.coerce(valid_coco_poly)
@@ -913,26 +922,32 @@
                     raise NotImplementedError(space)
         return valid_poly
 
     @ub.memoize_property
     def warp_vid_from_img(self):
         """
         Affine transformation that warps image space -> video space.
+
+        Returns:
+            kwimage.Affine: The transformation matrix
         """
         import kwimage
         warp_img_to_vid = kwimage.Affine.coerce(self.img.get('warp_img_to_vid', None))
         if warp_img_to_vid.matrix is None:
             # Hack to ensure the matrix property always is an array
             warp_img_to_vid.matrix = np.asarray(warp_img_to_vid)
         return warp_img_to_vid
 
     @ub.memoize_property
     def warp_img_from_vid(self):
         """
         Affine transformation that warps video space -> image space.
+
+        Returns:
+            kwimage.Affine: The transformation matrix
         """
         return self.warp_vid_from_img.inv()
 
     def _annot_segmentation(self, ann, space='video'):
         import kwimage
         warp_vid_from_img = self.warp_vid_from_img
         img_sseg = kwimage.MultiPolygon.coerce(ann['segmentation'])
@@ -1195,20 +1210,29 @@
     # To maintain backwards compatibility we register aliases of properties
     # The main key should be the primary property.
     __alias_to_primary__ = {
         'warp_img_from_asset': 'warp_aux_to_img',
         'warp_wld_from_asset': 'warp_to_wld',
     }
 
-    def __init__(self, asset):
+    def __init__(self, asset, bundle_dpath=None):
         self._proxy = asset
+        self._bundle_dpath = bundle_dpath
 
     def __nice__(self):
         return repr(self.__json__())
 
+    def image_filepath(self):
+        if self._bundle_dpath is None:
+            raise Exception('Bundle dpath must be populated to use this method')
+            # return self['file_name']
+        else:
+            return ub.Path(self._bundle_dpath) / self['file_name']
+        ...
+
 
 # TODO?
 # class _CocoObject(AliasedDictProxy, ub.NiceRepr):
 #     """
 #     TODO: general coco scalar object
 #     """
 #     __alias_to_primary__ = {}
@@ -1248,17 +1272,29 @@
 
 # class CocoAnnotation(_CocoObject):
 #     """
 #     TODO: general coco scalars
 #     """
 #     __alias_to_primary__ = {}
 
+# class CocoCategory(_CocoObject):
+#     """
+#     TODO: general coco scalars
+#     """
+#     __alias_to_primary__ = {}
+
+# class CocoTrack(_CocoObject):
+#     """
+#     TODO: general coco scalars
+#     """
+#     __alias_to_primary__ = {}
+
 
 def _delay_load_imglike(bundle_dpath, obj, nodata_method=None):
-    from os.path import join
+    # from os.path import join
     from kwcoco.channel_spec import FusedChannelSpec
     from delayed_image import DelayedLoad, DelayedIdentity
     info = {}
     fname = obj.get('file_name', None)
     imdata = obj.get('imdata', None)
     channels_ = obj.get('channels', None)
     if channels_ is not None:
```

## kwcoco/coco_image.pyi

```diff
@@ -1,22 +1,27 @@
-from typing import Union
 from typing import List
+import ubelt as ub
 from os import PathLike
 import kwcoco
 from numpy import ndarray
 import kwimage
+from typing import Dict
 import ubelt as ub
 from _typeshed import Incomplete
 from collections.abc import Generator
-from typing import Any
+from kwcoco.util.dict_proxy2 import AliasedDictProxy
+
+from kwcoco.coco_objects1d import Annots
 
+__docstubs__: str
 DEFAULT_RESOLUTION_KEYS: Incomplete
 
 
-class CocoImage(ub.NiceRepr):
+class CocoImage(AliasedDictProxy, ub.NiceRepr):
+    __alias_to_primary__: Incomplete
     img: Incomplete
     dset: Incomplete
 
     def __init__(self, img, dset: Incomplete | None = ...) -> None:
         ...
 
     @classmethod
@@ -42,30 +47,37 @@
     def detach(self):
         ...
 
     @property
     def assets(self):
         ...
 
+    @property
+    def datetime(self) -> None:
+        ...
+
+    def annots(self) -> Annots:
+        ...
+
     def __nice__(self):
         ...
 
     def stats(self):
         ...
 
     def __contains__(self, key):
         ...
 
-    def __getitem__(self, key):
+    def get(self, key, default=...):
         ...
 
     def keys(self):
         ...
 
-    def get(self, key, default=...):
+    def __getitem__(self, key):
         ...
 
     @property
     def channels(self):
         ...
 
     @property
@@ -75,83 +87,87 @@
     @property
     def dsize(self):
         ...
 
     def primary_image_filepath(self, requires: Incomplete | None = ...):
         ...
 
-    def primary_asset(self,
-                      requires: Union[List[str], None] = None) -> None | dict:
+    def primary_asset(self, requires: List[str] | None = None) -> None | dict:
         ...
 
     def iter_image_filepaths(self,
                              with_bundle: bool = True
-                             ) -> Generator[Any, None, None]:
+                             ) -> Generator[ub.Path, None, None]:
         ...
 
     def iter_asset_objs(self) -> Generator[dict, None, None]:
         ...
 
     def find_asset_obj(self, channels):
         ...
 
-    def add_auxiliary_item(self,
-                           file_name: Union[str, PathLike, None] = None,
-                           channels: Union[str, kwcoco.FusedChannelSpec,
-                                           None] = None,
-                           imdata: Union[ndarray, None] = None,
-                           warp_aux_to_img: Union[kwimage.Affine, None] = None,
-                           width: Union[int, None] = None,
-                           height: Union[int, None] = None,
-                           imwrite: bool = False) -> None:
+    def add_annotation(self, **ann) -> int:
         ...
 
-    add_asset: Incomplete
+    def add_asset(self,
+                  file_name: str | PathLike | None = None,
+                  channels: str | kwcoco.FusedChannelSpec | None = None,
+                  imdata: ndarray | None = None,
+                  warp_aux_to_img: kwimage.Affine | None = None,
+                  width: int | None = None,
+                  height: int | None = None,
+                  imwrite: bool = False) -> None:
+        ...
 
-    def delay(self,
-              channels: kwcoco.FusedChannelSpec = None,
-              space: str = 'image',
-              resolution: Union[None, str, float] = None,
-              bundle_dpath: Incomplete | None = ...,
-              interpolation: str = ...,
-              antialias: bool = ...,
-              nodata_method: Incomplete | None = ...,
-              RESOLUTION_KEY: Incomplete | None = ...):
+    def imdelay(self,
+                channels: kwcoco.FusedChannelSpec | None = None,
+                space: str = 'image',
+                resolution: None | str | float = None,
+                bundle_dpath: Incomplete | None = ...,
+                interpolation: str = ...,
+                antialias: bool = ...,
+                nodata_method: Incomplete | None = ...,
+                RESOLUTION_KEY: Incomplete | None = ...):
         ...
 
-    def valid_region(self, space: str = ...):
+    def valid_region(self, space: str = ...) -> None | kwimage.MultiPolygon:
         ...
 
-    def warp_vid_from_img(self):
+    def warp_vid_from_img(self) -> kwimage.Affine:
         ...
 
-    def warp_img_from_vid(self):
+    def warp_img_from_vid(self) -> kwimage.Affine:
         ...
 
     def resolution(self,
-                   space: str = ...,
-                   RESOLUTION_KEY: Incomplete | None = ...):
+                   space: str = 'image',
+                   channel: str | kwcoco.FusedChannelSpec | None = None,
+                   RESOLUTION_KEY: Incomplete | None = ...) -> Dict:
         ...
 
+    add_auxiliary_item: Incomplete
+    delay: Incomplete
 
-class CocoAsset:
-    __key_aliases__: Incomplete
-    __key_resolver__: Incomplete
-    obj: Incomplete
+    def show(self, **kwargs):
+        ...
 
-    def __init__(self, obj) -> None:
+    def draw(self, **kwargs):
         ...
 
-    def __getitem__(self, key):
+
+class CocoAsset(AliasedDictProxy, ub.NiceRepr):
+    __alias_to_primary__: Incomplete
+
+    def __init__(self, asset, bundle_dpath: Incomplete | None = ...) -> None:
         ...
 
-    def keys(self):
+    def __nice__(self):
         ...
 
-    def get(self, key, default=...):
+    def image_filepath(self):
         ...
 
 
 def parse_quantity(expr):
     ...
```

## kwcoco/coco_objects1d.pyi

```diff
@@ -1,9 +1,8 @@
 from typing import List
-from typing import Union
 from typing import Iterable
 from typing import Dict
 from typing import Any
 import kwimage
 import ubelt as ub
 from typing import Any
 
@@ -30,39 +29,43 @@
     def __getitem__(self, index):
         ...
 
     def unique(self) -> ObjectList1D:
         ...
 
     @property
+    def ids(self):
+        ...
+
+    @property
     def objs(self) -> List[ObjT]:
         ...
 
     def take(self, idxs) -> ObjectList1D:
         ...
 
     def compress(self, flags) -> ObjectList1D:
         ...
 
     def peek(self) -> ObjT:
         ...
 
     def lookup(self,
-               key: Union[str, Iterable],
+               key: str | Iterable,
                default=...,
                keepid: bool = ...) -> Dict[str, ObjT]:
         ...
 
     def get(self,
             key: str,
             default=...,
             keepid: bool = ...) -> Dict[str, ObjT]:
         ...
 
-    def set(self, key: str, values: Union[Iterable, Any]) -> None:
+    def set(self, key: str, values: Iterable | Any) -> None:
         ...
 
     def attribute_frequency(self) -> Dict[str, int]:
         ...
 
 
 class ObjectGroups(ub.NiceRepr):
@@ -192,14 +195,22 @@
         ...
 
     @cnames.setter
     def cnames(self, cnames) -> List[int]:
         ...
 
     @property
+    def category_names(self) -> List[int]:
+        ...
+
+    @category_names.setter
+    def category_names(self, names) -> List[int]:
+        ...
+
+    @property
     def detections(self) -> kwimage.Detections:
         ...
 
     @property
     def boxes(self) -> kwimage.Boxes:
         ...
```

## kwcoco/coco_schema.py

```diff
@@ -1,14 +1,17 @@
 """
 The place where the formal KWCOCO schema is defined.
 
 CommandLine:
     python -m kwcoco.coco_schema
     xdoctest -m kwcoco.coco_schema __doc__
 
+TODO:
+    - [ ] Perhaps use `voluptuous <https://pypi.org/project/voluptuous/>`_ instead?
+
 Example:
     >>> import kwcoco
     >>> from kwcoco.coco_schema import COCO_SCHEMA
     >>> import jsonschema
     >>> dset = kwcoco.CocoDataset.demo('shapes1')
     >>> # print('dset.dataset = {}'.format(ub.urepr(dset.dataset, nl=2)))
     >>> COCO_SCHEMA.validate(dset.dataset)
@@ -197,14 +200,16 @@
 )
 
 
 ASSET = OBJECT(
     PROPERTIES={
         'file_name': PATH,
         'channels': CHANNELS,
+        'id': INTEGER(description='The id of the asset (option for now, but will be required in the future when assets are moved to their own table)'),
+        'image_id': INTEGER(description='The image id this asset is associated with (option for now, but will be required in the future)'),
         'width': INTEGER(description='The width in asset-space pixels'),
         'height': INTEGER(description='The height in asset-space pixels'),
     },
     required=['file_name'],
     description='Information about a single file belonging to an image',
     title='ASSET',
 )
@@ -256,14 +261,19 @@
         'High level information about a image file or a collection of '
         'image files corresponding to a single point in (or small interval of) '
         'time'
     ),
     title='IMAGE',
 )
 
+TRACK = OBJECT(OrderedDict((
+    ('id', INTEGER(description='A unique internal id for this track')),
+    ('name', NAME(description='A unique external name or identifier')),
+)))
+
 ANNOTATION = OBJECT(OrderedDict((
     ('id', INTEGER(description='A unique internal id for this annotation')),
     ('image_id', INTEGER(description='The image id this annotation belongs to')),
 
     ('bbox', BBOX),
 
     ('category_id', INTEGER(description='The category id of this annotation')),
@@ -310,14 +320,16 @@
 
         ('categories', ARRAY(CATEGORY)),
 
         ('keypoint_categories', ARRAY(KEYPOINT_CATEGORY)),
 
         ('videos', ARRAY(VIDEO)),
 
+        ('tracks', ARRAY(TRACK)),
+
         ('images', ARRAY(IMAGE)),
 
         ('annotations', ARRAY(ANNOTATION)),
     ]),
     required=[],
     description='The formal kwcoco schema',
     title='KWCOCO_SCHEMA',
```

## kwcoco/coco_schema.pyi

```diff
@@ -38,9 +38,10 @@
 NAME: Incomplete
 CATEGORY: Incomplete
 KEYPOINT_CATEGORY: Incomplete
 VIDEO: Incomplete
 CHANNELS: Incomplete
 ASSET: Incomplete
 IMAGE: Incomplete
+TRACK: Incomplete
 ANNOTATION: Incomplete
 COCO_SCHEMA: Incomplete
```

## kwcoco/coco_sql_dataset.py

```diff
@@ -89,14 +89,17 @@
 
 # __docstubs__ = """
 # from typing import TypeVar
 # F = TypeVar("F", bound=Callable)
 # """
 # https://github.com/python/mypy/issues/8016
 # https://github.com/mkorpela/overrides/issues/109
+__docstubs__ = """
+from sqlalchemy.orm import InstrumentedAttribute
+"""
 
 
 class FallbackCocoBase:
     # Used when sqlalchemy doesn't exist to allow for import without error
     _decl_class_registry = {}
 
 
@@ -163,19 +166,14 @@
 
 
 try:
     from sqlalchemy.sql import text
 except ImportError:
     text = ub.identity
 
-# TODO: is it possible to get sclalchemy to use JSON for sqlite and JSONB for
-# postgresql?
-# from sqlalchemy.dialects.postgresql import JSONB
-# JSON = JSONB
-
 # This is the column name for unstructured data that is not captured directly
 # in our sql schema. It will be stored as a json blob. The column names defined
 # in the alchemy tables must agree with this. Note: previously we used
 # a duner name, but that seems to be disallowed
 UNSTRUCTURED = '_unstructured'
 SCHEMA_VERSION = 'v011'
 
@@ -233,31 +231,30 @@
     auxiliary = Column(JSON)  # TODO: change name to assets (or better yet make an assets table)
 
     _unstructured = Column(JSON, default=dict())
 
 
 # TODO:
 # Track
-# SharedPolygon?
 
 # The track LUT depends on some stuff in postgresql that I dont fully
 # understand keep the ability to turn it off if we need to.
+# It does seem stable.
 _USE_TRACK_LUT = 1
 
 
 class Annotation(CocoBase):
     __tablename__ = 'annotations'
     id = Column(Integer, primary_key=True)
     image_id = Column(Integer, doc='', index=True, unique=False)
     category_id = Column(Integer, doc='', index=True, unique=False, nullable=True)
 
-    # track_id = Column(Integer, index=True, unique=False)
+    # TODO: in the future we may enforce track-id is an integer
     if _USE_TRACK_LUT:
         track_id = Column(JSONVariant, index=True, unique=False)
-        # track_id = Column(JSONVariant)
     else:
         track_id = Column(JSON)
 
     segmentation = Column(JSON)
     keypoints = Column(JSON)
 
     bbox = Column(JSON)
@@ -272,22 +269,14 @@
     prob = Column(JSON)
 
     iscrowd = Column(Integer)
     caption = Column(JSON)
 
     _unstructured = Column(JSON, default=dict())
 
-    # __table_args__ =  (
-    #     # https://stackoverflow.com/questions/30885846/how-to-create-jsonb-index-using-gin-on-sqlalchemy
-    #     Index(
-    #         "index_Annotation_on_track_id_gin", track_id,
-    #         # postgresql_using="gin",
-    #     ),
-    # )
-
 # As long as the flavor of sql conforms to our raw sql commands set
 # this to 0, which uses the faster raw variant.
 ALCHEMY_MODE_DEFAULT = 1
 
 # Global book keeping (It would be nice to find a way to avoid this)
 CocoBase.TBLNAME_TO_CLASS = {}
 # sqlalchemy v 1.3.23 is the last to have _decl_class_registry
@@ -538,30 +527,30 @@
         # It seems like writing the raw sql ourselves is fater than
         # using the ORM in most cases.
         proxy.ALCHEMY_MODE = ALCHEMY_MODE_DEFAULT
 
         # ONLY USE IN READONLY MODE
         proxy._cache = _new_proxy_cache()
 
-    def __len__(proxy):
+    def __len__(proxy) -> int:
         if proxy.keyattr is None:
             query = proxy.session.query(proxy.cls)
         else:
             query = proxy.session.query(proxy.keyattr)
             if proxy.ignore_null:
                 query = query.filter(proxy.keyattr != None)  # NOQA
         return query.count()
 
-    def __nice__(proxy):
+    def __nice__(proxy) -> str:
         if proxy.keyattr is None:
             return 'id -> {}: {}'.format(proxy.cls.__tablename__, len(proxy))
         else:
             return '{} -> {}: {}'.format(proxy.keyattr.name, proxy.cls.__tablename__, len(proxy))
 
-    def __contains__(proxy, key):
+    def __contains__(proxy, key) -> bool:
         if proxy._cache is not None:
             if key in proxy._cache:
                 return True
         if proxy.ignore_null and key is None:
             return False
         keyattr = proxy.keyattr
         if keyattr is None:
@@ -844,18 +833,18 @@
             if order_attr.class_ is not valattr.class_:
                 if order_id is None:
                     raise ValueError('Must specify the id to lookup into the order table')
                 else:
                     proxy.parent_order_id = order_attr.class_.id
                     proxy.parent_order_table = order_attr.class_
 
-    def __nice__(self):
+    def __nice__(self) -> str:
         return str(len(self))
 
-    def __len__(proxy):
+    def __len__(proxy) -> int:
         query = proxy.session.query(proxy.parent_keyattr)
         return query.count()
 
     def _uncached_getitem(proxy, key):
         """
         getitem without the cache
         """
@@ -900,15 +889,15 @@
             if key in proxy._cache:
                 return proxy._cache[key]
         item = proxy._uncached_getitem(key)
         if proxy._cache is not None:
             proxy._cache[key] = item
         return item
 
-    def __contains__(proxy, key):
+    def __contains__(proxy, key) -> bool:
         if proxy._cache is not None:
             if key in proxy._cache:
                 return True
         try:
             query = (proxy.session.query(proxy.parent_keyattr)
                      .filter(proxy.parent_keyattr == key))
             flag = query.count() > 0
```

## kwcoco/coco_sql_dataset.pyi

```diff
@@ -1,22 +1,32 @@
+import sqlalchemy
 import pandas
+import sqlalchemy
 import ubelt as ub
 from _typeshed import Incomplete
 from collections.abc import Generator
 from kwcoco.abstract_coco_dataset import AbstractCocoDataset
 from kwcoco.coco_dataset import MixinCocoAccessors, MixinCocoDraw, MixinCocoObjects, MixinCocoStats
 from kwcoco.util.dict_like import DictLike
 from typing import Any
 
+from sqlalchemy.orm import InstrumentedAttribute
+
+__docstubs__: str
+
 
 class FallbackCocoBase:
     ...
 
 
 CocoBase: type
+sqlalchemy_version: Incomplete
+IS_GE_SQLALCH_2x: Incomplete
+SQL_ERROR_TYPES: Incomplete
+JSONVariant: Incomplete
 CocoBase = FallbackCocoBase
 
 
 def addapt_numpy_float64(numpy_float64):
     ...
 
 
@@ -30,35 +40,32 @@
 
 class Category(CocoBase):
     __tablename__: str
     id: Incomplete
     name: Incomplete
     alias: Incomplete
     supercategory: Incomplete
-    __unstructured__: Incomplete
 
 
 class KeypointCategory(CocoBase):
     __tablename__: str
     id: Incomplete
     name: Incomplete
     alias: Incomplete
     supercategory: Incomplete
     reflection_id: Incomplete
-    __unstructured__: Incomplete
 
 
 class Video(CocoBase):
     __tablename__: str
     id: Incomplete
     name: Incomplete
     caption: Incomplete
     width: Incomplete
     height: Incomplete
-    __unstructured__: Incomplete
 
 
 class Image(CocoBase):
     __tablename__: str
     id: Incomplete
     name: Incomplete
     file_name: Incomplete
@@ -66,15 +73,14 @@
     height: Incomplete
     video_id: Incomplete
     timestamp: Incomplete
     frame_index: Incomplete
     channels: Incomplete
     warp_img_to_vid: Incomplete
     auxiliary: Incomplete
-    __unstructured__: Incomplete
 
 
 class Annotation(CocoBase):
     __tablename__: str
     id: Incomplete
     image_id: Incomplete
     category_id: Incomplete
@@ -83,15 +89,14 @@
     keypoints: Incomplete
     bbox: Incomplete
     score: Incomplete
     weight: Incomplete
     prob: Incomplete
     iscrowd: Incomplete
     caption: Incomplete
-    __unstructured__: Incomplete
 
 
 ALCHEMY_MODE_DEFAULT: int
 tblname: Incomplete
 cls: Incomplete
 classname: Incomplete
 
@@ -136,21 +141,21 @@
     def __init__(proxy,
                  session,
                  cls,
                  keyattr: Incomplete | None = ...,
                  ignore_null: bool = ...) -> None:
         ...
 
-    def __len__(proxy):
+    def __len__(proxy) -> int:
         ...
 
-    def __nice__(proxy):
+    def __nice__(proxy) -> str:
         ...
 
-    def __contains__(proxy, key):
+    def __contains__(proxy, key) -> bool:
         ...
 
     def __getitem__(proxy, key):
         ...
 
     def keys(proxy) -> Generator[Any, None, None]:
         ...
@@ -161,31 +166,32 @@
     def items(proxy) -> Generator[Any, None, None]:
         ...
 
 
 class SqlIdGroupDictProxy(DictLike):
 
     def __init__(proxy,
-                 session,
-                 valattr,
-                 keyattr,
-                 parent_keyattr,
-                 group_order_attr: Incomplete | None = ...) -> None:
+                 session: sqlalchemy.orm.session.Session,
+                 valattr: InstrumentedAttribute,
+                 keyattr: InstrumentedAttribute,
+                 parent_keyattr: InstrumentedAttribute | None = None,
+                 order_attr: InstrumentedAttribute | None = None,
+                 order_id: InstrumentedAttribute | None = None) -> None:
         ...
 
-    def __nice__(self):
+    def __nice__(self) -> str:
         ...
 
-    def __len__(proxy):
+    def __len__(proxy) -> int:
         ...
 
     def __getitem__(proxy, key):
         ...
 
-    def __contains__(proxy, key):
+    def __contains__(proxy, key) -> bool:
         ...
 
     def keys(proxy) -> Generator[Any, None, None]:
         ...
 
     def items(proxy) -> Generator[Any, None, Any]:
         ...
@@ -259,15 +265,20 @@
     def imgs(self):
         ...
 
     @property
     def name_to_cat(self):
         ...
 
-    def raw_table(self, table_name: str) -> pandas.DataFrame:
+    def pandas_table(self,
+                     table_name: str,
+                     strict: bool = ...) -> pandas.DataFrame:
+        ...
+
+    def raw_table(self, table_name):
         ...
 
     def tabular_targets(self):
         ...
 
     @property
     def bundle_dpath(self):
```

## kwcoco/compat_dataset.pyi

```diff
@@ -1,9 +1,8 @@
 from typing import List
-from typing import Union
 from typing import Dict
 from os import PathLike
 import kwimage
 from numpy import ndarray
 from _typeshed import Incomplete
 from kwcoco.coco_dataset import CocoDataset
 
@@ -29,15 +28,15 @@
     def catToImgs(self):
         ...
 
     def getAnnIds(self,
                   imgIds: List[int] = ...,
                   catIds: List[int] = ...,
                   areaRng: List[float] = ...,
-                  iscrowd: Union[bool, None] = None) -> List[int]:
+                  iscrowd: bool | None = None) -> List[int]:
         ...
 
     def getCatIds(self,
                   catNms: List[str] = ...,
                   supNms: List[str] = ...,
                   catIds: List[int] = ...) -> List[int]:
         ...
@@ -59,15 +58,15 @@
     def showAnns(self, anns: List[Dict], draw_bbox: bool = ...) -> None:
         ...
 
     def loadRes(self, resFile: str) -> object:
         ...
 
     def download(self,
-                 tarDir: Union[str, PathLike, None] = None,
+                 tarDir: str | PathLike | None = None,
                  imgIds: list = ...) -> None:
         ...
 
     def loadNumpyAnnotations(self, data) -> List[Dict]:
         ...
 
     def annToRLE(self, ann) -> kwimage.Mask:
```

## kwcoco/kw18.pyi

```diff
@@ -1,8 +1,7 @@
-from typing import Union
 from typing import Dict
 import kwarray
 from _typeshed import Incomplete
 
 
 class KW18(kwarray.DataFrameArray):
     DEFAULT_COLUMNS: Incomplete
@@ -15,16 +14,16 @@
         ...
 
     @classmethod
     def from_coco(KW18, coco_dset):
         ...
 
     def to_coco(self,
-                image_paths: Union[Dict[int, str], None] = None,
-                video_name: Union[str, None] = None):
+                image_paths: Dict[int, str] | None = None,
+                video_name: str | None = None):
         ...
 
     @classmethod
     def load(KW18, file):
         ...
 
     @classmethod
```

## kwcoco/cli/__main__.py

```diff
@@ -5,202 +5,110 @@
 
 
 def main(cmdline=True, **kw):
     """
     kw = dict(command='stats')
     cmdline = False
     """
-    import argparse
-
     modnames = [
         'coco_stats',
         'coco_union',
         'coco_split',
         'coco_show',
         'coco_toydata',
         'coco_eval',
         'coco_conform',
         'coco_modify_categories',
         'coco_reroot',
+        'coco_move',
         'coco_validate',
         'coco_subset',
         'coco_grab',
+        'coco_info',
     ]
     module_lut = {}
     for name in modnames:
         mod = ub.import_module_from_name('kwcoco.cli.{}'.format(name))
         module_lut[name] = mod
 
     # Create a list of all submodules with CLI interfaces
     cli_modules = list(module_lut.values())
 
     # Create a subparser that uses the first positional argument to run one of
     # the previous CLI interfaces.
     import os
     KWCOCO_LOOSE_CLI = os.environ.get('KWCOCO_LOOSE_CLI', '')
 
-    NEW_MODAL_CLI = 1
-    if NEW_MODAL_CLI:
-        from scriptconfig.modal import ModalCLI
-        modal = ModalCLI(description=ub.codeblock(
-            '''
-            The Kitware COCO CLI
-            '''))
-
-        def get_version(self):
-            import kwcoco
-            return kwcoco.__version__
-        modal.__class__.version = property(get_version)
-
-        for cli_module in cli_modules:
-
-            cli_subconfig = None
+    from scriptconfig.modal import ModalCLI
+    modal = ModalCLI(description=ub.codeblock(
+        '''
+        The Kitware COCO CLI
+        '''))
+
+    def get_version(self):
+        import kwcoco
+        return kwcoco.__version__
+    modal.__class__.version = property(get_version)
+
+    for cli_module in cli_modules:
+
+        cli_config = None
+        if hasattr(cli_module, '_CLI'):
+            # Old way
             cli_cls = cli_module._CLI
             cli_cls.CLIConfig.__command__ = cli_cls.name
-
             assert hasattr(cli_cls, 'CLIConfig'), (
                 'We are only supporting scriptconfig CLIs')
             # scriptconfig cli pattern
-            cli_subconfig = cli_cls.CLIConfig
+            cli_config = cli_cls.CLIConfig
 
-            if not hasattr(cli_subconfig, 'main'):
+            if not hasattr(cli_config, 'main'):
                 if hasattr(cli_cls, 'main'):
                     main_func = cli_cls.main
                     # Hack the main function into the config
-                    cli_subconfig.main = main_func
+                    cli_config.main = main_func
                 else:
                     raise AssertionError(f'No main function for {cli_module}')
-
-            # Update configs to have aliases / commands attributes
-            # cli_modname = cli_module.__name__
-            # cli_rel_modname = cli_modname.split('.')[-1]
-
-            cmdname_aliases = ub.oset()
-            alias = getattr(cli_module, '__alias__', [])
-            if isinstance(alias, str):
-                alias = [alias]
-            command = getattr(cli_module, '__command__', None)
-            if command is not None:
-                cmdname_aliases.add(command)
-            cmdname_aliases.update(alias)
-            # cmdname_aliases.update(cmd_alias.get(cli_modname, []) )
-            cmdname_aliases.add(cli_cls.CLIConfig.__command__)
-            parserkw = {}
-            primary_cmdname = cmdname_aliases[0]
-            secondary_cmdnames = cmdname_aliases[1:]
-            cli_subconfig.__command__ = primary_cmdname
-            cli_subconfig.__alias__ = secondary_cmdnames
-            modal.register(cli_subconfig)
-
-        ret = modal.run(strict=not KWCOCO_LOOSE_CLI)
-        return ret
-    else:
-        class RawDescriptionDefaultsHelpFormatter(
-                argparse.RawDescriptionHelpFormatter,
-                argparse.ArgumentDefaultsHelpFormatter):
-            pass
-
-        parser = argparse.ArgumentParser(
-            description='The Kitware COCO CLI',
-            formatter_class=RawDescriptionDefaultsHelpFormatter,
-        )
-        parser.add_argument('--version', action='store_true',
-                            help='show version number and exit')
-        subparsers = parser.add_subparsers(help='specify a command to run')
-
-        for cli_module in cli_modules:
-            cli_cls = cli_module._CLI
-            subconfig = cli_cls.CLIConfig()
-
-            # TODO: make subparser.add_parser args consistent with what
-            # scriptconfig generates when parser=None
-            if hasattr(subconfig, '_parserkw'):
-                parserkw = subconfig._parserkw()
-            else:
-                # for older versions of scriptconfig
-                parserkw = dict(
-                    description=subconfig.__class__.__doc__
-                )
-            parserkw['help'] = parserkw['description'].split('\n')[0]
-            subparser = subparsers.add_parser(cli_cls.name, **parserkw)
-            subparser = subconfig.argparse(subparser)
-            subparser.set_defaults(main=cli_cls.main)
-
-        if 0:
-            """
-            Debugging positional or keyword args
-
-                python -m kwcoco.cli.coco_stats special:shapes8
-
-                python -m kwcoco.cli.coco_stats --src=special:shapes8
-
-                >>> kw = {'src': 'special:shapes8'}
-                >>> cmdline = False
-                >>> cls = CocoStatsCLI
-
-                python -c "from kwcoco.cli.coco_stats import *; print(CocoStatsCLI.CLIConfig()._read_argv())" --src foo bar
-                python -c "from kwcoco.cli.coco_stats import *; print(CocoStatsCLI.CLIConfig()._read_argv())" a --basic=True baz biz --src f a a
-
-            """
-            for action in parser._actions:
-                print('action = {!r}'.format(action))
-                pass
-            for sub in parser._subparsers:
-                parser._subparsers._actions
-                pass
-
-        try:
-            import argcomplete
-            # Need to run: "$(register-python-argcomplete xdev)"
-            # or activate-global-python-argcomplete --dest=-
-            # mkdir -p ~/.bash_completion.d
-            # activate-global-python-argcomplete --dest ~/.bash_completion.d
-            # To enable this.
-        except ImportError:
-            argcomplete = None
-
-        if argcomplete is not None:
-            argcomplete.autocomplete(parser)
-
-        EASTER = 1
-        if EASTER:
-            if len(sys.argv) == 2 and sys.argv[1] in {'boid', 'boids'}:
-                from kwcoco.demo.boids import _yeah_boid
-                _yeah_boid()
-
-        if KWCOCO_LOOSE_CLI:
-            ns = parser.parse_known_args()[0]
+        elif hasattr(cli_module, '__config__'):
+            # New way
+            cli_config = cli_module.__config__
+        elif hasattr(cli_module, '__cli__'):
+            # New way
+            cli_config = cli_module.__cli__
         else:
-            ns = parser.parse_args()
-        # print('ns = {!r}'.format(ns))
+            raise NotImplementedError
 
-        # Execute the subcommand without additional CLI parsing
-        kw = ns.__dict__
+        # Update configs to have aliases / commands attributes
+        # cli_modname = cli_module.__name__
+        # cli_rel_modname = cli_modname.split('.')[-1]
+        cmdname_aliases = ub.oset()
+        alias = getattr(cli_module, '__alias__', getattr(cli_config, '__alias__', []))
+        if isinstance(alias, str):
+            alias = [alias]
+        command = getattr(cli_module, '__command__', getattr(cli_config, '__command__', None))
+        if command is not None:
+            cmdname_aliases.add(command)
+        cmdname_aliases.update(alias)
+        # cmdname_aliases.update(cmd_alias.get(cli_modname, []) )
+        cmdname_aliases.add(cli_config.__command__)
+        primary_cmdname = cmdname_aliases[0]
+        secondary_cmdnames = cmdname_aliases[1:]
+        cli_config.__command__ = primary_cmdname
+        cli_config.__alias__ = secondary_cmdnames
+        modal.register(cli_config)
+
+    EASTER = 1
+    if EASTER:
+        if len(sys.argv) == 2 and sys.argv[1] in {'boid', 'boids'}:
+            from kwcoco.demo.boids import _yeah_boid
+            _yeah_boid()
+            sys.exit(0)
 
-        if kw.pop('version'):
-            import kwcoco
-            print(kwcoco.__version__)
-            return 0
-
-        main = kw.pop('main', None)
-        if main is None:
-            parser.print_help()
-            raise ValueError('no command given')
-            return 1
-
-        try:
-            ret = main(cmdline=False, **kw)
-        except Exception as ex:
-            print('ERROR ex = {!r}'.format(ex))
-            raise
-            return 1
-        else:
-            if ret is None:
-                ret = 0
-            return ret
+    ret = modal.run(strict=not KWCOCO_LOOSE_CLI)
+    return ret
 
 
 if __name__ == '__main__':
     """
     CommandLine:
         python -m kwcoco --help
         python -m kwcoco.coco_stats
```

## kwcoco/cli/coco_reroot.py

```diff
@@ -2,15 +2,15 @@
 import ubelt as ub
 import scriptconfig as scfg
 
 
 class CocoRerootCLI:
     name = 'reroot'
 
-    class CLIConfig(scfg.Config):
+    class CocoRerootConfig(scfg.DataConfig):
         """
         Reroot image paths onto a new image root.
 
         Modify the root of a coco dataset such to either make paths relative to a
         new root or make paths absolute.
 
         TODO:
@@ -20,47 +20,47 @@
         __epilog__ = """
 
         Example Usage:
             kwcoco reroot --help
             kwcoco reroot --src=special:shapes8 --dst rerooted.json
             kwcoco reroot --src=special:shapes8 --new_prefix=foo --check=True --dst rerooted.json
         """
-        __default__ = {
-            'src': scfg.Value(None, help=(
-                'Input coco dataset path'), position=1),
+        src = scfg.Value(None, help=(
+            'Input coco dataset path'), position=1)
 
-            'dst': scfg.Value(None, help=(
-                'Output coco dataset path'), position=2),
+        dst = scfg.Value(None, help=(
+            'Output coco dataset path'), position=2)
 
-            'new_prefix': scfg.Value(None, help=(
-                'New prefix to insert before every image file name.')),
+        new_prefix = scfg.Value(None, help=(
+            'New prefix to insert before every image file name.'))
 
-            'old_prefix': scfg.Value(None, help=(
-                'Old prefix to remove from the start of every image file name.')),
+        old_prefix = scfg.Value(None, help=(
+            'Old prefix to remove from the start of every image file name.'))
 
-            'absolute': scfg.Value(True, help=(
-                'If False, the output file uses relative paths')),
+        absolute = scfg.Value(True, help=(
+            'If False, the output file uses relative paths'))
 
-            'check': scfg.Value(True, help=(
-                'If True, checks that all data exists')),
+        check = scfg.Value(True, help=(
+            'If True, checks that all data exists'))
 
-            'autofix': scfg.Value(False, isflag=True, help=(
-                ub.paragraph(
-                    '''
-                    If True, attempts an automatic fix. This assumes that paths
-                    are prefixed with an absolute path belonging to a different
-                    machine, and it attempts to strip off a minimal prefix to
-                    find relative paths that do exist.
-                    '''))),
+        autofix = scfg.Value(False, isflag=True, help=(
+            ub.paragraph(
+                '''
+                If True, attempts an automatic fix. This assumes that paths
+                are prefixed with an absolute path belonging to a different
+                machine, and it attempts to strip off a minimal prefix to
+                find relative paths that do exist.
+                ''')))
 
-            'compress': scfg.Value('auto', help='if True writes results with compression'),
+        compress = scfg.Value('auto', help='if True writes results with compression. DEPRECATED. Just use a .zip suffix.')
 
-            'inplace': scfg.Value(False, isflag=True, help='if True and dst is unspecified then the output will overwrite the input')
+        inplace = scfg.Value(False, isflag=True, help=(
+            'if True and dst is unspecified then the output will overwrite the input'))
 
-        }
+    CLIConfig = CocoRerootConfig
 
     @classmethod
     def main(cls, cmdline=True, **kw):
         r"""
         Example:
             >>> # xdoctest: +SKIP
             >>> kw = {'src': 'special:shapes8'}
@@ -88,16 +88,23 @@
                 --old_prefix=/run/media/matt/Storage/TEST/training_data
             '''
                 /run/media/matt/Storage/TEST/training_data
                 --check=True --dst rerooted.json
         """
         import kwcoco
         from os.path import dirname, abspath
-        config = cls.CLIConfig(kw, cmdline=cmdline)
-        print('config = {}'.format(ub.urepr(dict(config), nl=1)))
+        config = cls.CLIConfig.cli(data=kw, cmdline=cmdline)
+
+        try:
+            import rich
+        except ImportError:
+            rich_print = print
+        else:
+            rich_print = rich.print
+        rich_print('config = {}'.format(ub.urepr(config, nl=1)))
 
         if config['src'] is None:
             raise Exception('must specify source: {}'.format(config['src']))
         if config['dst'] is None:
             if config['inplace']:
                 config['dst'] = config['src']
             else:
@@ -140,18 +147,22 @@
     missing_tups = dset.missing_images()
     missing_gpaths = [t[1] for t in missing_tups]
     chosen = None
     if len(missing_gpaths) == 0:
         print('All paths look like they exist')
         return None
 
+    print(f'Found {len(missing_tups)} missing images')
     if len(missing_gpaths) > 0:
         bundle_dpath = ub.Path(dset.bundle_dpath)
+        print('bundle_dpath = {}'.format(ub.urepr(bundle_dpath, nl=1)))
         first = ub.Path(missing_gpaths[0])
+        print('first = {}'.format(ub.urepr(first, nl=1)))
         first_parts = first.parts
+        print('first_parts = {}'.format(ub.urepr(first_parts, nl=1)))
         candidates = []
         for i in range(len(first_parts)):
             cand_path = bundle_dpath / ub.Path(*first_parts[i:])
             if cand_path.exists():
                 candidates.append({
                     'old_prefix': os.fspath(ub.Path(*first_parts[:i])) + '/',
                     'new_prefix': '',
```

## kwcoco/cli/coco_stats.py

```diff
@@ -205,14 +205,15 @@
 
         #     if config['boxes']:
         #         print('Box stats')
         #         print(ub.urepr(dset.boxsize_stats(), nl=-1, precision=2))
 
 
 _CLI = CocoStatsCLI
+main = _CLI.main
 
 if __name__ == '__main__':
     """
     CommandLine:
         python -m kwcoco.cli.coco_stats --src=special:shapes8
     """
     _CLI.main()
```

## kwcoco/cli/coco_subset.py

```diff
@@ -2,15 +2,15 @@
 import ubelt as ub
 import scriptconfig as scfg
 
 
 class CocoSubsetCLI(object):
     name = 'subset'
 
-    class CLIConfig(scfg.Config):
+    class CocoSubetConfig(scfg.DataConfig):
         """
         Take a subset of this dataset and write it to a new file
         """
         __command__ = 'subset'
         __default__ = {
             'src': scfg.Value(None, help='input dataset path', position=1),
             'dst': scfg.Value(None, help='output dataset path', position=2),
@@ -95,25 +95,27 @@
             # image file name matches
             # annotations with segmentations / keypoints?
             # iamges/annotations that contain a special attribute?
             # images with a maximum / minimum number of annotations?
 
             # 'rng': scfg.Value(None, help='random seed'),
         }
-        epilog = """
+        __epilog__ = """
         Example Usage:
             kwcoco subset --src special:shapes8 --dst=foo.kwcoco.json
 
             # Take only the even image-ids
             kwcoco subset --src special:shapes8 --dst=foo-even.kwcoco.json --select_images '.id % 2 == 0'
 
             # Take only the videos where the name ends with 2
             kwcoco subset --src special:vidshapes8 --dst=vidsub.kwcoco.json --select_videos '.name | endswith("2")'
         """
 
+    CLIConfig = CocoSubetConfig
+
     @classmethod
     def main(cls, cmdline=True, **kw):
         """
         Example:
             >>> from kwcoco.cli.coco_subset import *  # NOQA
             >>> import ubelt as ub
             >>> dpath = ub.Path.appdir('kwcoco/tests/cli/union').ensuredir()
@@ -122,65 +124,75 @@
             >>>       'include_categories': 'superstar'}
             >>> cmdline = False
             >>> cls = CocoSubsetCLI
             >>> cls.main(cmdline, **kw)
         """
         import kwcoco
 
-        config = cls.CLIConfig(kw, cmdline=cmdline)
-        print('config = {}'.format(ub.urepr(dict(config), nl=1)))
+        config = cls.CLIConfig.cli(data=kw, cmdline=cmdline, strict=True)
+        print('config = {}'.format(ub.urepr(config, nl=1)))
 
         if config['src'] is None:
             raise Exception('must specify subset src: {}'.format(config['src']))
 
         if config['dst'] is None:
             raise Exception('must specify subset dst: {}'.format(config['dst']))
 
         print('reading fpath = {!r}'.format(config['src']))
         dset = kwcoco.CocoDataset.coerce(config['src'])
         dst_fpath = ub.Path(config['dst'])
 
-        if config['absolute'] == 'auto' and not config['copy_assets']:
-            src_fpath = ub.Path(dset.fpath)
-
-            src_bundle_dpath = src_fpath.absolute().parent
-            dst_bundle_dpath = dst_fpath.absolute().parent
-
-            # Destinations are different, we will need to force a reroot
-            absolute = (src_bundle_dpath.resolve() !=
-                        dst_bundle_dpath.resolve())
+        if config['absolute'] == 'auto':
+            if not config['copy_assets']:
+                src_fpath = ub.Path(dset.fpath)
+
+                src_bundle_dpath = src_fpath.absolute().parent
+                dst_bundle_dpath = dst_fpath.absolute().parent
+
+                # Destinations are different, we will need to force a reroot
+                absolute = (src_bundle_dpath.resolve() !=
+                            dst_bundle_dpath.resolve())
+            else:
+                absolute = False
         else:
             absolute = config['absolute']
+        print(f'absolute={absolute}')
 
         new_dset = query_subset(dset, config)
         if absolute:
             new_dset.reroot(absolute=absolute)
+        else:
+            if config['copy_assets']:
+                # a bit roundabout, but it seems to work
+                new_dset.reroot(absolute=False)
         new_dset.fpath = dst_fpath
+        print(f'new_dset.fpath={new_dset.fpath}')
 
         if config['copy_assets']:
             # Create a copy of the data, (currently only works for relative
             # kwcoco files)
             from os.path import join, dirname
             import shutil
             print('Copying assets')
             # new_dset.reroot(new_dset.bundle_dpath, old_prefix=dset.bundle_dpath)
             tocopy = []
             dstdirs = set()
+            print(f'new_dset.bundle_dpath={new_dset.bundle_dpath}')
             for gid, new_img in new_dset.index.imgs.items():
                 old_img = dset.index.imgs[gid]
                 if new_img.get('file_name', None) is not None:
-                    new_fpath = join(new_dset.bundle_dpath, new_img['file_name'])
                     old_fpath = join(dset.bundle_dpath, old_img['file_name'])
+                    new_fpath = join(new_dset.bundle_dpath, new_img['file_name'])
                     dstdirs.add(dirname(new_fpath))
                     tocopy.append((old_fpath, new_fpath))
                 new_aux_list = new_img.get('auxiliary', [])
                 old_aux_list = old_img.get('auxiliary', [])
                 for old_aux, new_aux in zip(old_aux_list, new_aux_list):
-                    new_fpath = join(new_dset.bundle_dpath, new_aux['file_name'])
                     old_fpath = join(dset.bundle_dpath, old_aux['file_name'])
+                    new_fpath = join(new_dset.bundle_dpath, new_aux['file_name'])
                     dstdirs.add(dirname(new_fpath))
                     tocopy.append((old_fpath, new_fpath))
 
             # Ensure directories
             for dpath in dstdirs:
                 ub.ensuredir(dpath)
 
@@ -205,44 +217,44 @@
     Example:
         >>> # xdoctest: +REQUIRES(module:jq)
         >>> from kwcoco.cli.coco_subset import *  # NOQA
         >>> import kwcoco
         >>> dset = kwcoco.CocoDataset.demo()
         >>> assert dset.n_images == 3
         >>> #
-        >>> config = CocoSubsetCLI.CLIConfig({'select_images': '.id < 3'})
+        >>> config = CocoSubsetCLI.CLIConfig(**{'select_images': '.id < 3'})
         >>> new_dset = query_subset(dset, config)
         >>> assert new_dset.n_images == 2
         >>> #
-        >>> config = CocoSubsetCLI.CLIConfig({'select_images': '.file_name | test(".*.png")'})
+        >>> config = CocoSubsetCLI.CLIConfig(**{'select_images': '.file_name | test(".*.png")'})
         >>> new_dset = query_subset(dset, config)
         >>> assert all(n.endswith('.png') for n in new_dset.images().lookup('file_name'))
         >>> assert new_dset.n_images == 2
         >>> #
-        >>> config = CocoSubsetCLI.CLIConfig({'select_images': '.file_name | test(".*.png") | not'})
+        >>> config = CocoSubsetCLI.CLIConfig(**{'select_images': '.file_name | test(".*.png") | not'})
         >>> new_dset = query_subset(dset, config)
         >>> assert not any(n.endswith('.png') for n in new_dset.images().lookup('file_name'))
         >>> assert new_dset.n_images == 1
         >>> #
-        >>> config = CocoSubsetCLI.CLIConfig({'select_images': '.id < 3 and (.file_name | test(".*.png"))'})
+        >>> config = CocoSubsetCLI.CLIConfig(**{'select_images': '.id < 3 and (.file_name | test(".*.png"))'})
         >>> new_dset = query_subset(dset, config)
         >>> assert new_dset.n_images == 1
         >>> #
-        >>> config = CocoSubsetCLI.CLIConfig({'select_images': '.id < 3 or (.file_name | test(".*.png"))'})
+        >>> config = CocoSubsetCLI.CLIConfig(**{'select_images': '.id < 3 or (.file_name | test(".*.png"))'})
         >>> new_dset = query_subset(dset, config)
         >>> assert new_dset.n_images == 3
 
     Example:
         >>> # xdoctest: +REQUIRES(module:jq)
         >>> from kwcoco.cli.coco_subset import *  # NOQA
         >>> import kwcoco
         >>> dset = kwcoco.CocoDataset.demo('vidshapes8')
         >>> assert dset.n_videos == 8
         >>> assert dset.n_images == 16
-        >>> config = CocoSubsetCLI.CLIConfig({'select_videos': '.name == "toy_video_3"'})
+        >>> config = CocoSubsetCLI.CLIConfig(**{'select_videos': '.name == "toy_video_3"'})
         >>> new_dset = query_subset(dset, config)
         >>> assert new_dset.n_images == 2
         >>> assert new_dset.n_videos == 1
     """
     valid_gids = set(dset.imgs.keys())
 
     if config['gids'] is not None:
```

## kwcoco/cli/coco_union.py

```diff
@@ -6,14 +6,16 @@
 class CocoUnionCLI(object):
     name = 'union'
 
     class CLIConfig(scfg.DataConfig):
         """
         Combine multiple COCO datasets into a single merged dataset.
         """
+        __command__ = 'union'
+
         src = scfg.Value([], position=1, help='path to multiple input datasets', nargs='+')
 
         dst = scfg.Value('combo.kwcoco.json', help='path to output dataset')
 
         absolute = scfg.Value(False, isflag=1, help=ub.paragraph(
                 '''
                 if True, converts paths to absolute paths before doing union
@@ -84,14 +86,22 @@
         print('Finished loading. Starting union.')
         combo = kwcoco.CocoDataset.union(
             *datasets,
             remember_parent=config.remember_parent)
 
         out_fpath = config.dst
         out_dpath = ub.Path(out_fpath).parent
+
+        if not config.absolute:
+            # Handle the case where the output is not in the same path as the
+            # inputs.
+            curr_bundle = ub.Path(combo.bundle_dpath)
+            if curr_bundle != out_dpath:
+                combo.reroot(out_dpath, check=False)
+
         if out_dpath:
             ub.ensuredir(out_dpath)
         print('Writing to out_fpath = {!r}'.format(out_fpath))
         combo.fpath = out_fpath
         dumpkw = {
             'newlines': True,
             'compress': config.compress,
```

## kwcoco/cli/coco_validate.py

```diff
@@ -110,15 +110,15 @@
             'workers': scfg.Value(0, isflag=True, help=ub.paragraph(
                 '''
                 number of workers for checks that support parallelization
                 ''')),
 
             # TODO: Move these to a different tool. This should only validate,
             # not fix anything.
-
+            # TODO: different tool should be called fixup
             'fix': scfg.Value(None, help=ub.paragraph(
                 '''
                 Code indicating strategy to attempt to fix the dataset.
                 If None, do nothing.
                 If remove, removes missing / corrupted images.
                 Other strategies may be added in the future.
```

## kwcoco/demo/boids.py

```diff
@@ -591,14 +591,24 @@
     Requirements:
         pip install pygame
 
     CommandLine:
         python -m kwcoco.demo.boids
         pip install pygame kwcoco -U && python -m kwcoco.demo.boids
     """
+    ASK_TO_INSTALL = 1
+    if ASK_TO_INSTALL:
+        if ub.modname_to_modpath('pygame') is None:
+            from rich.prompt import Confirm
+            ans = Confirm.ask('Pygame was not detected. Do you want to install it?')
+            if ans:
+                import subprocess
+                import sys
+                subprocess.check_call([sys.executable, '-m', 'pip', 'install', 'pygame'])
+
     try:
         import pygame
     except ImportError:
         raise Exception('Please pip install pygame before using this function')
     pygame.init()
     display_info = pygame.display.Info()
```

## kwcoco/metrics/confusion_vectors.py

```diff
@@ -127,14 +127,15 @@
         Args:
             **kwargs: See :func:`kwcoco.metrics.DetectionMetrics.demo`
 
         Returns:
             ConfusionVectors
 
         Example:
+            >>> from kwcoco.metrics.confusion_vectors import *  # NOQA
             >>> cfsn_vecs = ConfusionVectors.demo()
             >>> print('cfsn_vecs = {!r}'.format(cfsn_vecs))
             >>> cx_to_binvecs = cfsn_vecs.binarize_ovr()
             >>> print('cx_to_binvecs = {!r}'.format(cx_to_binvecs))
         """
         from kwcoco.metrics import DetectionMetrics
         default = {
```

## kwcoco/metrics/drawing.py

```diff
@@ -389,15 +389,17 @@
         info (Measures | Dict)
 
     NOTE:
         There needs to be enough negative examples for using ROC to make any
         sense!
 
     Example:
-        >>> # xdoctest: +REQUIRES(module:kwplot, module:seaborn)
+        >>> ### TODO# xdoctest: +REQUIRES(module:kwplot, module:seaborn)
+        >>> # xdoctest: +REQUIRES(module:kwplot)
+        >>> # xdoctest: +REQUIRES(module:seaborn)
         >>> from kwcoco.metrics.drawing import *  # NOQA
         >>> from kwcoco.metrics import DetectionMetrics
         >>> dmet = DetectionMetrics.demo(nimgs=30, null_pred=1, classes=3,
         >>>                              nboxes=10, n_fp=10, box_noise=0.3,
         >>>                              with_probs=False)
         >>> dmet.true_detections(0).data
         >>> cfsn_vecs = dmet.confusion_vectors(compat='mutex', prioritize='iou', bias=0)
@@ -627,14 +629,15 @@
         xlim=(0, 1), ylim=(0, 1), xpad=0.01, ypad=0.01,
         xlabel='threshold', ylabel=key,
         title=prefix + 'threshold curves',
         legend_loc='lower right',
         color=colors,
         linestyle='cycle', marker='cycle', **kw
     )
+    ax.set_ylabel('quality')
     for idx, best_pt in idx_to_best_pt.items():
         best_thresh, best_measure = best_pt
         color = idx_to_colors[idx]
         edgecolor = kwimage.Color.coerce(color).adjust(lighten=-0.4).as01('rgba')
 
         # ax.plot(best_thresh, best_measure, '*', color=color, edgecolor=edgecolor)
         ax.scatter(
```

## kwcoco/util/jsonschema_elements.py

```diff
@@ -1,12 +1,17 @@
 r"""
 Functional interface into defining jsonschema structures.
 
 See mixin classes for details.
 
+Perhaps [Voluptuous]_ does this better and we should switch to that?
+
+References:
+    .. [Voluptuous] https://pypi.org/project/voluptuous
+
 Example:
     >>> from kwcoco.util.jsonschema_elements import *  # NOQA
     >>> elem = SchemaElements()
     >>> for base in SchemaElements.__bases__:
     >>>     print('\n\n====\nbase = {!r}'.format(base))
     >>>     attrs = [key for key in dir(base) if not key.startswith('_')]
     >>>     for key in attrs:
```

## kwcoco/util/util_sklearn.py

```diff
@@ -1,14 +1,17 @@
 """
 Extensions to sklearn constructs
 """
 import warnings
 import numpy as np
 from sklearn.utils.validation import check_array
 from sklearn.model_selection._split import (_BaseKFold,)
+from packaging.version import parse as Version
+
+ARGSORT_HAS_STABLE_KIND = Version(np.__version__) >= Version('1.15.0')
 
 
 class StratifiedGroupKFold(_BaseKFold):
     """Stratified K-Folds cross-validator with Grouping
 
     Provides train/test indices to split data in train/test sets.
 
@@ -38,22 +41,22 @@
             groups (ndarray): groupids for items. Items with the same groupid
                 must be placed in the same group.
 
         Returns:
             list: test_folds
 
         Example:
+            >>> from kwcoco.util.util_sklearn import *  # NOQA
             >>> import kwarray
             >>> rng = kwarray.ensure_rng(0)
             >>> groups = [1, 1, 3, 4, 2, 2, 7, 8, 8]
             >>> y      = [1, 1, 1, 1, 2, 2, 2, 3, 3]
             >>> X = np.empty((len(y), 0))
             >>> self = StratifiedGroupKFold(random_state=rng, shuffle=True)
             >>> skf_list = list(self.split(X=X, y=y, groups=groups))
-            ...
             >>> import ubelt as ub
             >>> print(ub.urepr(skf_list, nl=1, with_dtype=False))
             [
                 (np.array([2, 3, 4, 5, 6]), np.array([0, 1, 7, 8])),
                 (np.array([0, 1, 2, 7, 8]), np.array([3, 4, 5, 6])),
                 (np.array([0, 1, 3, 4, 5, 6, 7, 8]), np.array([2])),
             ]
@@ -64,31 +67,43 @@
             n_splits = self.n_splits
             y = np.asarray(y)
             n_samples = y.shape[0]
 
             unique_y, y_inversed = np.unique(y, return_inverse=True)
             n_classes = max(unique_y) + 1
             unique_groups, group_idxs = kwarray.group_indices(groups)
+
+            if ARGSORT_HAS_STABLE_KIND:
+                # Fixed in latest kwarray, but this doesn't hurt.
+                for gxs in group_idxs:
+                    gxs.sort()
+
             grouped_y = kwarray.apply_grouping(y, group_idxs)
             grouped_y_counts = np.array([
                 np.bincount(y_, minlength=n_classes) for y_ in grouped_y])
 
             target_freq = grouped_y_counts.sum(axis=0)
             target_freq = target_freq.astype(float)
             target_ratio = target_freq / float(target_freq.sum())
 
-            # Greedilly choose the split assignment that minimizes the local
+            # Greedily choose the split assignment that minimizes the local
             # * squared differences in target from actual frequencies
             # * and best equalizes the number of items per fold
             # Distribute groups with most members first
             split_freq = np.zeros((n_splits, n_classes))
             # split_ratios = split_freq / split_freq.sum(axis=1)
             split_ratios = np.ones(split_freq.shape) / split_freq.shape[1]
             split_diffs = ((split_freq - target_ratio) ** 2).sum(axis=1)
-            sortx = np.argsort(grouped_y_counts.sum(axis=1))[::-1]
+
+            rowsum = grouped_y_counts.sum(axis=1)
+            if ARGSORT_HAS_STABLE_KIND:
+                sortx = np.argsort(rowsum, kind='stable')[::-1]
+            else:
+                sortx = np.argsort(rowsum)[::-1]
+
             grouped_splitx = []
 
             # import ubelt as ub
             # print(ub.urepr(grouped_y_counts, nl=-1))
             # print('target_ratio = {!r}'.format(target_ratio))
 
             for count, group_idx in enumerate(sortx):
```

## Comparing `kwcoco/examples/bench_large_hyperspectral.py` & `examples/bench_large_hyperspectral.py`

 * *Files identical despite different names*

## Comparing `kwcoco/examples/demo_kwcoco_spaces.py` & `examples/demo_kwcoco_spaces.py`

 * *Files identical despite different names*

## Comparing `kwcoco/examples/demo_sql_and_zip_files.py` & `examples/demo_sql_and_zip_files.py`

 * *Files identical despite different names*

## Comparing `kwcoco/examples/draw_gt_and_predicted_boxes.py` & `examples/draw_gt_and_predicted_boxes.py`

 * *Files identical despite different names*

## Comparing `kwcoco/examples/faq.py` & `examples/faq.py`

 * *Files 24% similar despite different names*

```diff
@@ -71,7 +71,44 @@
     dset.coco_image(1)` The `coco_img.img` attribute is exactly the underlying
     dictionary. So you are never too far away from it.
 
     Similarly for the `Images` objects: `dset.images().objs`  returns a list of
     all of the image dictionaries in that set.
     """
     ...
+
+
+def what_order_are_images_returned_in():
+    """
+    Q. What order are images returned in? What about when using ndsampler.
+
+    A. When requesting images from a video they are ordered by their timestamp
+    / frame_index.  For ndsampler, the order is always the requested order.
+
+    """
+    import kwcoco
+    import ndsampler
+    dset = kwcoco.CocoDataset.demo('vidshapes1', num_frames=10)
+    images = dset.images()
+
+    videos = dset.videos()
+
+    # Images always ordered by timestamp/frame-index here
+    images = dset.images(video_id=videos[0])
+
+    # But you can always lookup the attribute and check yourself
+    frame_idxs = images.lookup('frame_index')
+    assert sorted(frame_idxs) == frame_idxs
+
+    gid1, gid2, gid3 = images[0:3]
+
+    sampler = ndsampler.CocoSampler(dset)
+
+    target = {'gids': [gid1, gid2, gid3]}
+    sample = sampler.load_sample(target)
+    # Data is in the requested order
+    assert sample['target']['gids'] == [gid1, gid2, gid3]
+
+    target = {'gids': [gid2, gid3, gid1]}
+    sample = sampler.load_sample(target)
+    # Data is in the requested order
+    assert sample['target']['gids'] == [gid2, gid3, gid1]
```

## Comparing `kwcoco/examples/getting_started_existing_dataset.py` & `examples/getting_started_existing_dataset.py`

 * *Files identical despite different names*

## Comparing `kwcoco/examples/loading_multispectral_data.py` & `examples/loading_multispectral_data.py`

 * *Files identical despite different names*

## Comparing `kwcoco/examples/modification_example.py` & `examples/modification_example.py`

 * *Files identical despite different names*

## Comparing `kwcoco/examples/shifting_annots.py` & `examples/shifting_annots.py`

 * *Files identical despite different names*

## Comparing `kwcoco/examples/simple_kwcoco_torch_dataset.py` & `examples/simple_kwcoco_torch_dataset.py`

 * *Files 2% similar despite different names*

```diff
@@ -49,15 +49,14 @@
             downsampling.
 
         rng (RandomState | int | None): an existing random number generator or
             a random seed to produce deterministic augmentations.
 
     Example:
         >>> # xdoctest: +REQUIRES(module:torch)
-        >>> from kwcoco.examples.simple_kwcoco_torch_dataset import *  # NOQA
         >>> import kwcoco
         >>> coco_dset = kwcoco.CocoDataset.demo('shapes8')
         >>> input_dims = (384, 384)
         >>> self = torch_dset = KWCocoSimpleTorchDataset(coco_dset, input_dims=input_dims)
         >>> index = len(self) // 2
         >>> item = self[index]
         >>> # xdoctest: +REQUIRES(--show)
```

## Comparing `kwcoco/examples/vectorized_interface.py` & `examples/vectorized_interface.py`

 * *Files identical despite different names*

## Comparing `kwcoco-0.6.2.dist-info/LICENSE` & `kwcoco-0.6.3.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `kwcoco-0.6.2.dist-info/METADATA` & `kwcoco-0.6.3.dist-info/METADATA`

 * *Files 14% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: kwcoco
-Version: 0.6.2
+Version: 0.6.3
 Summary: The kwcoco module and cli for image datasets
 Home-page: https://gitlab.kitware.com/computer-vision/kwcoco
 Author: Jon Crall
 Author-email: jon.crall@kitware.com
 License: Apache 2
 Classifier: Development Status :: 4 - Beta
 Classifier: Intended Audience :: Developers
@@ -19,15 +19,15 @@
 Classifier: Programming Language :: Python :: 3.11
 Requires-Python: >=3.6
 Description-Content-Type: text/x-rst
 License-File: LICENSE
 Requires-Dist: delayed-image (>=0.2.7)
 Requires-Dist: jsonschema (>=3.2.0)
 Requires-Dist: kwarray (>=0.6.7)
-Requires-Dist: kwimage (>=0.9.12)
+Requires-Dist: kwimage (>=0.9.19)
 Requires-Dist: packaging (>=21.3)
 Requires-Dist: parse (>=1.14.0)
 Requires-Dist: safer (>=4.4.1)
 Requires-Dist: scriptconfig (>=0.7.7)
 Requires-Dist: sortedcontainers (>=2.3.0)
 Requires-Dist: ubelt (>=1.2.4)
 Requires-Dist: uritools (>=3.0.0)
@@ -66,158 +66,182 @@
 Requires-Dist: scikit-learn (>=1.1.3) ; python_version < "4.0" and python_version >= "3.11"
 Requires-Dist: scipy (>=1.9.2) ; python_version < "4.0" and python_version >= "3.11"
 Requires-Dist: psutil (>=5.9.0) ; python_version < "4.0" and python_version >= "3.11"
 Provides-Extra: all
 Requires-Dist: delayed-image (>=0.2.7) ; extra == 'all'
 Requires-Dist: jsonschema (>=3.2.0) ; extra == 'all'
 Requires-Dist: kwarray (>=0.6.7) ; extra == 'all'
-Requires-Dist: kwimage (>=0.9.12) ; extra == 'all'
+Requires-Dist: kwimage (>=0.9.19) ; extra == 'all'
 Requires-Dist: packaging (>=21.3) ; extra == 'all'
 Requires-Dist: parse (>=1.14.0) ; extra == 'all'
 Requires-Dist: safer (>=4.4.1) ; extra == 'all'
 Requires-Dist: scriptconfig (>=0.7.7) ; extra == 'all'
 Requires-Dist: sortedcontainers (>=2.3.0) ; extra == 'all'
 Requires-Dist: ubelt (>=1.2.4) ; extra == 'all'
 Requires-Dist: uritools (>=3.0.0) ; extra == 'all'
 Requires-Dist: xarray (>=0.16.0) ; extra == 'all'
 Requires-Dist: coverage (>=5.2.1) ; extra == 'all'
-Requires-Dist: xdoctest (>=0.15.6) ; extra == 'all'
+Requires-Dist: xdoctest (>=1.1.1) ; extra == 'all'
 Requires-Dist: timerit (>=0.3.0) ; extra == 'all'
 Requires-Dist: pytest (>=6.2.4) ; extra == 'all'
 Requires-Dist: affine (>=2.3.0) ; extra == 'all'
 Requires-Dist: colormath (>=3.0.0) ; extra == 'all'
-Requires-Dist: kwimage-ext (>=0.2.0) ; extra == 'all'
 Requires-Dist: kwplot (>=0.4.13) ; extra == 'all'
 Requires-Dist: lark (>=1.1.2) ; extra == 'all'
 Requires-Dist: lark-cython (>=0.0.12) ; extra == 'all'
 Requires-Dist: seaborn (>=0.9.0) ; extra == 'all'
+Requires-Dist: rich (>=12.3.0) ; extra == 'all'
+Requires-Dist: ijson (>=3.1.4) ; extra == 'all'
+Requires-Dist: sqlalchemy-utils (>=0.40.0) ; extra == 'all'
 Provides-Extra: all-strict
 Requires-Dist: delayed-image (==0.2.7) ; extra == 'all-strict'
 Requires-Dist: jsonschema (==3.2.0) ; extra == 'all-strict'
 Requires-Dist: kwarray (==0.6.7) ; extra == 'all-strict'
-Requires-Dist: kwimage (==0.9.12) ; extra == 'all-strict'
+Requires-Dist: kwimage (==0.9.19) ; extra == 'all-strict'
 Requires-Dist: packaging (==21.3) ; extra == 'all-strict'
 Requires-Dist: parse (==1.14.0) ; extra == 'all-strict'
 Requires-Dist: safer (==4.4.1) ; extra == 'all-strict'
 Requires-Dist: scriptconfig (==0.7.7) ; extra == 'all-strict'
 Requires-Dist: sortedcontainers (==2.3.0) ; extra == 'all-strict'
 Requires-Dist: ubelt (==1.2.4) ; extra == 'all-strict'
 Requires-Dist: uritools (==3.0.0) ; extra == 'all-strict'
 Requires-Dist: xarray (==0.16.0) ; extra == 'all-strict'
 Requires-Dist: coverage (==5.2.1) ; extra == 'all-strict'
-Requires-Dist: xdoctest (==0.15.6) ; extra == 'all-strict'
+Requires-Dist: xdoctest (==1.1.1) ; extra == 'all-strict'
 Requires-Dist: timerit (==0.3.0) ; extra == 'all-strict'
 Requires-Dist: pytest (==6.2.4) ; extra == 'all-strict'
 Requires-Dist: affine (==2.3.0) ; extra == 'all-strict'
 Requires-Dist: colormath (==3.0.0) ; extra == 'all-strict'
-Requires-Dist: kwimage-ext (==0.2.0) ; extra == 'all-strict'
 Requires-Dist: kwplot (==0.4.13) ; extra == 'all-strict'
 Requires-Dist: lark (==1.1.2) ; extra == 'all-strict'
 Requires-Dist: lark-cython (==0.0.12) ; extra == 'all-strict'
 Requires-Dist: seaborn (==0.9.0) ; extra == 'all-strict'
+Requires-Dist: rich (==12.3.0) ; extra == 'all-strict'
+Requires-Dist: ijson (==3.1.4) ; extra == 'all-strict'
+Requires-Dist: sqlalchemy-utils (==0.40.0) ; extra == 'all-strict'
 Requires-Dist: numpy (==1.19.3) ; (python_version < "3.10" and python_version >= "3.9") and extra == 'all-strict'
 Requires-Dist: pandas (==1.4.0) ; (python_version < "3.10" and python_version >= "3.9") and extra == 'all-strict'
 Requires-Dist: scikit-learn (==1.0.2) ; (python_version < "3.10" and python_version >= "3.9") and extra == 'all-strict'
 Requires-Dist: scipy (==1.8.0) ; (python_version < "3.10" and python_version >= "3.9") and extra == 'all-strict'
 Requires-Dist: psutil (==5.7.3) ; (python_version < "3.10" and python_version >= "3.9") and extra == 'all-strict'
 Requires-Dist: sqlalchemy (==1.4.0) ; (python_version < "3.10" and python_version >= "3.9") and extra == 'all-strict'
 Requires-Dist: jq (==1.2.2) ; (python_version < "3.10" and python_version >= "3.9") and extra == 'all-strict'
+Requires-Dist: psycopg2-binary (==2.8.6) ; (python_version < "3.10" and python_version >= "3.9") and extra == 'all-strict'
 Requires-Dist: numpy (==1.21.6) ; (python_version < "3.11" and python_version >= "3.10") and extra == 'all-strict'
 Requires-Dist: pandas (==1.3.5) ; (python_version < "3.11" and python_version >= "3.10") and extra == 'all-strict'
 Requires-Dist: scikit-learn (==1.1.0) ; (python_version < "3.11" and python_version >= "3.10") and extra == 'all-strict'
 Requires-Dist: scipy (==1.8.0) ; (python_version < "3.11" and python_version >= "3.10") and extra == 'all-strict'
 Requires-Dist: psutil (==5.9.0) ; (python_version < "3.11" and python_version >= "3.10") and extra == 'all-strict'
+Requires-Dist: jq (==1.2.2) ; (python_version < "3.11" and python_version >= "3.10") and extra == 'all-strict'
+Requires-Dist: psycopg2-binary (==2.9.1) ; (python_version < "3.11" and python_version >= "3.10") and extra == 'all-strict'
+Requires-Dist: kwimage-ext (==0.2.0) ; (python_version < "3.11" and python_version >= "3.6") and extra == 'all-strict'
 Requires-Dist: networkx (==2.7) ; (python_version < "3.11" and python_version >= "3.8") and extra == 'all-strict'
 Requires-Dist: jq (==1.1.3) ; (python_version < "3.5" and python_version >= "2.7") and extra == 'all-strict'
 Requires-Dist: sqlalchemy (==1.4.0) ; (python_version < "3.6" and python_version >= "3.5") and extra == 'all-strict'
 Requires-Dist: jq (==1.1.3) ; (python_version < "3.6" and python_version >= "3.5") and extra == 'all-strict'
 Requires-Dist: pytest-cov (<2.6.0,==2.0.0) ; (python_version < "3.6.0") and extra == 'all-strict'
 Requires-Dist: numpy (==1.19.2) ; (python_version < "3.7" and python_version >= "3.6") and extra == 'all-strict'
 Requires-Dist: pandas (==1.1.4) ; (python_version < "3.7" and python_version >= "3.6") and extra == 'all-strict'
 Requires-Dist: scikit-learn (==0.24.1) ; (python_version < "3.7" and python_version >= "3.6") and extra == 'all-strict'
 Requires-Dist: scipy (==1.5.4) ; (python_version < "3.7" and python_version >= "3.6") and extra == 'all-strict'
 Requires-Dist: psutil (==5.0.1) ; (python_version < "3.7" and python_version >= "3.6") and extra == 'all-strict'
 Requires-Dist: sqlalchemy (==1.4.0) ; (python_version < "3.7" and python_version >= "3.6") and extra == 'all-strict'
 Requires-Dist: jq (==1.2.2) ; (python_version < "3.7" and python_version >= "3.6") and extra == 'all-strict'
+Requires-Dist: psycopg2-binary (==2.7.3.2) ; (python_version < "3.7" and python_version >= "3.6") and extra == 'all-strict'
 Requires-Dist: networkx (<=2.5.1,==2.2.0) ; (python_version < "3.7.0" and python_version >= "3.6.0") and extra == 'all-strict'
 Requires-Dist: networkx (==2.6.2) ; (python_version < "3.8" and python_version >= "3.7") and extra == 'all-strict'
 Requires-Dist: numpy (==1.19.2) ; (python_version < "3.8" and python_version >= "3.7") and extra == 'all-strict'
 Requires-Dist: pandas (==1.2.0) ; (python_version < "3.8" and python_version >= "3.7") and extra == 'all-strict'
 Requires-Dist: scikit-learn (==0.24.1) ; (python_version < "3.8" and python_version >= "3.7") and extra == 'all-strict'
 Requires-Dist: scipy (==1.6.0) ; (python_version < "3.8" and python_version >= "3.7") and extra == 'all-strict'
 Requires-Dist: psutil (==5.4.6) ; (python_version < "3.8" and python_version >= "3.7") and extra == 'all-strict'
 Requires-Dist: sqlalchemy (==1.4.0) ; (python_version < "3.8" and python_version >= "3.7") and extra == 'all-strict'
 Requires-Dist: jq (==1.2.2) ; (python_version < "3.8" and python_version >= "3.7") and extra == 'all-strict'
+Requires-Dist: psycopg2-binary (==2.7.5) ; (python_version < "3.8" and python_version >= "3.7") and extra == 'all-strict'
 Requires-Dist: numpy (==1.19.2) ; (python_version < "3.9" and python_version >= "3.8") and extra == 'all-strict'
 Requires-Dist: pandas (==1.4.0) ; (python_version < "3.9" and python_version >= "3.8") and extra == 'all-strict'
 Requires-Dist: scikit-learn (==1.0.2) ; (python_version < "3.9" and python_version >= "3.8") and extra == 'all-strict'
 Requires-Dist: scipy (==1.8.0) ; (python_version < "3.9" and python_version >= "3.8") and extra == 'all-strict'
 Requires-Dist: psutil (==5.6.3) ; (python_version < "3.9" and python_version >= "3.8") and extra == 'all-strict'
 Requires-Dist: sqlalchemy (==1.4.0) ; (python_version < "3.9" and python_version >= "3.8") and extra == 'all-strict'
 Requires-Dist: jq (==1.2.2) ; (python_version < "3.9" and python_version >= "3.8") and extra == 'all-strict'
+Requires-Dist: psycopg2-binary (==2.8.4) ; (python_version < "3.9" and python_version >= "3.8") and extra == 'all-strict'
 Requires-Dist: networkx (==2.8) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'all-strict'
 Requires-Dist: numpy (==1.23.2) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'all-strict'
 Requires-Dist: pandas (==1.5.0) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'all-strict'
 Requires-Dist: scikit-learn (==1.1.3) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'all-strict'
 Requires-Dist: scipy (==1.9.2) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'all-strict'
 Requires-Dist: psutil (==5.9.0) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'all-strict'
+Requires-Dist: kwimage-ext (==0.2.1) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'all-strict'
+Requires-Dist: jq (==1.3.0) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'all-strict'
+Requires-Dist: psycopg2-binary (==2.9.5) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'all-strict'
 Requires-Dist: sqlalchemy (==1.4.26) ; (python_version >= "3.10") and extra == 'all-strict'
-Requires-Dist: jq (==1.2.2) ; (python_version >= "3.10") and extra == 'all-strict'
 Requires-Dist: pytest-cov (==2.12.1) ; (python_version >= "3.6.0") and extra == 'all-strict'
 Requires-Dist: ujson (==5.2.0) ; (python_version >= "3.7") and extra == 'all-strict'
+Requires-Dist: rich-argparse (==1.1.0) ; (python_version >= "3.7") and extra == 'all-strict'
 Requires-Dist: numpy (>=1.19.3) ; (python_version < "3.10" and python_version >= "3.9") and extra == 'all'
 Requires-Dist: pandas (>=1.4.0) ; (python_version < "3.10" and python_version >= "3.9") and extra == 'all'
 Requires-Dist: scikit-learn (>=1.0.2) ; (python_version < "3.10" and python_version >= "3.9") and extra == 'all'
 Requires-Dist: scipy (>=1.8.0) ; (python_version < "3.10" and python_version >= "3.9") and extra == 'all'
 Requires-Dist: psutil (>=5.7.3) ; (python_version < "3.10" and python_version >= "3.9") and extra == 'all'
 Requires-Dist: sqlalchemy (>=1.4.0) ; (python_version < "3.10" and python_version >= "3.9") and extra == 'all'
 Requires-Dist: jq (>=1.2.2) ; (python_version < "3.10" and python_version >= "3.9") and extra == 'all'
+Requires-Dist: psycopg2-binary (>=2.8.6) ; (python_version < "3.10" and python_version >= "3.9") and extra == 'all'
 Requires-Dist: numpy (>=1.21.6) ; (python_version < "3.11" and python_version >= "3.10") and extra == 'all'
 Requires-Dist: pandas (>=1.3.5) ; (python_version < "3.11" and python_version >= "3.10") and extra == 'all'
 Requires-Dist: scikit-learn (>=1.1.0) ; (python_version < "3.11" and python_version >= "3.10") and extra == 'all'
 Requires-Dist: scipy (>=1.8.0) ; (python_version < "3.11" and python_version >= "3.10") and extra == 'all'
 Requires-Dist: psutil (>=5.9.0) ; (python_version < "3.11" and python_version >= "3.10") and extra == 'all'
+Requires-Dist: jq (>=1.2.2) ; (python_version < "3.11" and python_version >= "3.10") and extra == 'all'
+Requires-Dist: psycopg2-binary (>=2.9.1) ; (python_version < "3.11" and python_version >= "3.10") and extra == 'all'
+Requires-Dist: kwimage-ext (>=0.2.0) ; (python_version < "3.11" and python_version >= "3.6") and extra == 'all'
 Requires-Dist: networkx (>=2.7) ; (python_version < "3.11" and python_version >= "3.8") and extra == 'all'
 Requires-Dist: jq (>=1.1.3) ; (python_version < "3.5" and python_version >= "2.7") and extra == 'all'
 Requires-Dist: sqlalchemy (>=1.4.0) ; (python_version < "3.6" and python_version >= "3.5") and extra == 'all'
 Requires-Dist: jq (>=1.1.3) ; (python_version < "3.6" and python_version >= "3.5") and extra == 'all'
 Requires-Dist: pytest-cov (<2.6.0,>=2.0.0) ; (python_version < "3.6.0") and extra == 'all'
 Requires-Dist: numpy (>=1.19.2) ; (python_version < "3.7" and python_version >= "3.6") and extra == 'all'
 Requires-Dist: pandas (>=1.1.4) ; (python_version < "3.7" and python_version >= "3.6") and extra == 'all'
 Requires-Dist: scikit-learn (>=0.24.1) ; (python_version < "3.7" and python_version >= "3.6") and extra == 'all'
 Requires-Dist: scipy (>=1.5.4) ; (python_version < "3.7" and python_version >= "3.6") and extra == 'all'
 Requires-Dist: psutil (>=5.0.1) ; (python_version < "3.7" and python_version >= "3.6") and extra == 'all'
 Requires-Dist: sqlalchemy (>=1.4.0) ; (python_version < "3.7" and python_version >= "3.6") and extra == 'all'
 Requires-Dist: jq (>=1.2.2) ; (python_version < "3.7" and python_version >= "3.6") and extra == 'all'
+Requires-Dist: psycopg2-binary (>=2.7.3.2) ; (python_version < "3.7" and python_version >= "3.6") and extra == 'all'
 Requires-Dist: networkx (<=2.5.1,>=2.2.0) ; (python_version < "3.7.0" and python_version >= "3.6.0") and extra == 'all'
 Requires-Dist: networkx (>=2.6.2) ; (python_version < "3.8" and python_version >= "3.7") and extra == 'all'
 Requires-Dist: numpy (>=1.19.2) ; (python_version < "3.8" and python_version >= "3.7") and extra == 'all'
 Requires-Dist: pandas (>=1.2.0) ; (python_version < "3.8" and python_version >= "3.7") and extra == 'all'
 Requires-Dist: scikit-learn (>=0.24.1) ; (python_version < "3.8" and python_version >= "3.7") and extra == 'all'
 Requires-Dist: scipy (>=1.6.0) ; (python_version < "3.8" and python_version >= "3.7") and extra == 'all'
 Requires-Dist: psutil (>=5.4.6) ; (python_version < "3.8" and python_version >= "3.7") and extra == 'all'
 Requires-Dist: sqlalchemy (>=1.4.0) ; (python_version < "3.8" and python_version >= "3.7") and extra == 'all'
 Requires-Dist: jq (>=1.2.2) ; (python_version < "3.8" and python_version >= "3.7") and extra == 'all'
+Requires-Dist: psycopg2-binary (>=2.7.5) ; (python_version < "3.8" and python_version >= "3.7") and extra == 'all'
 Requires-Dist: numpy (>=1.19.2) ; (python_version < "3.9" and python_version >= "3.8") and extra == 'all'
 Requires-Dist: pandas (>=1.4.0) ; (python_version < "3.9" and python_version >= "3.8") and extra == 'all'
 Requires-Dist: scikit-learn (>=1.0.2) ; (python_version < "3.9" and python_version >= "3.8") and extra == 'all'
 Requires-Dist: scipy (>=1.8.0) ; (python_version < "3.9" and python_version >= "3.8") and extra == 'all'
 Requires-Dist: psutil (>=5.6.3) ; (python_version < "3.9" and python_version >= "3.8") and extra == 'all'
 Requires-Dist: sqlalchemy (>=1.4.0) ; (python_version < "3.9" and python_version >= "3.8") and extra == 'all'
 Requires-Dist: jq (>=1.2.2) ; (python_version < "3.9" and python_version >= "3.8") and extra == 'all'
+Requires-Dist: psycopg2-binary (>=2.8.4) ; (python_version < "3.9" and python_version >= "3.8") and extra == 'all'
 Requires-Dist: networkx (>=2.8) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'all'
 Requires-Dist: numpy (>=1.23.2) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'all'
 Requires-Dist: pandas (>=1.5.0) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'all'
 Requires-Dist: scikit-learn (>=1.1.3) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'all'
 Requires-Dist: scipy (>=1.9.2) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'all'
 Requires-Dist: psutil (>=5.9.0) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'all'
+Requires-Dist: kwimage-ext (>=0.2.1) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'all'
+Requires-Dist: jq (>=1.3.0) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'all'
+Requires-Dist: psycopg2-binary (>=2.9.5) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'all'
 Requires-Dist: sqlalchemy (>=1.4.26) ; (python_version >= "3.10") and extra == 'all'
-Requires-Dist: jq (>=1.2.2) ; (python_version >= "3.10") and extra == 'all'
 Requires-Dist: pytest-cov (>=2.12.1) ; (python_version >= "3.6.0") and extra == 'all'
 Requires-Dist: ujson (>=5.2.0) ; (python_version >= "3.7") and extra == 'all'
+Requires-Dist: rich-argparse (>=1.1.0) ; (python_version >= "3.7") and extra == 'all'
 Provides-Extra: graphics
 Provides-Extra: graphics-strict
 Requires-Dist: opencv-python (==3.4.15.55) ; (python_version < "3.10" and python_version >= "3.9") and extra == 'graphics-strict'
 Requires-Dist: opencv-python (==4.5.4.58) ; (python_version < "3.11" and python_version >= "3.10") and extra == 'graphics-strict'
 Requires-Dist: opencv-python (==3.1.0.0) ; (python_version < "3.4" and python_version >= "2.7") and extra == 'graphics-strict'
 Requires-Dist: opencv-python (==3.1.0.5) ; (python_version < "3.5" and python_version >= "3.4") and extra == 'graphics-strict'
 Requires-Dist: opencv-python (==3.1.0.2) ; (python_version < "3.6" and python_version >= "3.5") and extra == 'graphics-strict'
@@ -253,55 +277,65 @@
 Requires-Dist: opencv-python-headless (>=3.4.13.47) ; (python_version < "3.7" and python_version >= "3.6") and extra == 'headless'
 Requires-Dist: opencv-python-headless (>=3.4.15.55) ; (python_version < "3.8" and python_version >= "3.7") and extra == 'headless'
 Requires-Dist: opencv-python-headless (>=3.4.15.55) ; (python_version < "3.9" and python_version >= "3.8") and extra == 'headless'
 Requires-Dist: opencv-python-headless (>=4.5.5.64) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'headless'
 Provides-Extra: optional
 Requires-Dist: affine (>=2.3.0) ; extra == 'optional'
 Requires-Dist: colormath (>=3.0.0) ; extra == 'optional'
-Requires-Dist: kwimage-ext (>=0.2.0) ; extra == 'optional'
 Requires-Dist: kwplot (>=0.4.13) ; extra == 'optional'
 Requires-Dist: lark (>=1.1.2) ; extra == 'optional'
 Requires-Dist: lark-cython (>=0.0.12) ; extra == 'optional'
 Requires-Dist: seaborn (>=0.9.0) ; extra == 'optional'
+Requires-Dist: rich (>=12.3.0) ; extra == 'optional'
+Requires-Dist: ijson (>=3.1.4) ; extra == 'optional'
 Provides-Extra: optional-strict
 Requires-Dist: affine (==2.3.0) ; extra == 'optional-strict'
 Requires-Dist: colormath (==3.0.0) ; extra == 'optional-strict'
-Requires-Dist: kwimage-ext (==0.2.0) ; extra == 'optional-strict'
 Requires-Dist: kwplot (==0.4.13) ; extra == 'optional-strict'
 Requires-Dist: lark (==1.1.2) ; extra == 'optional-strict'
 Requires-Dist: lark-cython (==0.0.12) ; extra == 'optional-strict'
 Requires-Dist: seaborn (==0.9.0) ; extra == 'optional-strict'
+Requires-Dist: rich (==12.3.0) ; extra == 'optional-strict'
+Requires-Dist: ijson (==3.1.4) ; extra == 'optional-strict'
 Requires-Dist: sqlalchemy (==1.4.0) ; (python_version < "3.10" and python_version >= "3.9") and extra == 'optional-strict'
 Requires-Dist: jq (==1.2.2) ; (python_version < "3.10" and python_version >= "3.9") and extra == 'optional-strict'
+Requires-Dist: jq (==1.2.2) ; (python_version < "3.11" and python_version >= "3.10") and extra == 'optional-strict'
+Requires-Dist: kwimage-ext (==0.2.0) ; (python_version < "3.11" and python_version >= "3.6") and extra == 'optional-strict'
 Requires-Dist: jq (==1.1.3) ; (python_version < "3.5" and python_version >= "2.7") and extra == 'optional-strict'
 Requires-Dist: sqlalchemy (==1.4.0) ; (python_version < "3.6" and python_version >= "3.5") and extra == 'optional-strict'
 Requires-Dist: jq (==1.1.3) ; (python_version < "3.6" and python_version >= "3.5") and extra == 'optional-strict'
 Requires-Dist: sqlalchemy (==1.4.0) ; (python_version < "3.7" and python_version >= "3.6") and extra == 'optional-strict'
 Requires-Dist: jq (==1.2.2) ; (python_version < "3.7" and python_version >= "3.6") and extra == 'optional-strict'
 Requires-Dist: sqlalchemy (==1.4.0) ; (python_version < "3.8" and python_version >= "3.7") and extra == 'optional-strict'
 Requires-Dist: jq (==1.2.2) ; (python_version < "3.8" and python_version >= "3.7") and extra == 'optional-strict'
 Requires-Dist: sqlalchemy (==1.4.0) ; (python_version < "3.9" and python_version >= "3.8") and extra == 'optional-strict'
 Requires-Dist: jq (==1.2.2) ; (python_version < "3.9" and python_version >= "3.8") and extra == 'optional-strict'
+Requires-Dist: kwimage-ext (==0.2.1) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'optional-strict'
+Requires-Dist: jq (==1.3.0) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'optional-strict'
 Requires-Dist: sqlalchemy (==1.4.26) ; (python_version >= "3.10") and extra == 'optional-strict'
-Requires-Dist: jq (==1.2.2) ; (python_version >= "3.10") and extra == 'optional-strict'
 Requires-Dist: ujson (==5.2.0) ; (python_version >= "3.7") and extra == 'optional-strict'
+Requires-Dist: rich-argparse (==1.1.0) ; (python_version >= "3.7") and extra == 'optional-strict'
 Requires-Dist: sqlalchemy (>=1.4.0) ; (python_version < "3.10" and python_version >= "3.9") and extra == 'optional'
 Requires-Dist: jq (>=1.2.2) ; (python_version < "3.10" and python_version >= "3.9") and extra == 'optional'
+Requires-Dist: jq (>=1.2.2) ; (python_version < "3.11" and python_version >= "3.10") and extra == 'optional'
+Requires-Dist: kwimage-ext (>=0.2.0) ; (python_version < "3.11" and python_version >= "3.6") and extra == 'optional'
 Requires-Dist: jq (>=1.1.3) ; (python_version < "3.5" and python_version >= "2.7") and extra == 'optional'
 Requires-Dist: sqlalchemy (>=1.4.0) ; (python_version < "3.6" and python_version >= "3.5") and extra == 'optional'
 Requires-Dist: jq (>=1.1.3) ; (python_version < "3.6" and python_version >= "3.5") and extra == 'optional'
 Requires-Dist: sqlalchemy (>=1.4.0) ; (python_version < "3.7" and python_version >= "3.6") and extra == 'optional'
 Requires-Dist: jq (>=1.2.2) ; (python_version < "3.7" and python_version >= "3.6") and extra == 'optional'
 Requires-Dist: sqlalchemy (>=1.4.0) ; (python_version < "3.8" and python_version >= "3.7") and extra == 'optional'
 Requires-Dist: jq (>=1.2.2) ; (python_version < "3.8" and python_version >= "3.7") and extra == 'optional'
 Requires-Dist: sqlalchemy (>=1.4.0) ; (python_version < "3.9" and python_version >= "3.8") and extra == 'optional'
 Requires-Dist: jq (>=1.2.2) ; (python_version < "3.9" and python_version >= "3.8") and extra == 'optional'
+Requires-Dist: kwimage-ext (>=0.2.1) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'optional'
+Requires-Dist: jq (>=1.3.0) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'optional'
 Requires-Dist: sqlalchemy (>=1.4.26) ; (python_version >= "3.10") and extra == 'optional'
-Requires-Dist: jq (>=1.2.2) ; (python_version >= "3.10") and extra == 'optional'
 Requires-Dist: ujson (>=5.2.0) ; (python_version >= "3.7") and extra == 'optional'
+Requires-Dist: rich-argparse (>=1.1.0) ; (python_version >= "3.7") and extra == 'optional'
 Provides-Extra: postgresql
 Requires-Dist: sqlalchemy-utils (>=0.40.0) ; extra == 'postgresql'
 Provides-Extra: postgresql-strict
 Requires-Dist: sqlalchemy-utils (==0.40.0) ; extra == 'postgresql-strict'
 Requires-Dist: psycopg2-binary (==2.8.6) ; (python_version < "3.10" and python_version >= "3.9") and extra == 'postgresql-strict'
 Requires-Dist: psycopg2-binary (==2.9.1) ; (python_version < "3.11" and python_version >= "3.10") and extra == 'postgresql-strict'
 Requires-Dist: psycopg2-binary (==2.7.3.2) ; (python_version < "3.7" and python_version >= "3.6") and extra == 'postgresql-strict'
@@ -314,15 +348,15 @@
 Requires-Dist: psycopg2-binary (>=2.7.5) ; (python_version < "3.8" and python_version >= "3.7") and extra == 'postgresql'
 Requires-Dist: psycopg2-binary (>=2.8.4) ; (python_version < "3.9" and python_version >= "3.8") and extra == 'postgresql'
 Requires-Dist: psycopg2-binary (>=2.9.5) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'postgresql'
 Provides-Extra: runtime-strict
 Requires-Dist: delayed-image (==0.2.7) ; extra == 'runtime-strict'
 Requires-Dist: jsonschema (==3.2.0) ; extra == 'runtime-strict'
 Requires-Dist: kwarray (==0.6.7) ; extra == 'runtime-strict'
-Requires-Dist: kwimage (==0.9.12) ; extra == 'runtime-strict'
+Requires-Dist: kwimage (==0.9.19) ; extra == 'runtime-strict'
 Requires-Dist: packaging (==21.3) ; extra == 'runtime-strict'
 Requires-Dist: parse (==1.14.0) ; extra == 'runtime-strict'
 Requires-Dist: safer (==4.4.1) ; extra == 'runtime-strict'
 Requires-Dist: scriptconfig (==0.7.7) ; extra == 'runtime-strict'
 Requires-Dist: sortedcontainers (==2.3.0) ; extra == 'runtime-strict'
 Requires-Dist: ubelt (==1.2.4) ; extra == 'runtime-strict'
 Requires-Dist: uritools (==3.0.0) ; extra == 'runtime-strict'
@@ -359,20 +393,20 @@
 Requires-Dist: numpy (==1.23.2) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'runtime-strict'
 Requires-Dist: pandas (==1.5.0) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'runtime-strict'
 Requires-Dist: scikit-learn (==1.1.3) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'runtime-strict'
 Requires-Dist: scipy (==1.9.2) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'runtime-strict'
 Requires-Dist: psutil (==5.9.0) ; (python_version < "4.0" and python_version >= "3.11") and extra == 'runtime-strict'
 Provides-Extra: tests
 Requires-Dist: coverage (>=5.2.1) ; extra == 'tests'
-Requires-Dist: xdoctest (>=0.15.6) ; extra == 'tests'
+Requires-Dist: xdoctest (>=1.1.1) ; extra == 'tests'
 Requires-Dist: timerit (>=0.3.0) ; extra == 'tests'
 Requires-Dist: pytest (>=6.2.4) ; extra == 'tests'
 Provides-Extra: tests-strict
 Requires-Dist: coverage (==5.2.1) ; extra == 'tests-strict'
-Requires-Dist: xdoctest (==0.15.6) ; extra == 'tests-strict'
+Requires-Dist: xdoctest (==1.1.1) ; extra == 'tests-strict'
 Requires-Dist: timerit (==0.3.0) ; extra == 'tests-strict'
 Requires-Dist: pytest (==6.2.4) ; extra == 'tests-strict'
 Requires-Dist: pytest-cov (<2.6.0,==2.0.0) ; (python_version < "3.6.0") and extra == 'tests-strict'
 Requires-Dist: pytest-cov (==2.12.1) ; (python_version >= "3.6.0") and extra == 'tests-strict'
 Requires-Dist: pytest-cov (<2.6.0,>=2.0.0) ; (python_version < "3.6.0") and extra == 'tests'
 Requires-Dist: pytest-cov (>=2.12.1) ; (python_version >= "3.6.0") and extra == 'tests'
 
@@ -439,14 +473,18 @@
 
 The `kwcoco <https://pypi.org/project/kwcoco/>`_.  package can be installed via pip:
 
 .. code-block:: bash
 
     pip install kwcoco
 
+    # Or bleading edge
+    pip install git+https://gitlab.kitware.com/computer-vision/kwcoco@dev/0.6.3
+
+
 
 Feature Overview
 ----------------
 
 At its core kwcoco's goal is to make it easy to organize, query, manipulate,
 and distribute image and video datasets. To accomplish this goal it offers
 several features.
```

## Comparing `kwcoco-0.6.2.dist-info/RECORD` & `kwcoco-0.6.3.dist-info/RECORD`

 * *Files 10% similar despite different names*

```diff
@@ -1,109 +1,113 @@
-kwcoco/__init__.py,sha256=4vN-h4bpavngZmHxr1Jz4xBvzUg0E-zzz29oVuS-D2w,21711
+examples/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
+examples/bench_large_hyperspectral.py,sha256=jGFII_NDPLMSBJfKNSKEh1I69s-Z5u_-laFcbOgrLBU,5751
+examples/demo_kwcoco_spaces.py,sha256=in-DqiRa4c55hXvfkNOXqPMaPFcIELBbNQ-O-w7cDd8,4911
+examples/demo_sql_and_zip_files.py,sha256=N1E1jrHljLU4RAMJ4tka_eOArhEChsgIctQ8Pzr-M1E,1971
+examples/draw_gt_and_predicted_boxes.py,sha256=YqJONvd1fKBI0y3WMyzxYAvKKiJn9FnkMEi2jAqnY0o,2882
+examples/faq.py,sha256=90nhHQAmqwJsTFVsyuHo1rjriCW8g9zUUlwnaGreS0M,3838
+examples/getting_started_existing_dataset.py,sha256=x2sVovfTjaIpkp3PNa4ydvgPZt93UdmrpVVEz3WQACc,2074
+examples/loading_multispectral_data.py,sha256=4fwLcOUdk_0g1ZnqzA1EgNl98NT3DO56PYsmbff9ruQ,2068
+examples/modification_example.py,sha256=_yFRtnF_jIzXC2XT_5b6viatZ03cxumo5wy77fbbwsg,1683
+examples/shifting_annots.py,sha256=o-xcM_1irjyh4OQ6TvqX0hJndk162Js_V46iqASSbxs,2087
+examples/simple_kwcoco_torch_dataset.py,sha256=YcKxEHIPagY9hEbHb2wV0SBw6lR-2v3eHnZkOms_iDs,8883
+examples/vectorized_interface.py,sha256=lwlORAWZokXFye1Fg1-9xoF5EAZG7MyZGSktSv3fr-4,7896
+kwcoco/__init__.py,sha256=LrrHpFrqiCVC_pJXbzo4Ix5IyS4sC5T5xvF8dTCQgMc,21711
 kwcoco/__main__.py,sha256=VP_IimX_6QlcDY0Y8iPG0Od3RVGeEN7k96vuo6KcWK0,276
 kwcoco/__main__.pyi,sha256=AbpHGcgLb-kRsJGnwFEktk7uzpZOCcBY74-YBdrKVGs,1
 kwcoco/_helpers.py,sha256=HHT93Mmv9L4D_YTywzNPPTRoCbqQYeZUKPHEUNo67Vc,6721
 kwcoco/_helpers.pyi,sha256=2WSCjz_Q9shjKZ86cx5_hguuJS_YJRGRDOM2sCBjptw,717
 kwcoco/abstract_coco_dataset.py,sha256=um-DQBEOq9v0vUFH8fM5o_OYoe1GI2BfAwzKxDjBijU,309
 kwcoco/abstract_coco_dataset.pyi,sha256=yw-OIinDDAHh_CXYFsbTShHxnth-jVrsDyMigkmNS8s,62
 kwcoco/category_tree.py,sha256=bYwaDHdZWL-KXCjslvu6t7TxhiUP3JGGY-OE1_nrA5o,27500
-kwcoco/category_tree.pyi,sha256=J46p9dBr5VmiYCXX5SKGjD2JVIHSsH6ARxU3CFqvDmU,2442
+kwcoco/category_tree.pyi,sha256=asJlJ-TqpvSic9MZS4_MVs0MWUJNwS64K7T0Git4RqQ,2483
 kwcoco/channel_spec.py,sha256=Pq-G7p9gAZBrQsTVPVLJs5bE29DUE8loDmSgRQLvfQQ,364
 kwcoco/channel_spec.pyi,sha256=-kBG0y-qCPkMPSUxBaKJOdSND-dME4owPDFSaHO40iY,104
-kwcoco/coco_dataset.py,sha256=92gcn18z_i4nrZrAxPkN72tFgnhQ4VSdlIng-9hVVVU,256568
-kwcoco/coco_dataset.pyi,sha256=Ufxu1E0mXpZdmErOUlCd2RupTXCzSbUwOlXeVGWTMmQ,12926
-kwcoco/coco_evaluator.py,sha256=pLQQrfDHGCFe8JrMUzyT9s60wDk7E-9UiqAfG6wkWUo,50060
-kwcoco/coco_evaluator.pyi,sha256=mvNburnxx_QU7B-EZjc7xNLnx0UNuauJ-JKb4G__sqw,2003
-kwcoco/coco_image.py,sha256=8iJjdHVP3Un7lxnzKXq-4oenZjJ2CrIZqjYwGLYFMNM,50830
-kwcoco/coco_image.pyi,sha256=hEtZQ7sKth8xp_QIFV_DM5cynL2Xkr1hs84MhGCB-4A,3393
+kwcoco/coco_dataset.py,sha256=Mth0LMs6YUhLbukbU9q59GvO_V8OuaeqW8RS1H0XbcA,260466
+kwcoco/coco_dataset.pyi,sha256=CQC9oFYcjBw4gRbr30pm-3a1pRmUvb4GzcbVsuKDLvg,13509
+kwcoco/coco_evaluator.py,sha256=7NzuElY0SOSYhoezxIqsa35aBkbM6hwCoT5wLEslFPM,50064
+kwcoco/coco_evaluator.pyi,sha256=sVMbc3MYVKlhxTWDpVFLuyP8OfW7YyJHGicvUjaH49g,1964
+kwcoco/coco_image.py,sha256=LL7-OGiisj4XH66Z4M4fTk9ilsz9m0MP07OMKqzH8V0,51802
+kwcoco/coco_image.pyi,sha256=QZQMupb7xcowd7T57EhL6ftBZYJ67Wwa-2FKDadIoFU,3809
 kwcoco/coco_objects1d.py,sha256=lRLCzsyZj8L5iYy5gP9tPu_SLhxGtfXtCJ2A8strXc8,27309
-kwcoco/coco_objects1d.pyi,sha256=CE3xQYRvPx2UumGypRGIFsCjD75HJEk66mcAaLmI_VA,3468
-kwcoco/coco_schema.py,sha256=zmz8z7R9KT4PHy8WHECJ8MUnmevkF45FDJMYhRhxRek,11331
-kwcoco/coco_schema.pyi,sha256=BVmCKDizmsHeffS3WvfXmi-_wqKhkrgzSJMT-SX6rOc,846
-kwcoco/coco_sql_dataset.py,sha256=cuxdrh-u7XV8DuRCauAdAPZpvzb6H2nB8zCUfyryH-w,91845
-kwcoco/coco_sql_dataset.pyi,sha256=C4m-0Bi01NeFF1wxfuV8ElcyiJ-7PTLQPrwkEvFpl5k,6055
+kwcoco/coco_objects1d.pyi,sha256=2p7pDvoKattdEL0LFkBK5Y0fxoSL1f8dihS5Ie2yh-Q,3637
+kwcoco/coco_schema.py,sha256=B9IpLcEUOHodOOFm7loJd8NxXocqvE3g85yO_IC5goI,11927
+kwcoco/coco_schema.pyi,sha256=_XuAfIHajhsv4B-EY18hdFKmRxwoLy_MJAtUWrG620s,864
+kwcoco/coco_sql_dataset.py,sha256=CaOMWaZr-I38khfxt8G8EtbacfbYL_D7-2nsAmzn1zA,91500
+kwcoco/coco_sql_dataset.pyi,sha256=ydYOfcoSZ-_dojR8ZGx6_zPtGIK8YbinhBvWDMr8e7o,6451
 kwcoco/compat_dataset.py,sha256=dmcC0xfi6wIkoQuEuQyPQ03ftL7xhEYvP4sX-kMWnsE,16155
-kwcoco/compat_dataset.pyi,sha256=DwEX55IHv3a7tJhk5NDAvi6L6HJaAWWEet_yMNkjWTo,1793
+kwcoco/compat_dataset.pyi,sha256=MFprn7PIri-zeLv-MtM77q1WAXFVCfeFJIdNt6O5_7E,1757
 kwcoco/exceptions.py,sha256=AI-jpFWMOmYWZgo9t9DEmRbk-Eu-syYllhQ6APR7FvE,328
 kwcoco/exceptions.pyi,sha256=2U3AbUWXT2ItJA_owHXFEQMQe8R0TV2cQV9LZnK4ZhY,128
 kwcoco/kpf.py,sha256=fC2qVN2JZFYy8dh6b7_paOBIrV8UXDuRawd2lUnARVE,2639
 kwcoco/kpf.pyi,sha256=4Hf7mAmqCIWnKIld7Ng6BAwuC3OHCisBRUjgAsdMY1U,74
 kwcoco/kw18.py,sha256=-_T2KpOFltRP3eXt0kqfiW8QTY4AOORoIJw_sDIh4DE,13342
-kwcoco/kw18.pyi,sha256=cGcBIzQDFlsTYzCRmoVhC4LXAsGuu9hs0K1Wd1yQGJI,682
+kwcoco/kw18.pyi,sha256=XHGx7RzZGNEhMly3R5c-fbDGBjLFx6VWftwCO-CcsLY,645
 kwcoco/py.typed,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kwcoco/sensorchan_spec.py,sha256=OEi6WWnbKGMLr415BGjwXpJl8ME8J5K6xOI0q4uZFW4,402
 kwcoco/sensorchan_spec.pyi,sha256=WW3lxJX-M6IONo1fm3uSsscd1Iv52d6TjIGiSoTi5WU,325
 kwcoco/cli/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-kwcoco/cli/__main__.py,sha256=S8_NHA7EwMUwmo3ZANtI7qsHQicx12j_NCeOvtlqifw,6854
+kwcoco/cli/__main__.py,sha256=WK-vWZ6VkrFhgfW8L-jcq9ukvzhCy25e_2nErtnrGXw,3608
 kwcoco/cli/coco_conform.py,sha256=5zFzwNAfpc1IDhJ4zsMftM1MOSRGqMC93vb7UqLs5zo,3372
 kwcoco/cli/coco_eval.py,sha256=jUmTvvhMo2zJelZjXNDikwACqn626msXrX6RBs9crm8,5725
 kwcoco/cli/coco_grab.py,sha256=TDhaw4gXpJ3Z69y5zR1FFoR4rhv2jKesQUrJThTt1I8,2293
+kwcoco/cli/coco_info.py,sha256=oJLfLMP78pRbHWYDnc5kXQeYwZj6ShAiqU0BjuH2nBg,7441
 kwcoco/cli/coco_modify_categories.py,sha256=iItumiGYFCZkSt08o3PSmbGEle8V9NgP_42cxfAcbT0,4164
-kwcoco/cli/coco_reroot.py,sha256=Cl6FOrkkOa0sYu0LLa12bJqGXqvMyZScr0VekU_KiFE,6771
+kwcoco/cli/coco_move.py,sha256=cK5B9TIFJyfZScwJgyzvwgvzFf-dNU0suSq-z3LoXCM,2952
+kwcoco/cli/coco_move_assets.py,sha256=GDh67cz0cKrtsmLDsZWLO_mboGCMQdKZApnauhMGF14,3470
+kwcoco/cli/coco_reroot.py,sha256=Ca6c4XxhdHo6xQREb0zxZWyyAHrktOBtFJwuDfsiyuY,7138
 kwcoco/cli/coco_show.py,sha256=5Lj_EqG_JZqozRENxJIrQ9J6N2g2QVTDwTxeEFvTTjs,4680
 kwcoco/cli/coco_split.py,sha256=Y7LPgnLGzD47DC1X1ZVG3gyDK0N6mDJJjFM2zG7Rf6M,6731
-kwcoco/cli/coco_stats.py,sha256=LcPfslOTRoQTERMobYZhiQ7-8E_N2_sxblfKmg42YLM,8473
-kwcoco/cli/coco_subset.py,sha256=5L_L3fyC7j9WtP_5UtsJdwykT8oUMvme_296eGuprz4,12894
+kwcoco/cli/coco_stats.py,sha256=u-o-lHXhjxQuBzrrQfYcVglrDLEackECQKijaETxhwc,8490
+kwcoco/cli/coco_subset.py,sha256=--gTwr_27adQm6j1KnCCumeQBthw7J5PgDj5i5mXa9k,13369
 kwcoco/cli/coco_toydata.py,sha256=ullrW9SPmFXs7EO6nt6MBESydmLpG62aXIkpMcYy6RI,4904
-kwcoco/cli/coco_union.py,sha256=4rvj3l25CNoNNBx7QcqmuyuZi-37t1JNZisbEa0keSw,3566
-kwcoco/cli/coco_validate.py,sha256=K7elzJW3sPmA1WckQwxmwUeoMvOUHJ_lclHMQ1w1jcA,7900
+kwcoco/cli/coco_union.py,sha256=uSONH2NkAAx8hMfjieQU5uPZvAQX8CYwuKWRYXIUK5E,3879
+kwcoco/cli/coco_validate.py,sha256=Dn_rGPZ1QCBeDslFr61LoCP_d4hIsC5W9qMtKojRb9A,7957
 kwcoco/data/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kwcoco/data/grab_camvid.py,sha256=f4hjW85BGJsHyLKSvwJPQ7eKbHzf-Yr6pLgi4KjOTm4,21744
 kwcoco/data/grab_cifar.py,sha256=zx6DpuwvQcfLQlOnBljZBEpXdkDrHfCMC8diZOKnM5s,5849
 kwcoco/data/grab_datasets.py,sha256=cUiIBJQAFFHuABd6-BBIerUJCZQNSpWxnUoNXsLwths,720
 kwcoco/data/grab_domainnet.py,sha256=aMI2q1XOAkQG9en2ylybIPzbBdxVn-0nKkN2BVpf6dY,6857
 kwcoco/data/grab_spacenet.py,sha256=YTuFs8pSPai2juxLmw7EgpTPe0LW1SXt7xeSsI9GSNQ,9189
 kwcoco/data/grab_voc.py,sha256=o5zIxjvJ6Wy49TqHDDeAXOOGqQvqldV4YhcMlPEBCaI,9865
 kwcoco/demo/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-kwcoco/demo/boids.py,sha256=CIoYIK5ZsoL4z-KWaIf_1zwcNbWScf-UDJTQkWA_3T4,23050
+kwcoco/demo/boids.py,sha256=UzU8jid5ovKHLG1jU58gatZevjmYjD0wsGQsmgnr9hs,23449
 kwcoco/demo/perterb.py,sha256=zDfyYzM8UhsG8ocBXcTtRXUg_WBSiqI3E4xGqyHpdek,14007
 kwcoco/demo/toydata.py,sha256=9PHq9-8FqCAEpxfN6w9vO9vsMmVcWMhZNoO8TY3is9Y,500
 kwcoco/demo/toydata_image.py,sha256=o3pPNxLMNnoHp4OhEG0ax4sELaxkIgFL-r0fnk_czp4,20032
 kwcoco/demo/toydata_video.py,sha256=cmwgkVPCNwwBdhdF-3ehz67QE0QXaAl6QVUOksZ_LnY,55280
 kwcoco/demo/toypatterns.py,sha256=O6U70NlUQ-2Tty1YcjtXPEy-J6xjxkxxIsxB28lBU9U,20195
-kwcoco/examples/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-kwcoco/examples/bench_large_hyperspectral.py,sha256=jGFII_NDPLMSBJfKNSKEh1I69s-Z5u_-laFcbOgrLBU,5751
-kwcoco/examples/demo_kwcoco_spaces.py,sha256=in-DqiRa4c55hXvfkNOXqPMaPFcIELBbNQ-O-w7cDd8,4911
-kwcoco/examples/demo_sql_and_zip_files.py,sha256=N1E1jrHljLU4RAMJ4tka_eOArhEChsgIctQ8Pzr-M1E,1971
-kwcoco/examples/draw_gt_and_predicted_boxes.py,sha256=YqJONvd1fKBI0y3WMyzxYAvKKiJn9FnkMEi2jAqnY0o,2882
-kwcoco/examples/faq.py,sha256=dyAO63ovoiQOa9S-vnwyrwSwPZKZjJr1TjtR-dpnv0E,2692
-kwcoco/examples/getting_started_existing_dataset.py,sha256=x2sVovfTjaIpkp3PNa4ydvgPZt93UdmrpVVEz3WQACc,2074
-kwcoco/examples/loading_multispectral_data.py,sha256=4fwLcOUdk_0g1ZnqzA1EgNl98NT3DO56PYsmbff9ruQ,2068
-kwcoco/examples/modification_example.py,sha256=_yFRtnF_jIzXC2XT_5b6viatZ03cxumo5wy77fbbwsg,1683
-kwcoco/examples/shifting_annots.py,sha256=o-xcM_1irjyh4OQ6TvqX0hJndk162Js_V46iqASSbxs,2087
-kwcoco/examples/simple_kwcoco_torch_dataset.py,sha256=H8wNs3NUU7QT8OlzmQ0Xqq9E0HkQt7yXN549erfon3A,8961
-kwcoco/examples/vectorized_interface.py,sha256=lwlORAWZokXFye1Fg1-9xoF5EAZG7MyZGSktSv3fr-4,7896
 kwcoco/metrics/__init__.py,sha256=ePLCT1SFSyrqCXGiIcYnuB7cITfBCn0eK3sPUgUsy-8,699
 kwcoco/metrics/assignment.py,sha256=nDXo6ii9yHVyLOR8t8GNBiQLZ84bt_pel2QSQbxd0Og,27823
 kwcoco/metrics/clf_report.py,sha256=_i0m86dPl3kVQZq55OhfVlYSLTHF1UoUZ4dA_st5L4M,22260
 kwcoco/metrics/confusion_measures.py,sha256=fCADMo0JGE4698ZzlQLZ4SaLRoQ-POBim2RcojxNGDA,52248
-kwcoco/metrics/confusion_vectors.py,sha256=T05Wy016-fr0uX_nODFO92dq72b2e2z-oqeAK0b-IqE,43271
+kwcoco/metrics/confusion_vectors.py,sha256=EDIBJroYSOYwvNfKkJoMkY3-kNEqxVGdIxKnFACgZrA,43342
 kwcoco/metrics/detect_metrics.py,sha256=cc6v9j4rJagfr_NvRk7mrVouBaCPBDYFxy0L3wk_d18,60057
-kwcoco/metrics/drawing.py,sha256=8vJO7k9lJOvqB17mt5NesteKPnB6PkKM2qWHPqZ4li0,22909
+kwcoco/metrics/drawing.py,sha256=fyKSf2OOdYbQ-0_9eQJZbwkGVp_FsVhR4GUJoK5oYa4,23045
 kwcoco/metrics/functional.py,sha256=cLISC8n9E5IGiPRoxlAXfVDikT1GVTWMa9jIchiBDmQ,6984
 kwcoco/metrics/sklearn_alts.py,sha256=01RQiqDPOwjMvgD98ujQ_geEEo2gTF5dOKXY6ko9ZpQ,7336
 kwcoco/metrics/util.py,sha256=ycowZjJyRIDKosxZeoNloxtfiYshuYyRMbEOS-G6YfE,77
 kwcoco/metrics/voc_metrics.py,sha256=5onslXrMXDWSvHRn1HBKT7AmeXs_lU_R7M5T-duoBWk,15348
 kwcoco/util/__init__.py,sha256=ckjdFBLwaEv976ou5_1235pGInUyvBKvwpdXE6biX-w,5567
 kwcoco/util/dict_like.py,sha256=izT5L6dhpdLRZ1H7ef_d96ELPgiTGoYqsgMDiFIFm3w,3765
 kwcoco/util/dict_proxy2.py,sha256=CJeauso2Nmg5jSp94zJ0u5OhaMwZaaYFMBgIz1GAr64,9344
-kwcoco/util/jsonschema_elements.py,sha256=JxM2FGvcOIsgsjPjK0UfezTHsmcqgF7JOkPHGkJlB0M,13052
+kwcoco/util/ijson_ext.py,sha256=YT60V-eAx91YPky7kabxDLFtX4rEGOuFnfopt1NE5i0,11679
+kwcoco/util/jsonschema_elements.py,sha256=Hstt-SNaCLNLSekSPgb46ReGJD6_LWCV93F-LuRF4vU,13191
 kwcoco/util/lazy_frame_backends.py,sha256=VQx6rGmyIVsQm-EIJjQ1lHZ_qWFeZ61qMU54s8_za2s,211
 kwcoco/util/util_archive.py,sha256=2AJiiYibnfIUM3WVA3UpKNLKY-U4t_Y4XH-VH8Bt0f0,10304
 kwcoco/util/util_deprecate.py,sha256=o0DDvzOTrk2WDKYdGA-jmKjG223eiLWqWNvE2ii9gAc,644
 kwcoco/util/util_eval.py,sha256=hxt7m6VrojLcTHnJtFY1DWLfpl15X3fQQSv0IFpStY8,2733
 kwcoco/util/util_futures.py,sha256=T6s8zykO4Ve1_8XSlXsDfS6ehq-ZYuY3zVPl2RL2XAc,185
 kwcoco/util/util_json.py,sha256=xP_3t6cJrFrAlmlGoUSkdrStq9m_5m_7P2bEPjBX17w,9367
 kwcoco/util/util_monkey.py,sha256=RNnW4m9dgH7O0lUlg8T2TPkd-e8kxL4lRSL1xLtZn00,3678
 kwcoco/util/util_parallel.py,sha256=XaXUuq65z-LQjc0VOAf63dEGAPDiAUNihgzPgvVdNzY,2988
 kwcoco/util/util_reroot.py,sha256=5fup37Z0MFG-A5g5ePezLg6JYQOHZLRESd_qiyepEhg,3711
-kwcoco/util/util_sklearn.py,sha256=IIsxsBAlIKnE48Ytk5AretHEf5IS65r2nZih-lXollw,5654
+kwcoco/util/util_sklearn.py,sha256=cgMGG7w6N8TW-LR9JmAUxVaig1z-nu4MvIWzqxRV_hU,6153
 kwcoco/util/util_special_json.py,sha256=ogijRKL5BgqAdCaD86LtN9hjHOlctyKLc65rzaTF6zs,4809
 kwcoco/util/util_truncate.py,sha256=9rmAKKEhN7ZTj7RdkYrOzqiza6nBkUK1AeQEuNj9XAk,2720
 kwcoco/util/util_windows.py,sha256=bNnrleJrbOoYLCIXfXZoN28hOGOJJZ8iojvr9OxWrd8,2015
 kwcoco/util/delayed_ops/__init__.py,sha256=qa5XUk87V7_v90-TcLhDCBL4mJOQQaPtPP6-awoBfPk,1607
-kwcoco-0.6.2.dist-info/LICENSE,sha256=o6jcFk_bwjiPUz6vHK0Ju7RwbFp9eXMwAS2BDnwER-4,11343
-kwcoco-0.6.2.dist-info/METADATA,sha256=BR39Wig8G1He4YxYjf8U9gGjdSD4xrFpexuYgbKnShQ,64330
-kwcoco-0.6.2.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-kwcoco-0.6.2.dist-info/entry_points.txt,sha256=jB-l1KixdMXKAU4nAKhNHuptveF45EacEn1DfAPMtVY,52
-kwcoco-0.6.2.dist-info/top_level.txt,sha256=FF5fjYq6LQmz4M65lprxFeIIvSFc4sVuVqGqyrpjyjo,7
-kwcoco-0.6.2.dist-info/RECORD,,
+kwcoco-0.6.3.dist-info/LICENSE,sha256=o6jcFk_bwjiPUz6vHK0Ju7RwbFp9eXMwAS2BDnwER-4,11343
+kwcoco-0.6.3.dist-info/METADATA,sha256=DETMdLULNY5wy9pYrPzEeMQs1EtFEtAcElVKBsBsEW4,68044
+kwcoco-0.6.3.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+kwcoco-0.6.3.dist-info/entry_points.txt,sha256=jB-l1KixdMXKAU4nAKhNHuptveF45EacEn1DfAPMtVY,52
+kwcoco-0.6.3.dist-info/top_level.txt,sha256=k9a2VPp4A_ywois8vZBd9HU-RGWcO8ujeadJHJXPACo,16
+kwcoco-0.6.3.dist-info/RECORD,,
```

